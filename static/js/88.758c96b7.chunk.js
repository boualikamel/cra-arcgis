(function(){(this||window).webpackJsonpareactgis.registerAbsMids({"esri/layers/graphics/OptimizedGeometry":70,"esri/layers/graphics/OptimizedFeature":107,"esri/layers/graphics/OptimizedFeatureSet":156,"esri/core/pbf":291,"esri/tasks/operations/queryAttachments":429,"esri/tasks/QueryTask":439,"esri/tasks/operations/queryRelatedRecords":440,"esri/layers/graphics/sources/FeatureLayerSource":1148})})(),(this.webpackJsonpareactgis=this.webpackJsonpareactgis||[]).push([[88,112],{107:function(t,e,r){var n,s;n=[r.dj.c(t.i),e,r(21)],void 0===(s=function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,r,n){void 0===t&&(t=null),void 0===e&&(e={}),this.localId=0,this.geohashIndexed=!1,this.geohashX=0,this.geohashY=0,this.geometry=t,e&&(this.attributes=e),r&&(this.centroid=r),null!=n&&(this.objectId=n)};e.default=n}.apply(null,n))||(t.exports=s)},1148:function(t,e,r){var n,s;n=[r.dj.c(t.i),e,r(22),r(20),r(26),r(31),r(32),r(51),r(27),r(409),r(33),r(28),r(50),r(23),r(439),r(429)],void 0===(s=function(t,e,r,n,s,a,o,i,u,d,c,p,l,h,y,f){function _(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return"string"==typeof t?[2,l.dataComponents(t)||{data:t}]:[2,p.create((function(e,r){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(l.dataComponents(n.result))},n.onerror=function(t){return r(t)}}))]}))}))}Object.defineProperty(e,"__esModule",{value:!0});var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="feature-layer",e}return r(e,t),e.prototype.load=function(t){var e=c.isSome(t)?t.signal:null;return this.addResolvingPromise(this._fetchService(e)),this.when()},Object.defineProperty(e.prototype,"queryTask",{get:function(){var t=this.layer,e=t.parsedUrl,r=t.dynamicDataSource,n=t.gdbVersion;return new y({url:null!=r?e.path+"?"+l.objectToQuery(e.query):e.path,gdbVersion:n})},enumerable:!0,configurable:!0}),e.prototype.addAttachment=function(t,e){var r=this;return this.load().then((function(){var n=t.attributes[r.layer.objectIdField],a=r.layer.parsedUrl.path+"/"+n+"/addAttachment",o=s({f:"json"},r.layer.parsedUrl.query),u=r._getFormDataForAttachment(e,o);return i(a,{body:u}).then((function(t){return r._createFeatureEditResult(t.data.addAttachmentResult)})).catch((function(t){throw r._createAttachmentErrorResult(n,t)}))}))},e.prototype.updateAttachment=function(t,e,r){var n=this;return this.load().then((function(){var a=t.attributes[n.layer.objectIdField],o=n.layer.parsedUrl.path+"/"+a+"/updateAttachment",u=s({f:"json"},n.layer.parsedUrl.query,{attachmentId:e}),d=n._getFormDataForAttachment(r,u);return i(o,{body:d}).then((function(t){return n._createFeatureEditResult(t.data.updateAttachmentResult)})).catch((function(t){throw n._createAttachmentErrorResult(a,t)}))}))},e.prototype.applyEdits=function(t,e){return o(this,void 0,void 0,(function(){var r,n,s,o,u,d,c,p,l,h,y,f,_,g,m,v,b;return a(this,(function(a){switch(a.label){case 0:return[4,this.load()];case 1:a.sent(),r=t.addFeatures.map(this._serializeFeature,this),n=t.updateFeatures.map(this._serializeFeature,this),s=this._getFeatureIds(t.deleteFeatures),o=[],u=[],d=0,c=t.addAttachments,a.label=2;case 2:return d<c.length?(f=c[d],l=(p=o).push,[4,this._serializeAttachment(f)]):[3,5];case 3:l.apply(p,[a.sent()]),a.label=4;case 4:return d++,[3,2];case 5:h=0,y=t.updateAttachments,a.label=6;case 6:return h<y.length?(f=y[h],g=(_=u).push,[4,this._serializeAttachment(f)]):[3,9];case 7:g.apply(_,[a.sent()]),a.label=8;case 8:return h++,[3,6];case 9:return m={adds:o,updates:u,deletes:t.deleteAttachments.slice()},v={f:"json",adds:r.length?JSON.stringify(r):null,updates:n.length?JSON.stringify(n):null,deletes:s.length?s.join(","):null,gdbVersion:e&&e.gdbVersion,rollbackOnFailure:e&&e.rollbackOnFailureEnabled,useGlobalIds:e&&e.globalIdUsed,attachments:JSON.stringify(m)},[4,i(this.layer.parsedUrl.path+"/applyEdits",{query:v,method:"post",responseType:"json"})];case 10:return b=a.sent(),[2,this._createEditsResult(b)]}}))}))},e.prototype.deleteAttachments=function(t,e){var r=this;return this.load().then((function(){var n=t.attributes[r.layer.objectIdField],a=r.layer.parsedUrl.path+"/"+n+"/deleteAttachments";return i(a,{query:s({f:"json"},r.layer.parsedUrl.query,{attachmentIds:e.join(",")}),method:"post",responseType:"json"}).then((function(t){return t.data.deleteAttachmentResults.map(r._createFeatureEditResult)})).catch((function(t){throw r._createAttachmentErrorResult(n,t)}))}))},e.prototype.queryAttachments=function(t,e){var r=this;void 0===e&&(e={});var n=this.layer.parsedUrl,a=n.path;return this.load().then((function(){var o=s({},e,{query:s({},n.query,{f:"json"}),responseType:"json"});if(!r.layer.get("capabilities.operations.supportsQueryAttachments")){for(var u=t.objectIds,d=[],c=0,l=u;c<l.length;c++){var h=l[c],y=a+"/"+h+"/attachments";d.push(i(y,o))}return p.all(d).then((function(t){return u.map((function(e,r){return{parentObjectId:e,attachmentInfos:t[r].data.attachmentInfos}}))})).then((function(t){return f.processAttachmentQueryResult(t,a)}))}return r.queryTask.executeAttachmentQuery(t,o)}))},e.prototype.queryFeatures=function(t,e){var r=this;return this.load().then((function(){return r.queryTask.execute(t,e)}))},e.prototype.queryFeaturesJSON=function(t,e){var r=this;return this.load().then((function(){return r.queryTask.executeJSON(t,e)}))},e.prototype.queryObjectIds=function(t,e){var r=this;return this.load().then((function(){return r.queryTask.executeForIds(t,e)}))},e.prototype.queryFeatureCount=function(t,e){var r=this;return this.load().then((function(){return r.queryTask.executeForCount(t,e)}))},e.prototype.queryExtent=function(t,e){var r=this;return this.load().then((function(){return r.queryTask.executeForExtent(t,e)}))},e.prototype.queryRelatedFeatures=function(t,e){var r=this;return this.load().then((function(){return r.queryTask.executeRelationshipQuery(t,e)}))},e.prototype._fetchService=function(t){return o(this,void 0,void 0,(function(){var e,r;return a(this,(function(n){switch(n.label){case 0:return(e=this.layer.sourceJSON)?(this.sourceJSON=e,[2]):[4,i(this.layer.parsedUrl.path,{query:s({f:"json"},this.layer.parsedUrl.query),responseType:"json",signal:t})];case 1:return r=n.sent().data,this.sourceJSON=r,[2]}}))}))},e.prototype._serializeFeature=function(t){var e=t.geometry,r=t.attributes;return c.isNone(e)?{attributes:r}:"mesh"===e.type||"extent"===e.type?null:{geometry:e.toJSON(),attributes:r}},e.prototype._serializeAttachment=function(t){return o(this,void 0,void 0,(function(){var e,r,n,s,o,i,u,d,c;return a(this,(function(a){switch(a.label){case 0:return e=t.feature,r=t.attachment,n=r.globalId,s=r.name,o=r.contentType,i=r.data,u=r.uploadId,d={globalId:n,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null},e&&(d.parentGlobalId="attributes"in e?e.attributes&&e.attributes[this.layer.globalIdField]:e.globalId),u?(d.uploadId=u,[3,3]):[3,1];case 1:return i?[4,_(i)]:[3,3];case 2:c=a.sent(),d.contentType=c.mediaType,d.data=c.data,i instanceof File&&(d.name=i.name),a.label=3;case 3:return s&&(d.name=s),o&&(d.contentType=o),[2,d]}}))}))},e.prototype._getFeatureIds=function(t){var e=t[0];return e?"objectId"in e?this._getIdsFromFeatureIdentifier(t):this._getIdsFromFeatures(t):[]},e.prototype._getIdsFromFeatures=function(t){var e=this.layer.objectIdField;return t.map((function(t){return t.attributes&&t.attributes[e]}))},e.prototype._getIdsFromFeatureIdentifier=function(t){return t.map((function(t){return t.objectId}))},e.prototype._createEditsResult=function(t){var e=t.data,r=t.data&&t.data.attachments;return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:r&&r.addResults?r.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:r&&r.updateResults?r.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:r&&r.deleteResults?r.deleteResults.map(this._createFeatureEditResult,this):[]}},e.prototype._createFeatureEditResult=function(t){var e=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:e?new u("feature-layer-source:edit-failure",e.description,{code:e.code}):null}},e.prototype._createAttachmentErrorResult=function(t,e){var r=e.details.messages&&e.details.messages[0]||e.message,n=e.details.httpStatus||e.details.messageCode;return{objectId:t,globalId:null,error:new u("feature-layer-source:attachment-failure",r,{code:n})}},e.prototype._getFormDataForAttachment=function(t,e){var r=t instanceof FormData?t:t&&t.elements?new FormData(t):null;if(r)for(var n in e){var s=e[n];null!=s&&(r.set?r.set(n,s):r.append(n,s))}return r},n([h.property()],e.prototype,"type",void 0),n([h.property({constructOnly:!0})],e.prototype,"layer",void 0),n([h.property({readOnly:!0,dependsOn:["layer.parsedUrl","layer.gdbVersion","layer.dynamicDataSource"]})],e.prototype,"queryTask",null),n([h.subclass("esri.layers.graphics.sources.FeatureLayerSource")],e)}(h.declared(d));e.default=g}.apply(null,n))||(t.exports=s)},156:function(t,e,r){var n,s;n=[r.dj.c(t.i),e],void 0===(s=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1};e.default=r}.apply(null,n))||(t.exports=s)},291:function(t,e,r){var n,s;n=[r.dj.c(t.i),e,r(36),r(177)],void 0===(s=function(t,e,r,n){var s=r("esri-text-decoder")?new TextDecoder("utf-8"):null,a=r("safari")||r("ios")?6:r("ff")?12:32;return function(){function t(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=t?t.byteLength:0),this._tag=0,this._dataType=99,this.init(t,e,r,n)}return t.prototype.init=function(t,e,r,n){this._data=t,this._dataView=e,this._pos=r,this._end=n},t.prototype.clone=function(){return new t(this._data,this._dataView,this._pos,this._end)},t.prototype.pos=function(){return this._pos},t.prototype.next=function(t){for(;;){if(this._pos===this._end)return!1;var e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0},t.prototype.empty=function(){return this._pos>=this._end},t.prototype.tag=function(){return this._tag},t.prototype.getInt32=function(){return this._decodeVarint()},t.prototype.getInt64=function(){return this._decodeVarint()},t.prototype.getUInt32=function(){var t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))},t.prototype.getUInt64=function(){return this._decodeVarint()},t.prototype.getSInt32=function(){var t=this.getUInt32();return t>>>1^-(1&t)|0},t.prototype.getSInt64=function(){return this._decodeSVarint()},t.prototype.getBool=function(){var t=0!==this._data[this._pos];return this._skip(1),t},t.prototype.getEnum=function(){return this._decodeVarint()},t.prototype.getFixed64=function(){var t=this._dataView,e=this._pos,r=t.getUint32(e,!0)+4294967296*t.getUint32(e+4,!0);return this._skip(8),r},t.prototype.getSFixed64=function(){var t=this._dataView,e=this._pos,r=t.getUint32(e,!0)+4294967296*t.getInt32(e+4,!0);return this._skip(8),r},t.prototype.getDouble=function(){var t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t},t.prototype.getFixed32=function(){var t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t},t.prototype.getSFixed32=function(){var t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t},t.prototype.getFloat=function(){var t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t},t.prototype.getString=function(){var t=this._getLength(),e=this._pos,r=this._toString(this._data,e,e+t);return this._skip(t),r},t.prototype.getBytes=function(){var t=this._getLength(),e=this._pos,r=this._toBytes(this._data,e,e+t);return this._skip(t),r},t.prototype.processMessageWithArgs=function(t,e,r,n){var s=this.getMessage(),a=t(s,e,r,n);return s.release(),a},t.prototype.processMessage=function(t){var e=this.getMessage(),r=t(e);return e.release(),r},t.prototype.getMessage=function(){var e=this._getLength(),r=t.pool.acquire();return r.init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),r},t.prototype.release=function(){t.pool.release(this)},t.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},t.prototype._skip=function(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t},t.prototype._decodeVarint=function(){var t,e=this._data,r=this._pos,n=0;if(this._end-r>=10)do{if(n|=127&(t=e[r++]),0==(128&t))break;if(n|=(127&(t=e[r++]))<<7,0==(128&t))break;if(n|=(127&(t=e[r++]))<<14,0==(128&t))break;if(n|=(127&(t=e[r++]))<<21,0==(128&t))break;if(n+=268435456*(127&(t=e[r++])),0==(128&t))break;if(n+=34359738368*(127&(t=e[r++])),0==(128&t))break;if(n+=4398046511104*(127&(t=e[r++])),0==(128&t))break;if(n+=562949953421312*(127&(t=e[r++])),0==(128&t))break;if(n+=72057594037927940*(127&(t=e[r++])),0==(128&t))break;if(n+=0x8000000000000000*(127&(t=e[r++])),0==(128&t))break;throw new Error("Varint too long!")}while(0);else{for(var s=1;r!==this._end&&0!=(128&(t=e[r]));)++r,n+=(127&t)*s,s*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=t*s}return this._pos=r,n},t.prototype._decodeSVarint=function(){var t=this._decodeVarint();return t%2?-(t+1)/2:t/2},t.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},t.prototype._toString=function(t,e,r){if((r=Math.min(this._end,r))-e>a&&s){var n=t.subarray(e,r);return s.decode(n)}for(var o="",i="",u=e;u<r;++u){var d=t[u];128&d?i+="%"+d.toString(16):(o+=decodeURIComponent(i)+String.fromCharCode(d),i="")}return i.length&&(o+=decodeURIComponent(i)),o},t.prototype._toBytes=function(t,e,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,e,r-e)},t.pool=new n(t,!1,(function(t){t._data=null,t._dataView=null})),t}()}.apply(null,n))||(t.exports=s)},429:function(t,e,r){var n,s;n=[r.dj.c(t.i),e,r(26),r(51),r(50),r(502),r(382)],void 0===(s=function(t,e,r,n,s,a,o){Object.defineProperty(e,"__esModule",{value:!0}),e.processAttachmentQueryResult=function(t,e){for(var r={},n=0,o=t;n<o.length;n++)for(var i=o[n],u=i.parentObjectId,d=i.parentGlobalId,c=0,p=i.attachmentInfos;c<p.length;c++){var l=p[c],h=l.id,y=s.addProxy(s.addTokenParameter(e+"/"+u+"/attachments/"+h)),f=a.fromJSON(l);f.set({url:y,parentObjectId:u,parentGlobalId:d}),r[u]?r[u].push(f):r[u]=[f]}return r},e.executeAttachmentQuery=function(t,e,s){var a={query:o.mapParameters(r({},t.query,{f:"json"},function(t){var e=t.toJSON();return e.attachmentTypes&&(e.attachmentTypes=e.attachmentTypes.join(",")),e.keywords&&(e.keywords=e.keywords.join(",")),e.globalIds&&(e.globalIds=e.globalIds.join(",")),e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.size&&(e.size=e.size.join(",")),e}(e)))};return s&&(a=r({},s,a)),n(t.path+"/queryAttachments",a)}}.apply(null,n))||(t.exports=s)},439:function(t,e,r){var n,s;n=[r.dj.c(t.i),e,r(22),r(20),r(316),r(26),r(48),r(23),r(395),r(422),r(429),r(440),r(423),r(185),r(158),r(424)],void 0===(s=function(t,e,r,n,s,a,o,i,u,d,c,p,l,h,y,f){return function(t){function e(e){var r=t.call(this,e)||this;return r.gdbVersion=null,r.source=null,r}return r(e,t),e.prototype.execute=function(t,e){return this.executeJSON(t,e).then((function(t){return h.fromJSON(t)}))},e.prototype.executeJSON=function(t,e){return d.executeQuery(this.parsedUrl,this._normalizeQuery(t),a({},this.requestOptions,e)).then((function(t){return t.data}))},e.prototype.executeForCount=function(t,e){return d.executeQueryForCount(this.parsedUrl,this._normalizeQuery(t),a({},this.requestOptions,e)).then((function(t){return t.data.count}))},e.prototype.executeForExtent=function(t,e){return d.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(t),a({},this.requestOptions,e)).then((function(t){return{count:t.data.count,extent:o.Extent.fromJSON(t.data.extent)}}))},e.prototype.executeForIds=function(t,e){return d.executeQueryForIds(this.parsedUrl,this._normalizeQuery(t),a({},this.requestOptions,e)).then((function(t){return t.data.objectIds}))},e.prototype.executeRelationshipQuery=function(t,e){return t=f.from(t),(this.gdbVersion||this.source)&&(t=t.clone().set({gdbVersion:this.gdbVersion||t.gdbVersion,source:this.source||t.source})),p.executeRelationshipQuery(this.parsedUrl,t,a({},this.requestOptions,e)).then((function(t){var e=t.data,r={};return Object.keys(e).forEach((function(t){return r[t]=h.fromJSON(e[t])})),r}))},e.prototype.executeAttachmentQuery=function(t,e){var r=this;return c.executeAttachmentQuery(this.parsedUrl,l.from(t),a({},this.requestOptions,e)).then((function(t){return c.processAttachmentQueryResult(t.data.attachmentGroups,r.parsedUrl.path)}))},e.prototype._normalizeQuery=function(t){var e=y.from(t);return this.gdbVersion||this.source?(e===t?e.clone():e).set({gdbVersion:this.gdbVersion||t.gdbVersion,source:this.source||t.source}):e},n([i.property()],e.prototype,"gdbVersion",void 0),n([i.property()],e.prototype,"source",void 0),n([i.subclass("esri.tasks.QueryTask")],e)}(i.declared(u))}.apply(null,n))||(t.exports=s)},440:function(t,e,r){var n,s;n=[r.dj.c(t.i),e,r(26),r(51),r(382)],void 0===(s=function(t,e,r,n,s){function a(t){var e=t.toJSON();return e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.outFields&&(e.outFields=e.outFields.join(",")),e.outSpatialReference&&(e.outSR=e.outSR.wkid||JSON.stringify(e.outSR.toJSON()),delete e.outSpatialReference),e.source&&(e.layer=JSON.stringify({source:e.source}),delete e.source),e}Object.defineProperty(e,"__esModule",{value:!0}),e.toQueryStringParameters=a,e.executeRelationshipQuery=function(t,e,o){var i={query:s.mapParameters(r({},t.query,{f:"json"},a(e)))};return o&&(i=r({},o,i)),n(t.path+"/queryRelatedRecords",i).then((function(t){for(var e=t.data,r=e.geometryType,n=e.spatialReference,s={},a=0,o=e.relatedRecordGroups;a<o.length;a++){var i=o[a],u={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:n,features:i.relatedRecords};if(null!=i.objectId)s[i.objectId]=u;else for(var d in i)i.hasOwnProperty(d)&&"relatedRecords"!==d&&(s[i[d]]=u)}return t.data=s,t}))}}.apply(null,n))||(t.exports=s)},70:function(t,e,r){var n,s;n=[r.dj.c(t.i),e],void 0===(s=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.lengths=t,this.coords=e};e.default=r}.apply(null,n))||(t.exports=s)}}]);
//# sourceMappingURL=88.758c96b7.chunk.js.map