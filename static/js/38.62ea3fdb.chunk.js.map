{"version":3,"sources":["../node_modules/arcgis-js-api/layers/support/ElevationSampler.js","../node_modules/arcgis-js-api/layers/support/ElevationTile.js","../node_modules/arcgis-js-api/layers/support/ElevationQuery.js"],"names":["define","e","t","n","r","a","i","o","l","s","u","p","c","spatialReference","type","z","elevationAt","f","y","hasM","hasZ","paths","length","x","m","points","v","neverReached","equals","canProject","project","h","error","wkid","Object","defineProperty","value","getLogger","prototype","queryElevation","clone","this","on","g","projectIfRequired","ElevationSamplerBase","d","call","tile","noDataValue","extent","toExtent","getMetersPerUnitForSR","lodAt","level","resolution","demResolution","min","max","get","enumerable","configurable","contains","extentContainsPoint","xmin","ymin","xmax","ymax","warn","sample","TileElevationSampler","R","samplers","map","union","Math","create","MultiTileElevationSampler","updateGeometryElevation","Point","remove","samplerData","pixelData","values","width","height","safeWidth","dx","dy","x0","y1","floor","D","ElevationTile","default","T","lods","findIndex","queryAll","label","ignoreInvisibleLayers","filter","visible","slice","fromGeometry","returnSampleInfo","maximumAutoTileRequests","query","reject","sent","_queryAllContinue","geometry","export","sampleInfo","minDemResolution","w","load","_createGeometryDescriptor","_selectTiles","_populateElevationTiles","_sampleGeometryWithElevation","_createQueryResult","createSampler","_createSampler","createSamplerAll","_createSamplerAllContinue","tileInfo","E","elevationTiles","layer","options","pop","fromExtent","concat","coordinates","forEach","source","push","outSpatialReference","_extractSampleInfo","elevationTile","_preselectOutsideLayerExtent","_selectTilesClosestResolution","_selectTilesFinestContiguous","_selectTilesAuto","outsideExtentTile","fullExtent","_findNearestDemResolutionLODIndex","selectTilesAtLOD","abs","_selectTilesFinestContiguousAt","tilemapCache","getTilesToFetch","trys","all","fetchAvailability","row","col","signal","allElevationTilesFetched","clearElevationTiles","isAbortError","fetchTile","then","id","eachAlways","throwIfAborted","populateElevationTiles","_selectTilesAutoFinest","_reduceTilesForMaximumRequests","result","fetchAvailabilityUpsample","ok","_selectTilesAutoPrefetchUpsample","remapTiles","forEachTileToFetch","upsampleTile","ElevationQuery","_exporter","_cloneCoordinate","isWGS84","xyToLngLat","lngLatToXY","spatiaReference","apply","GeometryDescriptor","_","tileAt","some","candidateTiles","fetchedCandidates","Set","intersection","maskExtents","_maximumLodForRequests","_selectCandidateTilesCoveringExtentAt","size","ceil","clear","add","_uniqueNonOverlappingTiles","has","sort","updateTileInfo","_tileIsMasked","getFinestLodIndex"],"mappings":"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","file":"static/js/38.62ea3fdb.chunk.js","sourcesContent":["// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../core/tsSupport/extendsHelper\",\"../../geometry\",\"../../core/compilerUtils\",\"../../core/Logger\",\"../../core/unitUtils\",\"../../geometry/support/aaBoundingRect\",\"../../geometry/support/contains\",\"../../geometry/support/webMercatorUtils\"],function(e,t,n,r,a,i,o,l,s,u){function p(e,t){var n=c(e,t.spatialReference);if(!n)return null;switch(e.type){case\"point\":f(e,n,t);break;case\"polyline\":m(e,n,t);break;case\"multipoint\":v(e,n,t);break;default:a.neverReached(e)}return e}function c(e,t){var n=e.spatialReference;return n.equals(t)?e:u.canProject(n,t)?u.project(e,t):(h.error(\"Cannot project geometry spatial reference (wkid:\"+n.wkid+\") to elevation sampler spatial reference (wkid:\"+t.wkid+\")\"),null)}function f(e,t,n){e.z=n.elevationAt(t)||0}function m(e,t,n){y.spatialReference=t.spatialReference;for(var r=e.hasM&&!e.hasZ,a=0;a<e.paths.length;a++)for(var i=e.paths[a],o=t.paths[a],l=0;l<i.length;l++){var s=i[l],u=o[l];y.x=u[0],y.y=u[1];var p=n.elevationAt(y)||0;r&&(s[3]=s[2]),s[2]=p}e.hasZ=!0}function v(e,t,n){y.spatialReference=t.spatialReference;for(var r=e.hasM&&!e.hasZ,a=0;a<e.points.length;a++){var i=e.points[a],o=t.points[a];y.x=o[0],y.y=o[1];var l=n.elevationAt(y)||0;r&&(i[3]=i[2]),i[2]=l}e.hasZ=!0}Object.defineProperty(t,\"__esModule\",{value:!0});var h=i.getLogger(\"esri.layers.support.ElevationSampler\"),x=function(){function e(){}return e.prototype.queryElevation=function(e){return p(e.clone(),this)},e.prototype.on=function(){return g},e.prototype.projectIfRequired=function(e,t){return c(e,t)},e}();t.ElevationSamplerBase=x;var d=function(e){function t(t,n,r){var a=e.call(this)||this;a.tile=t,a.noDataValue=r,a.extent=l.toExtent(t.tile.extent,n.spatialReference);var i=o.getMetersPerUnitForSR(n.spatialReference),s=n.lodAt(t.tile.level).resolution*i;return a.demResolution={min:s,max:s},a}return n(t,e),Object.defineProperty(t.prototype,\"spatialReference\",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0}),t.prototype.contains=function(e){var t=this.projectIfRequired(e,this.spatialReference);return s.extentContainsPoint(this.extent,t)},t.prototype.elevationAt=function(e){var t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;if(!this.contains(e)){var n=this.extent,r=n.xmin+\", \"+n.ymin+\", \"+n.xmax+\", \"+n.ymax;h.warn(\"#elevationAt()\",\"Point used to sample elevation (\"+e.x+\", \"+e.y+\") is outside of the sampler extent (\"+r+\")\")}return this.tile.sample(t.x,t.y)},t}(x);t.TileElevationSampler=d;var R=function(e){function t(t,n,r){var a,i=e.call(this)||this;\"number\"==typeof n?(i.noDataValue=n,a=null):(a=n,i.noDataValue=r),i.samplers=a?t.map(function(e){return new d(e,a,i.noDataValue)}):t;var o=i.samplers[0];if(o){i.extent=o.extent.clone();var s=o.demResolution,u=s.min,p=s.max;i.demResolution={min:u,max:p};for(var c=1;c<i.samplers.length;c++){var f=i.samplers[c];i.extent.union(f.extent),i.demResolution.min=Math.min(i.demResolution.min,f.demResolution.min),i.demResolution.max=Math.max(i.demResolution.max,f.demResolution.max)}}else i.extent=l.toExtent(l.create(),a.spatialReference),i.demResolution={min:0,max:0};return i}return n(t,e),Object.defineProperty(t.prototype,\"spatialReference\",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0}),t.prototype.elevationAt=function(e){var t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;for(var n=0,r=this.samplers;n<r.length;n++){var a=r[n];if(a.contains(t))return a.elevationAt(t)}return h.warn(\"#elevationAt()\",\"Point used to sample elevation (\"+e.x+\", \"+e.y+\") is outside of the sampler\"),null},t}(x);t.MultiTileElevationSampler=R,t.updateGeometryElevation=p;var y=new r.Point,g={remove:function(){}}});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\"],function(t,e){function a(t,e,a){var r=t.safeWidth,n=t.width,l=t.pixelData,h=t.noDataValue,o=i(t.dy*(t.y1-a),0,r),u=i(t.dx*(e-t.x0),0,r),d=Math.floor(o),f=Math.floor(u),s=d*n+f,p=s+n,D=l[s],v=l[p],x=l[s+1],c=l[p+1];if(D!==h&&v!==h&&x!==h&&c!==h){var w=o-d,y=u-f,m=D+(x-D)*y;return m+(v+(c-v)*y-m)*w}}function i(t,e,a){return t<e?e:t>a?a:t}Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){if(this.tile=t,!e)return void(this.samplerData=null);var a=this.tile.extent;this.samplerData={pixelData:e.values,width:e.width,height:e.height,safeWidth:.99999999*(e.width-1),noDataValue:e.noDataValue,dx:(e.width-1)/(a[2]-a[0]),dy:(e.width-1)/(a[3]-a[1]),x0:a[0],y1:a[3]}}return t.prototype.sample=function(t,e){if(this.samplerData)return a(this.samplerData,t,e)},t}();e.ElevationTile=r,e.default=r});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../core/tsSupport/assignHelper\",\"../../core/tsSupport/awaiterHelper\",\"../../core/tsSupport/extendsHelper\",\"../../core/tsSupport/generatorHelper\",\"../../core/arrayUtils\",\"../../core/asyncUtils\",\"../../core/Error\",\"../../core/promiseUtils\",\"../../core/unitUtils\",\"../../geometry/Multipoint\",\"../../geometry/Point\",\"../../geometry/Polyline\",\"../../geometry/support/aaBoundingRect\",\"../../geometry/support/webMercatorUtils\",\"./ElevationSampler\",\"./ElevationTile\"],function(e,t,n,i,o,r,l,a,s,u,c,p,f,h,v,d,m,y){function T(e,t){var n=e.lods.length-1;if(t>0){var i=l.findIndex(e.lods,function(e){return e.resolution<t});0===i?n=0:i>0&&(n=i-1)}return n}Object.defineProperty(t,\"__esModule\",{value:!0});var g=function(){function e(){}return e.prototype.queryAll=function(e,t,o){return i(this,void 0,void 0,function(){var i,l,a,c,p;return r(this,function(r){switch(r.label){case 0:return e=o&&o.ignoreInvisibleLayers?e.filter(function(e){return e.visible}):e.slice(),e.length?(i=x.fromGeometry(t),l=!1,o&&o.returnSampleInfo||(l=!0),a=n({noDataValue:0,maximumAutoTileRequests:20},o,{returnSampleInfo:!0,demResolution:\"auto\"}),[4,this.query(e[e.length-1],i,a)]):[2,u.reject(new s(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\"))];case 1:return c=r.sent(),[4,this._queryAllContinue(e,c,a)];case 2:return p=r.sent(),p.geometry=p.geometry.export(),l&&delete p.sampleInfo,[2,p]}})})},e.prototype.query=function(e,t,o){return i(this,void 0,void 0,function(){var i;return r(this,function(r){switch(r.label){case 0:return e?t&&(t instanceof x||\"point\"===t.type||\"multipoint\"===t.type||\"polyline\"===t.type)?(o=n({noDataValue:0,demResolution:\"auto\",minDemResolution:0,maximumAutoTileRequests:20,returnSampleInfo:!1},o),i=new w(e,t.spatialReference,o),[4,e.load(o)]):[2,u.reject(new s(\"elevation-query:invalid-geometry\",\"Only point, polyline and multipoint geometries can be used to query elevation\"))]:[2,u.reject(new s(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\"))];case 1:return r.sent(),this._createGeometryDescriptor(i,t),[4,this._selectTiles(i)];case 2:return r.sent(),[4,this._populateElevationTiles(i)];case 3:return r.sent(),this._sampleGeometryWithElevation(i),[2,this._createQueryResult(i)]}})})},e.prototype.createSampler=function(e,t,o){return i(this,void 0,void 0,function(){return r(this,function(i){return e?t&&\"extent\"===t.type?(o=n({noDataValue:0,demResolution:\"auto\",maximumAutoTileRequests:20,returnSampleInfo:!1},o),[2,this._createSampler(e,t,o)]):[2,u.reject(new s(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\"))]:[2,u.reject(new s(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\"))]})})},e.prototype.createSamplerAll=function(e,t,o){return i(this,void 0,void 0,function(){var i,l;return r(this,function(r){switch(r.label){case 0:return e=o&&o.ignoreInvisibleLayers?e.filter(function(e){return e.visible}):e.slice(),e.length?t&&\"extent\"===t.type?(i=n({noDataValue:0,maximumAutoTileRequests:20},o,{returnSampleInfo:!0,demResolution:\"auto\"}),[4,this._createSampler(e[e.length-1],t,i)]):[2,u.reject(new s(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\"))]:[2,u.reject(new s(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\"))];case 1:return l=r.sent(),[2,this._createSamplerAllContinue(e,t,l,i)]}})})},e.prototype._createSampler=function(e,t,n,o){return i(this,void 0,void 0,function(){var i,l,a;return r(this,function(r){switch(r.label){case 0:return[4,e.load()];case 1:if(r.sent(),i=t.spatialReference,l=e.tileInfo.spatialReference,!i.equals(l)){if(!d.canProject(i,l))return[2,u.reject(new s(\"elevation-query:invalid-extent\",\"Extent spatial reference (\"+i.wkid+\") must be compatible with tile spatial reference (\"+l.wkid+\")\"))];t=d.project(t,l)}return a=new E(e,t,n,o),[4,this._selectTiles(a)];case 2:return r.sent(),[4,this._populateElevationTiles(a)];case 3:return r.sent(),[2,new m.MultiTileElevationSampler(a.elevationTiles,a.layer.tileInfo,a.options.noDataValue)]}})})},e.prototype._createSamplerAllContinue=function(e,t,n,o){return i(this,void 0,void 0,function(){var i,l,a,s;return r(this,function(r){switch(r.label){case 0:return e.pop(),e.length?(i=n.samplers.map(function(e){return v.fromExtent(e.extent)}),[4,this._createSampler(e[e.length-1],t,o,i)]):[2,n];case 1:return l=r.sent(),0===l.samplers.length?[2,n]:(a=n.samplers.concat(l.samplers),s=new m.MultiTileElevationSampler(a,o.noDataValue),[2,this._createSamplerAllContinue(e,t,s,o)])}})})},e.prototype._queryAllContinue=function(e,t,n){return i(this,void 0,void 0,function(){var i,o,l,a,s,u,c;return r(this,function(r){switch(r.label){case 0:if(i=e.pop(),t.geometry.coordinates.forEach(function(e,n){t.sampleInfo[n].demResolution>=0&&!t.sampleInfo[n].source&&(t.sampleInfo[n].source=i)}),!e.length)return[2,t];for(o=t.geometry.coordinates,l=[],a=[],s=0;s<o.length;s++)t.sampleInfo[s].demResolution<0&&(l.push(o[s]),a.push(s));return 0===l.length?[2,t]:(u=t.geometry.clone(l),[4,this.query(e[e.length-1],u,n)]);case 1:return c=r.sent(),a.forEach(function(e,n){o[e].z=c.geometry.coordinates[n].z,t.sampleInfo[e].demResolution=c.sampleInfo[n].demResolution}),[2,this._queryAllContinue(e,t,n)]}})})},e.prototype._createQueryResult=function(e){var t;t=e.outSpatialReference.equals(e.geometry.spatialReference)?e.geometry:e.geometry.project(e.outSpatialReference);var n={geometry:t.export(),noDataValue:e.options.noDataValue};return e.options.returnSampleInfo&&(n.sampleInfo=this._extractSampleInfo(e)),e.geometry.coordinates.forEach(function(e){e.tile=null,e.elevationTile=null}),n},e.prototype._createGeometryDescriptor=function(e,t){var n,i=e.layer.tileInfo.spatialReference;if(!(n=t instanceof x?t.project(i):d.project(t,i)))throw new s(\"elevation-query:spatial-reference-mismatch\",\"Cannot query elevation in '\"+t.spatialReference.wkid+\"' on an elevation service in '\"+i.wkid+\"'\");e.geometry=x.fromGeometry(n)},e.prototype._selectTiles=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return t=e.options.demResolution,(\"geometry\"===e.type&&this._preselectOutsideLayerExtent(e),\"number\"!=typeof t)?[3,1]:(this._selectTilesClosestResolution(e),[3,6]);case 1:return\"finest-contiguous\"!==t?[3,3]:[4,this._selectTilesFinestContiguous(e)];case 2:return n.sent(),[3,6];case 3:return\"auto\"!==t?[3,5]:[4,this._selectTilesAuto(e)];case 4:return n.sent(),[3,6];case 5:throw new s(\"elevation-query:invalid-dem-resolution\",\"Invalid dem resolution value '\"+t+'\\', expected a number, \"finest-contiguous\" or \"auto\"');case 6:return[2]}})})},e.prototype._preselectOutsideLayerExtent=function(e){var t=new y.ElevationTile(null);t.sample=function(){return e.options.noDataValue},e.outsideExtentTile=t;var n=e.layer.fullExtent;e.geometry.coordinates.forEach(function(e){var i=e.x,o=e.y;(i<n.xmin||i>n.xmax||o<n.ymin||o>n.ymax)&&(e.elevationTile=t)})},e.prototype._selectTilesClosestResolution=function(e){var t=e.layer.tileInfo,n=this._findNearestDemResolutionLODIndex(t,e.options.demResolution);e.selectTilesAtLOD(n)},e.prototype._findNearestDemResolutionLODIndex=function(e,t){for(var n=c.getMetersPerUnitForSR(e.spatialReference),i=t/n,o=e.lods[0],r=0,l=1;l<e.lods.length;l++){var a=e.lods[l];Math.abs(a.resolution-i)<Math.abs(o.resolution-i)&&(o=a,r=l)}return r},e.prototype._selectTilesFinestContiguous=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return t=T(e.layer.tileInfo,e.options.minDemResolution),[4,this._selectTilesFinestContiguousAt(e,t)];case 1:return n.sent(),[2]}})})},e.prototype._selectTilesFinestContiguousAt=function(e,t){return i(this,void 0,void 0,function(){var n,i,o,l;return r(this,function(r){switch(r.label){case 0:if(n=e.layer,e.selectTilesAtLOD(t),t<0)return[2];i=n.tilemapCache,o=e.getTilesToFetch(),r.label=1;case 1:return r.trys.push([1,6,,8]),i?[4,u.all(o.map(function(t){return i.fetchAvailability(t.level,t.row,t.col,{signal:e.options.signal})}))]:[3,3];case 2:return r.sent(),[3,5];case 3:return[4,this._populateElevationTiles(e)];case 4:if(r.sent(),!e.allElevationTilesFetched())throw e.clearElevationTiles(),new s(\"elevation-query:has-unavailable-tiles\");r.label=5;case 5:return[3,8];case 6:if(l=r.sent(),u.isAbortError(l))throw l;return[4,this._selectTilesFinestContiguousAt(e,t-1)];case 7:return r.sent(),[3,8];case 8:return[2]}})})},e.prototype._populateElevationTiles=function(e){return i(this,void 0,void 0,function(){var t,n,i;return r(this,function(o){switch(o.label){case 0:return t=e.getTilesToFetch(),n={},i=t.map(function(t){return e.layer.fetchTile(t.level,t.row,t.col,{noDataValue:e.options.noDataValue,signal:e.options.signal}).then(function(e){return n[t.id]=new y.ElevationTile(t,e)})}),[4,u.eachAlways(i)];case 1:return o.sent(),u.throwIfAborted(e.options.signal),e.populateElevationTiles(n),[2]}})})},e.prototype._selectTilesAuto=function(e){return i(this,void 0,void 0,function(){var t,n,o,l,s=this;return r(this,function(c){switch(c.label){case 0:return this._selectTilesAutoFinest(e),(this._reduceTilesForMaximumRequests(e),t=e.layer.tilemapCache)?(n=e.getTilesToFetch(),o={},l=n.map(function(n){return i(s,void 0,void 0,function(){var i,l;return r(this,function(r){switch(r.label){case 0:return i={id:null,level:0,row:0,col:0,extent:v.create()},[4,a.result(t.fetchAvailabilityUpsample(n.level,n.row,n.col,i,{signal:e.options.signal}))];case 1:if(l=r.sent(),!1===l.ok&&u.isAbortError(l.error))throw l.error;return!0===l.ok&&(o[n.id]=i),[2]}})})}),[4,u.all(l)]):[2,this._selectTilesAutoPrefetchUpsample(e)];case 1:return c.sent(),e.remapTiles(o),[2]}})})},e.prototype._reduceTilesForMaximumRequests=function(e){var t=e.layer.tileInfo,n=0,i={},o=function(e){e.id in i?i[e.id]++:(i[e.id]=1,n++)},r=function(e){var t=i[e.id];1===t?(delete i[e.id],n--):i[e.id]=t-1};e.forEachTileToFetch(o,r);for(var l=!0;l&&(l=!1,e.forEachTileToFetch(function(i){n<=e.options.maximumAutoTileRequests||(r(i),t.upsampleTile(i)&&(l=!0),o(i))},r),l););},e.prototype._selectTilesAutoFinest=function(e){var t=T(e.layer.tileInfo,e.options.minDemResolution);e.selectTilesAtLOD(t,e.options.maximumAutoTileRequests)},e.prototype._selectTilesAutoPrefetchUpsample=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return t=e.layer.tileInfo,[4,this._populateElevationTiles(e)];case 1:return i.sent(),n=!1,e.forEachTileToFetch(function(e,i){t.upsampleTile(e)?n=!0:i()}),n?[4,this._selectTilesAutoPrefetchUpsample(e)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype._sampleGeometryWithElevation=function(e){e.geometry.coordinates.forEach(function(t){var n=t.elevationTile,i=e.options.noDataValue;if(n){var o=n.sample(t.x,t.y);void 0!==o?i=o:t.elevationTile=null}t.z=i})},e.prototype._extractSampleInfo=function(e){var t=e.layer.tileInfo,n=c.getMetersPerUnitForSR(t.spatialReference);return e.geometry.coordinates.map(function(i){var o=-1;if(i.elevationTile&&i.elevationTile!==e.outsideExtentTile){o=t.lodAt(i.elevationTile.tile.level).resolution*n}return{demResolution:o}})},e}();t.ElevationQuery=g;var x=function(){function e(){}return e.prototype.export=function(){return this._exporter(this.coordinates,this.spatialReference)},e.prototype.clone=function(t){var n=this,i=new e;return i.geometry=this.geometry,i.spatialReference=this.spatialReference,i.coordinates=t||this.coordinates.map(function(e){return n._cloneCoordinate(e)}),i._exporter=this._exporter,i},e.prototype.project=function(e){var t=this;if(this.spatialReference.equals(e))return this.clone();if(d.canProject(this.spatialReference,e)){var n=e.isWGS84?d.xyToLngLat:d.lngLatToXY,i=[0,0],o=this.coordinates.map(function(e){var o=t._cloneCoordinate(e);return n(o.x,o.y,i),o.x=i[0],o.y=i[1],o}),r=this.clone(o);return r.spatialReference=e,r}return null},e.prototype._cloneCoordinate=function(e){return{x:e.x,y:e.y,z:e.z,m:e.m,tile:null,elevationTile:null}},e.fromGeometry=function(t){var n=new e;if(n.geometry=t,n.spatialReference=t.spatialReference,t instanceof e)n.coordinates=t.coordinates.map(function(e){return n._cloneCoordinate(e)}),n._exporter=function(e,n){var i=t.clone(e);return i.spatialReference=n,i};else switch(t.type){case\"point\":var i=t;t.hasM?n.coordinates=[{x:i.x,y:i.y,m:i.m}]:n.coordinates=[{x:i.x,y:i.y}],n._exporter=function(e,n){return t.hasM?new f(e[0].x,e[0].y,e[0].z,e[0].m,n):new f(e[0].x,e[0].y,e[0].z,n)};break;case\"multipoint\":var o=t;n.coordinates=o.points.map(function(e){if(t.hasM){var n=t.hasZ?3:2;return{x:e[0],y:e[1],m:e[n]}}return{x:e[0],y:e[1]}}),n._exporter=function(e,n){return t.hasM?new p({points:e.map(function(e){return[e.x,e.y,e.z,e.m]}),hasZ:!0,hasM:!0,spatiaReference:n}):new p(e.map(function(e){return[e.x,e.y,e.z]}),n)};break;case\"polyline\":var r=t,l=[],a=[],s=0;r.paths.forEach(function(e){a.push([s,s+e.length]),s+=e.length,l.push.apply(l,e.map(function(e){if(t.hasM){var n=t.hasZ?3:2;return{x:e[0],y:e[1],m:e[n]}}return{x:e[0],y:e[1]}}))}),n.coordinates=l,n._exporter=function(e,n){var i=t.hasM?e.map(function(e){return[e.x,e.y,e.z,e.m]}):e.map(function(e){return[e.x,e.y,e.z]}),o=a.map(function(e){return i.slice(e[0],e[1])});return new h({paths:o,hasM:t.hasM,hasZ:!0,spatialReference:n})}}return n},e}();t.GeometryDescriptor=x;var _=function(){function e(e,t){this.layer=e,this.options=t}return e}(),w=function(e){function t(t,n,i){var o=e.call(this,t,i)||this;return o.type=\"geometry\",o.outSpatialReference=n,o}return o(t,e),t.prototype.selectTilesAtLOD=function(e){if(e<0)this.geometry.coordinates.forEach(function(e){return e.tile=null});else{var t=this.layer.tileInfo,n=t.lods[e].level;this.geometry.coordinates.forEach(function(e){e.tile=t.tileAt(n,e.x,e.y)})}},t.prototype.allElevationTilesFetched=function(){return!this.geometry.coordinates.some(function(e){return!e.elevationTile})},t.prototype.clearElevationTiles=function(){for(var e=0,t=this.geometry.coordinates;e<t.length;e++){var n=t[e];n.elevationTile!==this.outsideExtentTile&&(n.elevationTile=null)}},t.prototype.populateElevationTiles=function(e){for(var t=0,n=this.geometry.coordinates;t<n.length;t++){var i=n[t];!i.elevationTile&&i.tile&&(i.elevationTile=e[i.tile.id])}},t.prototype.remapTiles=function(e){for(var t=0,n=this.geometry.coordinates;t<n.length;t++){var i=n[t];i.tile=e[i.tile.id]}},t.prototype.getTilesToFetch=function(){for(var e={},t=[],n=0,i=this.geometry.coordinates;n<i.length;n++){var o=i[n],r=o.tile;o.elevationTile||!o.tile||e[r.id]||(e[r.id]=r,t.push(r))}return t},t.prototype.forEachTileToFetch=function(e){for(var t=0,n=this.geometry.coordinates;t<n.length;t++){var i=n[t];!function(t){t.tile&&!t.elevationTile&&e(t.tile,function(){return t.tile=null})}(i)}},t}(_),E=function(e){function t(t,n,i,o){var r=e.call(this,t,i)||this;return r.type=\"extent\",r.elevationTiles=[],r.candidateTiles=[],r.fetchedCandidates=new Set,r.extent=n.intersection(t.fullExtent),r.maskExtents=o,r}return o(t,e),t.prototype.selectTilesAtLOD=function(e,t){var n=this._maximumLodForRequests(t),i=Math.min(n,e);i<0?this.candidateTiles.length=0:this._selectCandidateTilesCoveringExtentAt(i)},t.prototype._maximumLodForRequests=function(e){var t=this.layer.tileInfo;if(!e)return t.lods.length-1;for(var n=this.extent,i=t.lods.length-1;i>=0;i--){var o=t.lods[i],r=o.resolution*t.size[0],l=o.resolution*t.size[1];if(Math.ceil(n.width/r)*Math.ceil(n.height/l)<=e)return i}return-1},t.prototype.allElevationTilesFetched=function(){return this.candidateTiles.length===this.elevationTiles.length},t.prototype.clearElevationTiles=function(){this.elevationTiles.length=0,this.fetchedCandidates.clear()},t.prototype.populateElevationTiles=function(e){for(var t=0,n=this.candidateTiles;t<n.length;t++){var i=n[t],o=e[i.id];o&&(this.fetchedCandidates.add(i),this.elevationTiles.push(o))}},t.prototype.remapTiles=function(e){this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles.map(function(t){return e[t.id]}))},t.prototype.getTilesToFetch=function(){return this.candidateTiles},t.prototype.forEachTileToFetch=function(e,t){var n=this,i=this.candidateTiles;this.candidateTiles=[],i.forEach(function(i){if(n.fetchedCandidates.has(i))return void(t&&t(i));var o=!1;e(i,function(){return o=!0}),o?t&&t(i):n.candidateTiles.push(i)}),this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles,t)},t.prototype._uniqueNonOverlappingTiles=function(e,t){for(var n={},i=[],o=0,r=e;o<r.length;o++){var l=r[o];n[l.id]?t&&t(l):(n[l.id]=l,i.push(l))}var a=i.sort(function(e,t){return e.level-t.level});return a.filter(function(e,n){for(var i=0;i<n;i++)if(v.contains(a[i].extent,e.extent))return t&&t(e),!1;return!0})},t.prototype._selectCandidateTilesCoveringExtentAt=function(e){this.candidateTiles.length=0;for(var t=this.layer.tileInfo,n=t.lods[e],i=this.extent,o=t.tileAt(n.level,i.xmin,i.ymin),r=n.resolution*t.size[0],l=n.resolution*t.size[1],a=Math.ceil((i.xmax-o.extent[0])/r),s=Math.ceil((i.ymax-o.extent[1])/l),u=0;u<s;u++)for(var c=0;c<a;c++){var p={id:null,level:o.level,row:o.row-u,col:o.col+c};t.updateTileInfo(p),this._tileIsMasked(p)||this.candidateTiles.push(p)}},t.prototype._tileIsMasked=function(e){return!!this.maskExtents&&this.maskExtents.some(function(t){return v.contains(t,e.extent)})},t}(_);t.getFinestLodIndex=T,t.default=g});"],"sourceRoot":""}