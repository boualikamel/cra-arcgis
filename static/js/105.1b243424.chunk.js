(function(){(this||window).webpackJsonpareactgis.registerAbsMids({"esri/layers/graphics/featureConversionUtils":79,"esri/layers/graphics/data/QueryEngineCapabilities":491,"esri/layers/graphics/sources/support/MemorySourceWorker":1149,"esri/layers/graphics/sources/support/sourceUtils":2367})})(),(this.webpackJsonpareactgis=this.webpackJsonpareactgis||[]).push([[105],{1149:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(31),r(32),r(26),r(27),r(28),r(40),r(81),r(79),r(480),r(292),r(430),r(730),r(2367),r(194),r(360),r(115)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,d,c,f,h,p,g,y,m){function v(e){return a.isPoint(e)?null!=e.z:!!e.hasZ}function b(e){return a.isPoint(e)?null!=e.m:!!e.hasM}Object.defineProperty(t,"__esModule",{value:!0});var F=u.WGS84,I={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:u.WGS84},T={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},E=function(){function e(){this._queryEngine=null,this._nextObjectId=null}return e.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null},e.prototype.load=function(e){return n(this,void 0,void 0,(function(){var t,n,s,a,u,l,p,v,b,E,_,w,x,M,j,R,P,G,S,N,q,O,z,Z,D;return r(this,(function(r){switch(r.label){case 0:if(t=[],n=e.features,s=this._inferLayerProperties(n,e.fields),a=e.fields||[],u=null!=e.hasM?e.hasM:s.hasM,l=null!=e.hasZ?e.hasZ:s.hasZ,p=!e.spatialReference&&!s.spatialReference,v=p?F:e.spatialReference||s.spatialReference,b=p?I:null,E=e.geometryType||s.geometryType,_=e.objectIdField||s.objectIdField,w=e.timeInfo,p&&t.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!E)throw new o("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!_)throw new o("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");for(s.objectIdField&&_!==s.objectIdField&&(t.push({name:"feature-layer:duplicated-oid-field",message:'Provided objectIdField "'+_+'" doesn\'t match the field name "'+s.objectIdField+'", found in the provided fields'}),_=s.objectIdField),_&&!s.objectIdField&&(x=null,a.some((function(e){return e.name===_&&(x=e,!0)}))?(x.type="esriFieldTypeOID",x.editable=!1,x.nullable=!1):a.unshift({alias:_,name:_,type:"esriFieldTypeOID",editable:!1,nullable:!1})),M=0,j=a;M<j.length;M++){if(null==(S=j[M]).name&&(S.name=S.alias),null==S.alias&&(S.alias=S.name),!S.name)throw new o("feature-layer:invalid-field-name","field name is missing",{field:S});if(S.name===_&&(S.type="esriFieldTypeOID"),-1===y.kebabDict.jsonValues.indexOf(S.type))throw new o("feature-layer:invalid-field-type",'invalid type for field "'+S.name+'"',{field:S})}for(R={},this._requiredFields=[],P=0,G=a;P<G.length;P++)"esriFieldTypeOID"!==(S=G[P]).type&&"esriFieldTypeGlobalID"!==S.type&&(S.editable=null==S.editable||!!S.editable,S.nullable=null==S.nullable||!!S.nullable,N=m.getFieldDefaultValue(S),S.nullable||void 0!==N?R[S.name]=N:this._requiredFields.push(S));return this._fieldsIndex=new g(a),this._createDefaultAttributes=h.createDefaultAttributesFunction(R,_),w&&(w.startTimeField&&((q=this._fieldsIndex.get(w.startTimeField))?(w.startTimeField=q.name,q.type="esriFieldTypeDate"):w.startTimeField=null),w.endTimeField&&((O=this._fieldsIndex.get(w.endTimeField))?(w.endTimeField=O.name,O.type="esriFieldTypeDate"):w.endTimeField=null),w.trackIdField&&((z=this._fieldsIndex.get(w.trackIdField))?w.trackIdField=z.name:(w.trackIdField=null,t.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:w}}))),w.startTimeField||w.endTimeField||(t.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:w}}),w=null)),Z={warnings:t,featureErrors:[],layerDefinition:i({},T,{drawingInfo:h.createDrawingInfo(E),templates:h.createDefaultTemplate(R),extent:b,geometryType:E,objectIdField:_,fields:a,hasZ:!!l,hasM:!!u,timeInfo:w}),assignedObjectIds:{}},this._queryEngine=new f.default({fields:a,geometryType:E,hasM:u,hasZ:l,objectIdField:_,spatialReference:v,featureStore:new d.default({geometryType:E,hasM:u,hasZ:l}),timeInfo:w}),n&&n.length?(D=n.reduce((function(e,t){var r=t.attributes&&t.attributes[_];return null==r||isNaN(r)||!isFinite(r)?e:Math.max(e,r)}),0),this._nextObjectId=1+D,[4,c.checkProjectionSupport(n,v)]):(this._nextObjectId=1,[2,Z]);case 1:return r.sent(),[2,this._loadInitialFeatures(Z,n)]}}))}))},e.prototype.applyEdits=function(e){return n(this,void 0,void 0,(function(){var t,n,i;return r(this,(function(r){switch(r.label){case 0:return t=this._queryEngine,n=t.spatialReference,i=t.geometryType,[4,s.all([p.loadGeometryEngineForSimplify(i),c.checkProjectionSupport(e.adds,n),c.checkProjectionSupport(e.updates,n)])];case 1:return r.sent(),[2,this._applyEdits(e)]}}))}))},e.prototype.queryFeatures=function(e,t){return void 0===t&&(t={}),n(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQuery(e,t.signal)]}))}))},e.prototype.queryFeatureCount=function(e,t){return void 0===t&&(t={}),n(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForCount(e,t.signal)]}))}))},e.prototype.queryObjectIds=function(e,t){return void 0===t&&(t={}),n(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForIds(e,t.signal)]}))}))},e.prototype.queryExtent=function(e,t){return void 0===t&&(t={}),n(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForExtent(e,t.signal)]}))}))},e.prototype._inferLayerProperties=function(e,t){for(var r=void 0,n=void 0,i=null,o=null,s=null,u=0,l=e;u<l.length;u++){var d=l[u].geometry;if(d&&(i||(i=a.getJsonType(d)),o||(o=d.spatialReference),null==r&&(r=v(d)),null==n&&(n=b(d)),i&&o&&null!=r&&null!=n))break}if(t&&t.length){var c=null;t.some((function(e){var t="esriFieldTypeOID"===e.type,r=!e.type&&e.name&&"objectid"===e.name.toLowerCase();return c=e,t||r}))&&(s=c.name)}return{geometryType:i,spatialReference:o,objectIdField:s,hasM:n,hasZ:r}},e.prototype._loadInitialFeatures=function(e,t){for(var r=this._queryEngine,n=r.geometryType,i=r.hasM,o=r.hasZ,s=r.objectIdField,u=r.spatialReference,d=r.featureStore,f=[],h=0,g=t;h<g.length;h++){var y=g[h];if(null!=y.uid&&(e.assignedObjectIds[y.uid]=-1),y.geometry&&n!==a.getJsonType(y.geometry))e.featureErrors.push(p.createFeatureEditErrorResult("Incorrect geometry type."));else{var m=this._createDefaultAttributes(),v=p.mixAttributes(this._fieldsIndex,this._requiredFields,m,y.attributes,!0,e.warnings);v?e.featureErrors.push(v):(this._assignObjectId(m,y.attributes,!0),y.attributes=m,null!=y.uid&&(e.assignedObjectIds[y.uid]=y.attributes[s]),y.geometry&&(y.geometry=c.project(y.geometry,y.geometry.spatialReference,u)),f.push(y))}}if(d.addMany(l.convertFromFeatures([],f,n,o,i,s)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){var b=this._queryEngine.timeExtent,F=b.start,I=b.end;e.layerDefinition.timeInfo.timeExtent=[F,I]}return e},e.prototype._applyEdits=function(e){var t=e.adds,r=e.updates,n=e.deletes,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(i,t),r&&r.length&&this._applyUpdateEdits(i,r),n&&n.length){for(var o=0,s=n;o<s.length;o++){var a=s[o];i.deleteResults.push(p.createFeatureEditSuccessResult(a))}this._queryEngine.featureStore.removeManyById(n)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:i}},e.prototype._applyAddEdits=function(e,t){for(var r=e.addResults,n=this._queryEngine,i=n.geometryType,o=n.hasM,s=n.hasZ,u=n.objectIdField,d=n.spatialReference,f=n.featureStore,h=[],g=0,y=t;g<y.length;g++){var m=y[g];if(m.geometry&&i!==a.getJsonType(m.geometry))r.push(p.createFeatureEditErrorResult("Incorrect geometry type."));else{var v=this._createDefaultAttributes(),b=p.mixAttributes(this._fieldsIndex,this._requiredFields,v,m.attributes);if(b)r.push(b);else{if(this._assignObjectId(v,m.attributes),m.attributes=v,null!=m.uid){var F=m.attributes[u];e.uidToObjectId[m.uid]=F}m.geometry&&(m.geometry=c.project(p.simplify(m.geometry,d),m.geometry.spatialReference,d)),h.push(m),r.push(p.createFeatureEditSuccessResult(m.attributes[u]))}}}f.addMany(l.convertFromFeatures([],h,i,s,o,u))},e.prototype._applyUpdateEdits=function(e,t){for(var r=e.updateResults,n=this._queryEngine,i=n.geometryType,o=n.hasM,s=n.hasZ,u=n.objectIdField,d=n.spatialReference,f=n.featureStore,h=0,g=t;h<g.length;h++){var y=g[h],m=y.attributes,v=y.geometry,b=m&&m[u];if(null!=b)if(f.has(b)){var F=l.convertToFeature(f.getFeature(b),i,s,o);if(v){if(i!==a.getJsonType(v)){r.push(p.createFeatureEditErrorResult("Incorrect geometry type."));continue}F.geometry=c.project(p.simplify(v,d),v.spatialReference,d)}if(m){var I=p.mixAttributes(this._fieldsIndex,this._requiredFields,F.attributes,m);if(I){r.push(I);continue}}f.add(l.convertFromFeature(F,i,s,o,u)),r.push(p.createFeatureEditSuccessResult(b))}else r.push(p.createFeatureEditErrorResult("Feature with object id "+b+" missing"));else r.push(p.createFeatureEditErrorResult("Identifier field "+u+" missing"))}},e.prototype._assignObjectId=function(e,t,r){void 0===r&&(r=!1);var n=this._queryEngine.objectIdField;r&&t&&isFinite(t[n])?e[n]=t[n]:e[n]=this._nextObjectId++},e}();t.default=E}.apply(null,n))||(e.exports=i)},2367:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(31),r(32),r(115),r(285)],void 0===(i=function(e,t,n,i,o){function s(e){return new d(e)}function a(e,t){var r=t;return"string"==typeof t&&o.isNumericField(e)?r=parseFloat(t):null!=t&&o.isStringField(e)&&"string"!=typeof t&&(r=String(t)),o.sanitizeNullFieldValue(r)}function u(){return i(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return f?[2,f]:[4,new Promise((function(e,t){r.e(10).then(function(){var t=[r(397)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return[2,f=e.sent()]}}))}))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){this.code=null,this.description=null},d=function(e){this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e};t.createFeatureEditErrorResult=s;var c=function(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e};t.createFeatureEditSuccessResult=function(e){return new c(e)};var f,h=new Set;t.mixAttributes=function(e,t,r,n,i,u){for(var l in void 0===i&&(i=!1),h.clear(),n){var d=e.get(l);if(d){var c=n[l],f=a(d,c);if(f!==c&&u&&u.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:d,originalValue:c,sanitizedValue:f}}),h.add(d.name),d&&(i||d.editable)){var p=o.validateFieldValue(d,f);if(p)return s(o.validationErrorToString(p,d,f));r[d.name]=f}}}for(var g=0,y=t;g<y.length;g++){var m=y[g];if(!h.has(m.name))return s('missing required field "'+m.name+'"')}return null},t.simplify=function(e,t){if(!e)return e;if("rings"in e||"paths"in e){if(!f)throw new TypeError("geometry engine not loaded");e.spatialReference||(e.spatialReference=t);var r=f.simplify(e);return r?r.toJSON():null}return e},t.loadGeometryEngine=u,t.loadGeometryEngineForSimplify=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e?[3,2]:[4,u()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}}.apply(null,n))||(e.exports=i)},491:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}.apply(null,n))||(e.exports=i)},79:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(27),r(24),r(40),r(107),r(156),r(70)],void 0===(i=function(e,t,r,n,i,o,s,a){function u(e,t){return e?t?4:3:t?3:2}function l(e,t,r,n){if(e){if(r)return t&&n?J:V;if(t&&n)return Y}else if(t&&n)return V;return Q}function d(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function c(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function f(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function h(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function p(e){var t=e.coords;return{x:t[0],y:t[1]}}function g(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function y(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function m(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function v(e){var t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function b(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function F(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function I(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function T(e,t){return e&&t?I:e?m:t?b:g}function E(e,t,r,n,i){for(var s=T(r,n),u=0,l=t;u<l.length;u++){var d=l[u],c=d.geometry,f=d.attributes,h=void 0;c&&(h=s(new a.default,c)),e.push(new o.default(h,f,null,f[i]))}return e}function _(e,t,r){if(!e)return null;for(var n=u(t,r),i=[],o=0;o<e.coords.length;o+=n){for(var s=[],a=0;a<n;a++)s.push(e.coords[o+a]);i.push(s)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function w(e,t,r,n,i){for(var s=u(r,n),l=0,d=t;l<d.length;l++){var c=d[l],f=c.geometry,h=c.attributes,p=void 0;f&&(p=x(new a.default,f,s)),e.push(new o.default(p,h,null,h[i]))}return e}function x(e,t,r){void 0===r&&(r=u(t.hasZ,t.hasM)),e.lengths[0]=t.points.length;for(var n=e.coords,i=0,o=0,s=t.points;o<s.length;o++)for(var a=s[o],l=0;l<r;l++)n[i++]=a[l];return e}function M(e,t,r){if(!e)return null;for(var n=u(t,r),i=e.coords,o=[],s=0,a=0,l=e.lengths;a<l.length;a++){for(var d=l[a],c=[],f=0;f<d;f++){for(var h=[],p=0;p<n;p++)h.push(i[s++]);c.push(h)}o.push(c)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function j(e,t,r,n,i){for(var s=u(r,n),l=0,d=t;l<d.length;l++){var c=d[l],f=c.geometry,h=c.attributes,p=void 0;f&&(p=R(new a.default,f,s)),e.push(new o.default(p,h,null,h[i]))}return e}function R(e,t,r){void 0===r&&(r=u(t.hasZ,t.hasM));for(var n=e.lengths,i=e.coords,o=0,s=0,a=t.paths;s<a.length;s++){for(var l=a[s],d=0,c=l;d<c.length;d++)for(var f=c[d],h=0;h<r;h++)i[o++]=f[h];n.push(l.length)}return e}function P(e,t,r){if(!e)return null;for(var n=u(t,r),i=e.coords,o=[],s=0,a=0,l=e.lengths;a<l.length;a++){for(var d=l[a],c=[],f=0;f<d;f++){for(var h=[],p=0;p<n;p++)h.push(i[s++]);c.push(h)}o.push(c)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function G(e,t,r,n,i){for(var s=0,u=t;s<u.length;s++){var l=u[s],d=l.geometry,c=l.centroid,f=l.attributes,h=void 0;d&&(h=S(new a.default,d,r,n)),c?e.push(new o.default(h,f,g(new a.default,c),f[i])):e.push(new o.default(h,f,null,f[i]))}return e}function S(e,t,r,n){return void 0===r&&(r=t.hasZ),void 0===n&&(n=t.hasM),N(e,t.rings,r,n),e}function N(e,t,r,n){var i=u(r,n),o=e.lengths,s=e.coords,a=0;o.length=s.length=0;for(var l=0,d=t;l<d.length;l++){for(var c=d[l],f=0,h=c;f<h.length;f++)for(var p=h[f],g=0;g<i;g++)s[a++]=p[g];o.push(c.length)}return e}function q(e,t,n,i,s,a){if(e.length=0,!n){for(var u=0,l=t;u<l.length;u++){var d=l[u],c=d.attributes[a];e.push(new o.default(null,d.attributes,null,c))}return e}switch(n){case"esriGeometryPoint":return E(e,t,i,s,a);case"esriGeometryMultipoint":return w(e,t,i,s,a);case"esriGeometryPolyline":return j(e,t,i,s,a);case"esriGeometryPolygon":return G(e,t,i,s,a);default:A.error("convertToFeatureSet:unknown-geometry",new r("Unable to parse unknown geometry type '"+n+"'")),e.length=0}return e}function O(e,t,n,i,o){switch(e.length=0,n){case"esriGeometryPoint":return function(e,t,r,n){var i=p;r&&n?i=F:r?i=y:n&&(i=v);for(var o=0,s=t;o<s.length;o++){var a=s[o],u=a.geometry,l=a.attributes,d=u?i(u):null;e.push({attributes:l,geometry:d})}return e}(e,t,i,o);case"esriGeometryMultipoint":return function(e,t,r,n){for(var i=0,o=t;i<o.length;i++){var s=o[i],a=s.geometry,u=s.attributes,l=void 0;a&&(l=_(a,r,n)),e.push({attributes:u,geometry:l})}return e}(e,t,i,o);case"esriGeometryPolyline":return function(e,t,r,n){for(var i=0,o=t;i<o.length;i++){var s=o[i],a=s.geometry,u=s.attributes,l=void 0;a&&(l=M(a,r,n)),e.push({attributes:u,geometry:l})}return e}(e,t,i,o);case"esriGeometryPolygon":return function(e,t,r,n){for(var i=0,o=t;i<o.length;i++){var s=o[i],a=s.geometry,u=s.attributes,l=s.centroid,d=void 0;if(a&&(d=P(a,r,n)),l){var c=p(l);e.push({attributes:u,centroid:c,geometry:d})}else e.push({attributes:u,geometry:d})}return e}(e,t,i,o);default:A.error("convertToFeatureSet:unknown-geometry",new r("Unable to parse unknown geometry type '"+n+"'"))}return e}function z(e,t,r,n,i,o,s,a){if(void 0===s&&(s=r),void 0===a&&(a=n),e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var f=C[i],h=t.coords,p=t.lengths,g=u(r,n),y=u(r&&s,n&&a),m=l(r,n,s,a);if(!p.length)return m(e.coords,h,0,0,d(o,h[0]),c(o,h[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=g,e;for(var v,b,F,I,T=0,E=0,_=E,w=0,x=p;w<x.length;w++){var M=x[w];if(!(M<f)){var j=0;E=_,F=v=d(o,h[T]),I=b=c(o,h[T+1]),m(e.coords,h,E,T,F,I),j++,T+=g,E+=y;for(var R=1;R<M;R++,T+=g)F=d(o,h[T]),I=c(o,h[T+1]),F===v&&I===b||(m(e.coords,h,E,T,F-v,I-b),E+=y,j++,v=F,b=I);j>=f&&(e.lengths.push(j),_=E)}}return e.coords.length=_,e.coords.length?e:null}function Z(e,t,r,n){var i=e[t],o=e[t+1],s=e[r],a=e[r+1],u=e[n],l=e[n+1],d=s,c=a,f=u-d,h=l-c;if(0!==f||0!==h){var p=((i-d)*f+(o-c)*h)/(f*f+h*h);p>1?(d=u,c=l):p>0&&(d+=f*p,c+=h*p)}return(f=i-d)*f+(h=o-c)*h}function D(e,t,r,n,i,o,s){for(var a,u=n,l=0,d=o+r;d<s;d+=r)(a=Z(t,d,o,s))>u&&(l=d,u=a);u>n&&(l-o>r&&D(e,t,r,n,i,o,l),i(e,t,e.length,l,t[l],t[l+1]),s-l>r&&D(e,t,r,n,i,l,s))}function k(e,t,r,n,i){var o=t.coords,s=t.lengths,a=r?n?J:V:n?V:Q,l=u(r,n);if(!o.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!s.length)return a(e.coords,o,0,0,f(i,o[0]),h(i,o[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;for(var d=i.scale,c=d[0],p=d[1],g=0,y=0;y<s.length;y++){var m=s[y];e.lengths[y]=m;var v=f(i,o[g]),b=h(i,o[g+1]);a(e.coords,o,g,g,v,b),g+=l;for(var F=1;F<m;F++,g+=l)v+=o[g]*c,b-=o[g+1]*p,a(e.coords,o,g,g,v,b)}return e!==t&&(e.lengths.length=s.length,e.coords.length=o.length),e}Object.defineProperty(t,"__esModule",{value:!0});var A=n.getLogger("esri.tasks.support.optimizedFeatureSet"),C={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Q=function(e,t,r,n,i,o){e[r]=i,e[r+1]=o},V=function(e,t,r,n,i,o){e[r]=i,e[r+1]=o,e[r+2]=t[n+2]},Y=function(e,t,r,n,i,o){e[r]=i,e[r+1]=o,e[r+2]=t[n+3]},J=function(e,t,r,n,i,o){e[r]=i,e[r+1]=o,e[r+2]=t[n+2],e[r+3]=t[n+3]};t.quantizeX=d,t.quantizeY=c,t.hydrateX=f,t.hydrateY=h,t.convertToPoint=function(e,t,r){return e?t?r?F(e):y(e):r?v(e):p(e):null},t.convertFromPoint=function(e,t,r){return void 0===r&&(r=T(null!=t.z,null!=t.m)),r(e,t)},t.convertToMultipoint=_,t.convertFromMultipoint=x,t.convertToPolyline=M,t.convertFromPolyline=R,t.convertToPolygon=P,t.convertFromPolygon=S,t.convertFromNestedArray=N;var L=[],U=[];t.convertFromFeature=function(e,t,r,n,i){L[0]=e;var o=q(U,L,t,r,n,i)[0];return L.length=U.length=0,o},t.convertFromFeatures=q,t.convertToFeature=function(e,t,r,n){U[0]=e,O(L,U,t,r,n);var i=L[0];return L.length=U.length=0,i},t.convertFromGeometry=function(e,t,n){if(!e)return null;var o=new a.default;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),i.isPoint(e)?T(null!=t?t:null!=e.z,null!=n?n:null!=e.m)(o,e):i.isPolygon(e)?S(o,e,t,n):i.isPolyline(e)?R(o,e,u(t,n)):i.isMultipoint(e)?x(o,e,u(t,n)):void A.error("convertFromGeometry:unknown-geometry",new r("Unable to parse unknown geometry type '"+e+"'"))},t.convertToGeometry=function(e,t,n,i){var o=e&&("coords"in e?e:e.geometry);if(!o)return null;switch(t){case"esriGeometryPoint":var s=p;return n&&i?s=F:n?s=y:i&&(s=v),s(o);case"esriGeometryMultipoint":return _(o,n,i);case"esriGeometryPolyline":return M(o,n,i);case"esriGeometryPolygon":return P(o,n,i);default:return void A.error("convertToGeometry:unknown-geometry",new r("Unable to parse unknown geometry type '"+t+"'"))}},t.convertToFeatures=O,t.convertToFeatureSet=function(e){var t=e.objectIdFieldName,r=e.spatialReference,n=e.transform,i=e.fields,o=e.hasM,s=e.hasZ,a=e.features,u=e.geometryType,l=e.exceededTransferLimit,d={features:O([],a,u,s,o),fields:i,geometryType:u,objectIdFieldName:t,spatialReference:r};return n&&(d.transform=n),l&&(d.exceededTransferLimit=l),o&&(d.hasM=o),s&&(d.hasZ=s),d},t.convertFromFeatureSet=function(e,t){var n=new s.default,i=e.hasM,o=e.hasZ,a=e.features,u=e.objectIdFieldName,l=e.spatialReference,d=e.geometryType,c=e.exceededTransferLimit,f=e.transform;return n.fields=e.fields,n.geometryType=d,n.objectIdFieldName=u||t,n.spatialReference=l,n.objectIdFieldName?(a&&q(n.features,a,d,o,i,n.objectIdFieldName),c&&(n.exceededTransferLimit=c),i&&(n.hasM=i),o&&(n.hasZ=o),f&&(n.transform=f),n):(A.error(new r("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)},t.hydrateOptimizedFeatureSet=function(e){var t=e.transform,r=e.features,n=e.hasM,i=e.hasZ;if(!t)return e;for(var o=0,s=r;o<s.length;o++){var a=s[o];a.geometry&&k(a.geometry,a.geometry,n,i,t),a.centroid&&k(a.centroid,a.centroid,n,i,t)}return e.transform=null,e},t.quantizeOptimizedFeatureSet=function(e,t){var r=t.geometryType,n=t.features,i=t.hasM,s=t.hasZ;if(!e)return t;for(var u=0;u<n.length;u++){var l=n[u],d=new o.default(new a.default,l.attributes);z(d.geometry,l.geometry,i,s,r,e),l.centroid&&(d.centroid=new a.default,z(d.centroid,l.centroid,i,s,"esriGeometryPoint",e)),n[u]=d}return t.transform=e,t},t.quantizeOptimizedGeometry=z,t.generalizeOptimizedGeometry=function(e,t,r,n,i,o,s,a){if(void 0===s&&(s=r),void 0===a&&(a=n),e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var d=C[i],c=t.coords,f=t.lengths,h=u(r,n),p=u(r&&s,n&&a),g=l(r,n,s,a);if(!f.length)return g(e.coords,c,0,0,c[0],c[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=h,e;for(var y=0,m=o*o,v=0,b=f;v<b.length;v++){var F=b[v];if(F<d)y+=F*h;else{var I=e.coords.length/p,T=y,E=y+(F-1)*h;g(e.coords,c,e.coords.length,T,c[T],c[T+1]),D(e.coords,c,h,m,g,T,E),g(e.coords,c,e.coords.length,E,c[E],c[E+1]);var _=e.coords.length/p-I;_>=d?e.lengths.push(_):e.coords.length=I*p,y+=F*h}}return e.coords.length?e:null},t.getBoundsOptimizedGeometry=function(e,t,r,n){var i=u(r,n),o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords)for(var d=t.coords,c=0;c<d.length;c+=i){var f=d[c],h=d[c+1];o=Math.min(o,f),a=Math.max(a,f),s=Math.min(s,h),l=Math.max(l,h)}return e[0]=o,e[1]=s,e[2]=a,e[3]=l,e},t.getQuantizedBoundsOptimizedGeometry=function(e,t,r,n){for(var i=u(r,n),o=t.lengths,s=t.coords,a=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,f=0,h=0,p=o;h<p.length;h++){var g=p[h],y=s[f],m=s[f+1];a=Math.min(y,a),l=Math.min(m,l),d=Math.max(y,d),c=Math.max(m,c),f+=i;for(var v=1;v<g;v++,f+=i){var b=s[f],F=s[f+1];y+=b,m+=F,b<0&&(a=Math.min(a,y)),b>0&&(d=Math.max(d,y)),F<0?l=Math.min(l,m):F>0&&(c=Math.max(c,m))}}return e[0]=a,e[1]=l,e[2]=d,e[3]=c,e},t.hydrateOptimizedGeometry=k,t.removeZMValues=function(e,t,r,n,i,o){var s,a=u(r,n),d=l(r,n,i,o),c=t.coords;e.coords.length=0,e.lengths.length=0,(s=e.lengths).push.apply(s,t.lengths);for(var f=0;f<c.length;f+=a)d(e.coords,c,e.coords.length,f,c[f],c[f+1]);return e},t.removeCollinearVectices=function(e,t,r,n,i){if(!t||!t.coords||!t.coords.length)return null;for(var o=C[r],s=t.coords,a=t.lengths,d=l(n,i,n,i),c=u(n,i),f=0,h=0,p=0,g=0,y=0,m=a;y<m.length;y++){var v=m[y];h=g,d(e.coords,s,h,f,s[f],s[f+1]);var b=s[f+=c],F=s[f+1],I=b,T=F,E=F/b;h+=c,d(e.coords,s,h,f,I,T),f+=c;for(var _=2;_<v;_++){b=s[f];var w=(F=s[f+1])/b,x=E===w||!isFinite(E)&&!isFinite(w),M=x&&isFinite(w)?E>=0&&w>=0||E<=0&&w<=0:T>=0&&F>=0||T<=0&&F<=0;x&&M?(I+=b,T+=F):(I=b,T=F,h+=c),d(e.coords,s,h,f,I,T),f+=c,E=w}var j=((h+=c)-g)/c;j>=o&&(e.lengths[p]=j,g=h,p++)}return e.coords.length>h&&(e.coords.length=h),e.lengths.length>p&&(e.lengths.length=p),e.coords.length?e:null}}.apply(null,n))||(e.exports=i)}}]);
//# sourceMappingURL=105.1b243424.chunk.js.map