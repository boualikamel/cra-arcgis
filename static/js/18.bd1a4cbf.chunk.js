(function(){(this||window).webpackJsonpareactgis.registerAbsMids({"esri/renderers/support/styleUtils":467,"esri/layers/support/lazyLayerLoader":488,"esri/portal/support/mapNotesUtils":620,"esri/portal/support/layersCreator":698,"esri/portal/support/portalLayers":699})})(),(this.webpackJsonpareactgis=this.webpackJsonpareactgis||[]).push([[18,114],{467:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(31),n(32),n(499),n(28),n(398)],void 0===(a=function(e,r,n,t,a,i,o){Object.defineProperty(r,"__esModule",{value:!0}),r.loadStyleRenderer=function(e,r,u){return t(this,void 0,void 0,(function(){var t,c,l;return n(this,(function(n){switch(n.label){case 0:return(t=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin))&&"unique-value"===t.type&&t.styleOrigin?[4,a.result(t.populateFromStyle())]:[3,2];case 1:c=n.sent(),i.throwIfAborted(u),!1===c.ok&&(l=c.error,r&&r.messages&&r.messages.push(new o("renderer:style-reference","Failed to create unique value renderer from style reference: "+l.message,{error:l,context:r})),e.clear("renderer",r.origin)),n.label=2;case 2:return[2]}}))}))}}.apply(null,t))||(e.exports=a)},488:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(28)],void 0===(a=function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.layerLookupMap={CSVLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(27),n.e(92)]).then(function(){var r=[n(317)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},ElevationLayer:function(){return t.create((function(e){return Promise.all([n.e(15),n.e(35)]).then(function(){var r=[n(307)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},FeatureLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(69)]).then(function(){var r=[n(179)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},GroupLayer:function(){return t.create((function(e){return n.e(34).then(function(){var r=[n(303)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},GeoRSSLayer:function(){return t.create((function(e){return n.e(80).then(function(){var r=[n(311)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},ImageryLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(5),n.e(6),n.e(23),n.e(96)]).then(function(){var r=[n(318)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},KMLLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(33),n.e(97)]).then(function(){var r=[n(319)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},MapImageLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(7),n.e(17),n.e(81)]).then(function(){var r=[n(312)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},MapNotesLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(68)]).then(function(){var r=[n(644)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},OpenStreetMapLayer:function(){return t.create((function(e){return n.e(76).then(function(){var r=[n(313)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},PointCloudLayer:function(){return t.create((function(e){return Promise.all([n.e(14),n.e(29),n.e(91)]).then(function(){var r=[n(320)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},SceneLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(9),n.e(70)]).then(function(){var r=[n(314)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},BuildingSceneLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(9),n.e(25),n.e(90)]).then(function(){var r=[n(321)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},IntegratedMeshLayer:function(){return t.create((function(e){return Promise.all([n.e(9),n.e(86)]).then(function(){var r=[n(315)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},StreamLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(30),n.e(89)]).then(function(){var r=[n(322)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},TileLayer:function(){return t.create((function(e){return Promise.all([n.e(0),n.e(1),n.e(7),n.e(16),n.e(94)]).then(function(){var r=[n(153)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},UnknownLayer:function(){return t.create((function(e){return n.e(119).then(function(){var r=[n(646)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},UnsupportedLayer:function(){return t.create((function(e){return n.e(120).then(function(){var r=[n(647)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},VectorTileLayer:function(){return t.create((function(e){return Promise.all([n.e(19),n.e(26),n.e(93)]).then(function(){var r=[n(323)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},WebTileLayer:function(){return t.create((function(e){return n.e(78).then(function(){var r=[n(283)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},WMSLayer:function(){return t.create((function(e){return Promise.all([n.e(36),n.e(95)]).then(function(){var r=[n(324)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},WMTSLayer:function(){return t.create((function(e){return n.e(73).then(function(){var r=[n(648)];e.apply(null,r)}.bind(this)).catch(n.oe)}))},BingMapsLayer:function(){return t.create((function(e){return n.e(79).then(function(){var r=[n(83)];e.apply(null,r)}.bind(this)).catch(n.oe)}))}}}.apply(null,t))||(e.exports=a)},620:function(e,r,n){var t,a;t=[n.dj.c(e.i),r],void 0===(a=function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isMapNotesLayer=function(e){var r=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"],n=e.layers||e.featureCollection&&e.featureCollection.layers;if(n&&Array.isArray(n)){var t=n[0];return t.layerDefinition&&Array.isArray(t.layerDefinition.fields)&&t.layerDefinition.fields.forEach((function(e){var n=r.indexOf(e.name);n>-1&&r.splice(n,1)})),!r.length}}}.apply(null,t))||(e.exports=a)},698:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(31),n(32),n(91),n(36),n(28),n(488),n(183),n(620),n(699),n(467)],void 0===(a=function(e,r,n,t,a,i,o,u,c,l,y,s){function p(e,r,a){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){switch(n.label){case 0:return(t=new e).read(r,a.context),"group"===t.type&&d(r)?[4,S(t,r,a.context)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,s.loadStyleRenderer(t,a.context)];case 3:return n.sent(),[2,t]}}))}))}function L(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(n){switch(n.label){case 0:return[4,f(e,r)];case 1:return[2,p(n.sent(),e,r)]}}))}))}function f(e,r){return t(this,void 0,void 0,(function(){var t,a,i,o,s,p,L,f;return n(this,(function(n){switch(n.label){case 0:return t=r.context,a=function(e){var r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=b;break;case"ground":r=I;break;default:r=g}break;default:switch(e.layerContainerType){case"basemap":r=A;break;default:r=T}}return r}(t),!(i=e.layerType||e.type)&&r&&r.defaultLayerType&&(i=r.defaultLayerType),o=a[i],s=o?u.layerLookupMap[o]:u.layerLookupMap.UnknownLayer,h(e)?e.itemId?[4,(p=new c({id:e.itemId,portal:t&&t.portal})).load()]:[3,3]:[3,4];case 1:return n.sent(),[4,y.selectLayerClassPath(p)];case 2:L=n.sent(),f=L.className||"UnknownLayer",s=u.layerLookupMap[f],n.label=3;case 3:return[3,5];case 4:"ArcGISFeatureLayer"===i&&(l.isMapNotesLayer(e)?s=u.layerLookupMap.MapNotesLayer:d(e)&&(s=u.layerLookupMap.GroupLayer)),n.label=5;case 5:return e.wmtsInfo&&(s=u.layerLookupMap.WMTSLayer),[2,s()]}}))}))}function d(e){if("ArcGISFeatureLayer"!==e.layerType||h(e))return!1;var r=e.featureCollection;return!!(r&&r.layers&&r.layers.length>1)}function h(e){return"Feature Collection"===e.type}function v(e,r,i){return t(this,void 0,void 0,(function(){var t,o,u;return n(this,(function(n){switch(n.label){case 0:return t=new a,o=m(t,Array.isArray(r.layers)?r.layers:[],i),[4,e];case 1:return u=n.sent(),[4,o];case 2:return n.sent(),"group"===u.type?(u.layers.addMany(t),[2,u]):[2,void 0]}}))}))}function S(e,r,a){return t(this,void 0,void 0,(function(){var t,i,o,c;return n(this,(function(n){switch(n.label){case 0:return[4,(0,u.layerLookupMap.FeatureLayer)()];case 1:return t=n.sent(),i=r.featureCollection,o=i.showLegend,c=i.layers.map((function(e){var r=new t;return r.read(e,a),null!=o&&r.read({showLegend:o},a),r})),e.layers.addMany(c),[2]}}))}))}function m(e,r,a){return t(this,void 0,void 0,(function(){var t,i,u,c,l,y,s,p,f;return n(this,(function(n){switch(n.label){case 0:if(!r)return[2];for(t=[],i=0,u=r;i<u.length;i++)c=u[i],l=L(c,a),"GroupLayer"===c.layerType?t.push(v(l,c,a)):t.push(l);return[4,o.eachAlways(t)];case 1:for(y=n.sent(),s=0,p=y;s<p.length;s++)f=p[s],M&&f.error?console.error(f.error.toString?f.error.toString():f.error):!f.value||a.filter&&!a.filter(f.value)||e.add(f.value);return[2]}}))}))}Object.defineProperty(r,"__esModule",{value:!0});var M=i("dojo-debug-messages"),g={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer"},I={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},b={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},T={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WFS:"UnsupportedLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},A={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};r.createLayer=L,r.populateOperationalLayers=function(e,r,a){return t(this,void 0,void 0,(function(){return n(this,(function(n){return[2,m(e,r,a)]}))}))}}.apply(null,t))||(e.exports=a)},699:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(26),n(51),n(91),n(27),n(28),n(488),n(183),n(620)],void 0===(a=function(e,r,n,t,a,i,o,u,c,l){function y(e){switch(e.type){case"Map Service":return function(e){return p(e).then((function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}}))}(e);case"Feature Service":return function(e){return L(e).then((function(e){if("object"==typeof e){var r={};return null!=e.id&&(r.layerId=e.id),{className:"FeatureLayer",properties:r}}return{className:"GroupLayer"}}))}(e);case"Feature Collection":return function(e){return e.load().then((function(){return e.fetchData()})).then((function(e){if(e&&Array.isArray(e.layers)){if(l.isMapNotesLayer(e))return{className:"MapNotesLayer"};if(1===e.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}}))}(e);case"Scene Service":return function(e){return L(e).then((function(r){if("object"==typeof r){var n={},t=void 0;if(null!=r.id?(n.layerId=r.id,t=e.url+"/layers/"+r.id):t=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0)for(var a={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},i=0,o=Object.keys(a);i<o.length;i++){var u=o[i];if(-1!==e.typeKeywords.indexOf(u))return{className:a[u]}}return f(t).then((function(e){var r="SceneLayer",t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&t[e.layerType]&&(r=t[e.layerType]),{className:r,properties:n}}))}return{className:"GroupLayer"}}))}(e);case"Image Service":return function(e){return p(e).then((function(r){var n=new a(e.typeKeywords);return r?n.find((function(e){return"elevation 3d layer"===e.toLowerCase()}))?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}}))}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return o.reject(new i("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function s(e){return(0,u.layerLookupMap[e.className])().then((function(r){return{constructor:r,properties:e.properties}}))}function p(e){return f(e.url).then((function(e){return e.tileInfo}))}function L(e){return!e.url||e.url.match(/\/\d+$/)?o.resolve({}):e.load().then((function(){return e.fetchData()})).then((function(r){return r&&Array.isArray(r.layers)?1===r.layers.length&&{id:r.layers[0].id}:f(e.url).then((function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:{}}))}))}function f(e){return t(e,{responseType:"json",query:{f:"json"}}).then((function(e){return e.data}))}Object.defineProperty(r,"__esModule",{value:!0}),r.fromItem=function(e){return!e.portalItem||e.portalItem instanceof c||e.portalItem.constructor&&e.portalItem.constructor._meta||(e=n({},e,{portalItem:new c(e.portalItem)})),function(e){return e.load().then(y).then(s)}(e.portalItem).then((function(r){var t=n({portalItem:e.portalItem},r.properties),a=r.constructor;return o.resolve(new a(t))}))},r.selectLayerClassPath=y}.apply(null,t))||(e.exports=a)}}]);
//# sourceMappingURL=18.bd1a4cbf.chunk.js.map