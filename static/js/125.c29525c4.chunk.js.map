{"version":3,"sources":["../node_modules/arcgis-js-api/views/3d/layers/PointCloudWorker.js","../node_modules/arcgis-js-api/views/3d/layers/i3s/PointCloudRendererUtil.js"],"names":["define","t","e","r","a","o","i","n","u","f","s","l","b","c","p","h","v","Object","defineProperty","value","d","prototype","_process","this","_transform","points","buffer","rgb","isSome","pointIdFilterMap","push","attributes","length","values","isArrayBuffer","resolve","result","transferList","readGeometry","schema","geometryBuffer","getAttributeValues","primaryAttributeData","attributeInfo","modulationAttributeData","evaluateRenderer","rendererInfo","filterInfo","filterAttributesData","map","Uint32Array","filterInPlace","userAttributesData","Uint8Array","slice","_applyElevationOffsetInPlace","elevationOffset","m","_transformCoordinates","obb","fromJSON","inSR","outSR","bufferToBuffer","Error","vec3f32","fromValues","center","create","quat","conjugate","y","quaternion","Float32Array","vec3","transformQuat","halfSize","Math","max","abs","quatf32","g","call","_thread","open","getAbsMid","then","close","destroy","transform","invoke","signal","PointCloudWorker","default","name","attributeValues","valueType","valuesPerElement","storageInfo","useElevation","encoding","toLowerCase","Float64Array","getRendererInfo","renderer","type","toJSON","attributeStorageInfo","field","colorModulation","rendererJSON","isRGBRenderer","primaryAttribute","modulationAttribute","getFilterInfo","filters","filterJSON","colorUniqueValueInfos","fieldTransformType","indexOf","color","stops","S","I","colorClassBreakInfos","minValue","maxValue","A","C","R","mode","requiredSetBits","requiredClearBits","includedReturns","getSplatSizeAlgorithm","pointSizeAlgorithm","getFixedSizeAlgorithm","rendererUsesFixedSizes","getAttributeInfo","elevationFromPositions","readBinaryAttribute","createGeometryIndexFromSchema","createTypedView","vertexAttributes","position","header","fields","offsetX","offsetY","offsetZ","scaleX","scaleY","scaleZ","decodeXYZ"],"mappings":"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","file":"static/js/125.c29525c4.chunk.js","sourcesContent":["// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../../core/tsSupport/extendsHelper\",\"../../../core/maybe\",\"../../../core/promiseUtils\",\"../../../core/requireUtils\",\"../../../core/typedArrayUtil\",\"../../../core/workers\",\"../../../core/libs/gl-matrix-2/quat\",\"../../../core/libs/gl-matrix-2/quatf32\",\"../../../core/libs/gl-matrix-2/vec3\",\"../../../core/libs/gl-matrix-2/vec3f32\",\"../../../geometry/SpatialReference\",\"./i3s/PointCloudRendererUtil\",\"../support/projectionUtils\",\"module\"],function(t,e,r,a,o,i,n,u,f,s,l,b,c,p,h,v){function m(){return new d}Object.defineProperty(e,\"__esModule\",{value:!0});var d=function(){function t(){}return t.prototype._process=function(t){var e=this._transform(t),r=[e.points.buffer,e.rgb.buffer];a.isSome(e.pointIdFilterMap)&&r.push(e.pointIdFilterMap.buffer);for(var i=0,u=e.attributes;i<u.length;i++){var f=u[i];\"buffer\"in f.values&&n.isArrayBuffer(f.values.buffer)&&f.values.buffer!==e.rgb.buffer&&r.push(f.values.buffer)}return o.resolve({result:e,transferList:r})},t.prototype._transform=function(t){var e=p.readGeometry(t.schema,t.geometryBuffer),r=e.length/3,o=null,i=[],n=p.getAttributeValues(t.primaryAttributeData,e,r);a.isSome(t.primaryAttributeData)&&n&&i.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:n});var u=p.getAttributeValues(t.modulationAttributeData,e,r);a.isSome(t.modulationAttributeData)&&u&&i.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:u});var f=p.evaluateRenderer(t.rendererInfo,n,u,r);if(t.filterInfo&&t.filterInfo.length>0&&a.isSome(t.filterAttributesData)){var s=t.filterAttributesData.map(function(t){var a=p.getAttributeValues(t,e,r),o={attributeInfo:t.attributeInfo,values:a};return i.push(o),o});o=new Uint32Array(r),r=p.filterInPlace(e,f,o,t.filterInfo,s)}for(var l=0,b=t.userAttributesData;l<b.length;l++){var h=b[l],v=p.getAttributeValues(h,e,r);i.push({attributeInfo:h.attributeInfo,values:v})}3*r<f.length&&(f=new Uint8Array(f.buffer.slice(0,3*r))),this._applyElevationOffsetInPlace(e,r,t.elevationOffset);var m=this._transformCoordinates(e,r,t.obb,c.fromJSON(t.inSR),c.fromJSON(t.outSR));return{obb:t.obb,points:m,rgb:f,attributes:i,pointIdFilterMap:o}},t.prototype._transformCoordinates=function(t,e,r,a,o){if(!h.bufferToBuffer(t,a,0,t,o,0,e))throw Error(\"Can't reproject\");var i=b.vec3f32.fromValues(r.center[0],r.center[1],r.center[2]),n=b.vec3f32.create(),u=b.vec3f32.create();f.quat.conjugate(y,r.quaternion);for(var s=new Float32Array(3*e),c=0;c<e;c++)n[0]=t[3*c]-i[0],n[1]=t[3*c+1]-i[1],n[2]=t[3*c+2]-i[2],l.vec3.transformQuat(u,n,y),r.halfSize[0]=Math.max(r.halfSize[0],Math.abs(u[0])),r.halfSize[1]=Math.max(r.halfSize[1],Math.abs(u[1])),r.halfSize[2]=Math.max(r.halfSize[2],Math.abs(u[2])),s[3*c]=n[0],s[3*c+1]=n[1],s[3*c+2]=n[2];return s},t.prototype._applyElevationOffsetInPlace=function(t,e,r){if(0!==r)for(var a=0;a<e;a++)t[3*a+2]+=r},t}(),y=s.quatf32.create(),g=function(e){function a(){var r=e.call(this)||this;return r._thread=void 0,u.open(i.getAbsMid(\"./PointCloudWorker\",t,v)).then(function(t){void 0===r._thread?r._thread=t:t.close()}),r}return r(a,e),a.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},a.prototype.transform=function(t,e,r){return this._thread?this._thread.invoke(\"_process\",t,{transferList:e,signal:r}):o.resolve(this._transform(t))},a}(d);e.PointCloudWorker=g,e.default=m});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../../../core/maybe\",\"../../../../renderers/PointCloudClassBreaksRenderer\",\"../../../../renderers/PointCloudStretchRenderer\",\"../../../../renderers/PointCloudUniqueValueRenderer\",\"./I3SBinaryReader\",\"./LEPCC\"],function(e,r,t,n,o,l,a,i){function u(e){var r=e.renderer,t=r&&r.type,n=r&&e.renderer.toJSON()||null,o=null,l=!1;\"point-cloud-unique-value\"===t?o=m(e.attributeStorageInfo,r.field):\"point-cloud-stretch\"===t?o=m(e.attributeStorageInfo,r.field):\"point-cloud-class-breaks\"===t?o=m(e.attributeStorageInfo,r.field):\"point-cloud-rgb\"===t?(o=p(e.attributeStorageInfo,r.field),l=null!=o):(o=p(e.attributeStorageInfo,\"RGB\"),l=null!=o);var a=null;return r&&r.colorModulation&&(a=m(e.attributeStorageInfo,r.colorModulation.field)),{rendererJSON:n,isRGBRenderer:l,primaryAttribute:o,modulationAttribute:a}}function f(e){var r=e.filters;return r?r.map(function(r){return{filterJSON:r.toJSON(),attributeInfo:m(e.attributeStorageInfo,r.field)}}):[]}function s(e,r,t,a){var i=e.rendererJSON,u=e.isRGBRenderer,f=null,s=null;if(r&&u)f=r;else if(r&&\"pointCloudUniqueValueRenderer\"===i.type){s=l.fromJSON(i);var d=s.colorUniqueValueInfos;f=new Uint8Array(3*a);for(var c=h(s.fieldTransformType),v=0;v<a;v++)for(var g=c?c(r[v]):r[v],b=g+\"\",p=0;p<d.length;p++)if(d[p].values.indexOf(b)>=0){f[3*v]=d[p].color.r,f[3*v+1]=d[p].color.g,f[3*v+2]=d[p].color.b;break}}else if(r&&\"pointCloudStretchRenderer\"===i.type){s=o.fromJSON(i);var m=s.stops;f=new Uint8Array(3*a);for(var c=h(s.fieldTransformType),v=0;v<a;v++){var g=c?c(r[v]):r[v],y=m.length-1;if(g<m[0].value)f[3*v]=m[0].color.r,f[3*v+1]=m[0].color.g,f[3*v+2]=m[0].color.b;else if(g>=m[y].value)f[3*v]=m[y].color.r,f[3*v+1]=m[y].color.g,f[3*v+2]=m[y].color.b;else for(var p=1;p<m.length;p++)if(g<m[p].value){var S=(g-m[p-1].value)/(m[p].value-m[p-1].value);f[3*v]=m[p].color.r*S+m[p-1].color.r*(1-S),f[3*v+1]=m[p].color.g*S+m[p-1].color.g*(1-S),f[3*v+2]=m[p].color.b*S+m[p-1].color.b*(1-S);break}}}else if(r&&\"pointCloudClassBreaksRenderer\"===i.type){s=n.fromJSON(i);var I=s.colorClassBreakInfos;f=new Uint8Array(3*a);for(var c=h(s.fieldTransformType),v=0;v<a;v++)for(var g=c?c(r[v]):r[v],p=0;p<I.length;p++)if(g>=I[p].minValue&&g<=I[p].maxValue){f[3*v]=I[p].color.r,f[3*v+1]=I[p].color.g,f[3*v+2]=I[p].color.b;break}}else{f=new Uint8Array(3*a);for(var v=0;v<f.length;v++)f[v]=255}if(t&&s&&s.colorModulation)for(var A=s.colorModulation.minValue,C=s.colorModulation.maxValue,v=0;v<a;v++){var g=t[v],R=g>=C?1:g<=A?.3:.3+.7*(g-A)/(C-A);f[3*v]=R*f[3*v],f[3*v+1]=R*f[3*v+1],f[3*v+2]=R*f[3*v+2]}return f}function d(e,r,t,n,o){for(var l=e.length/3,a=0,i=0;i<l;i++){for(var u=!0,f=0;f<n.length&&u;f++){var s=n[f].filterJSON,d=o[f].values[i];switch(s.type){case\"pointCloudValueFilter\":var v=\"exclude\"===s.mode;-1!==s.values.indexOf(d)===v&&(u=!1);break;case\"pointCloudBitfieldFilter\":var g=c(s.requiredSetBits),b=c(s.requiredClearBits);(d&g)===g&&0==(d&b)||(u=!1);break;case\"pointCloudReturnFilter\":for(var p=15&d,m=d>>>4&15,y=m>1,S=1===p,h=p===m,I=!1,A=0,C=s.includedReturns;A<C.length;A++){var R=C[A];if(\"last\"===R&&h||\"firstOfMany\"===R&&S&&y||\"lastOfMany\"===R&&h&&y||\"single\"===R&&!y){I=!0;break}}I||(u=!1)}}u&&(t[a]=i,e[3*a]=e[3*i],e[3*a+1]=e[3*i+1],e[3*a+2]=e[3*i+2],r[3*a]=r[3*i],r[3*a+1]=r[3*i+1],r[3*a+2]=r[3*i+2],a++)}return a}function c(e){for(var r=0,t=0,n=e||[];t<n.length;t++){r|=1<<n[t]}return r}function v(e){var r=e&&e.pointSizeAlgorithm;return r&&\"splat\"===r.type?r:null}function g(e){var r=e&&e.pointSizeAlgorithm;return r&&\"fixed-size\"===r.type?r:null}function b(e){var r=e&&e.pointSizeAlgorithm;return!(!r||!r.type)&&\"fixed-size\"===r.type}function p(e,r){for(var t=0,n=e;t<n.length;t++){var o=n[t];if(o.name===r&&null!=o.attributeValues&&\"UInt8\"===o.attributeValues.valueType&&3===o.attributeValues.valuesPerElement)return{name:r,storageInfo:o,useElevation:!1}}return null}function m(e,r){for(var t=0,n=e;t<n.length;t++){var o=n[t];if(o.name===r){var l=\"embedded-elevation\"===o.encoding;return{name:r,storageInfo:l?null:o,useElevation:l}}}return\"elevation\"===r.toLowerCase()?{name:r,storageInfo:null,useElevation:!0}:null}function y(e,r){for(var t=new Float64Array(r),n=0;n<r;n++)t[n]=e[3*n+2];return t}function S(e,r,n){return t.isSome(e)&&e.attributeInfo.useElevation?y(r,n):t.isSome(e)?a.readBinaryAttribute(e.attributeInfo.storageInfo,e.buffer,n):null}function h(e){return null==e||\"none\"===e?null:\"low-four-bit\"===e?function(e){return 15&e}:\"high-four-bit\"===e?function(e){return(240&e)>>4}:\"absolute-value\"===e?function(e){return Math.abs(e)}:\"modulo-ten\"===e?function(e){return e%10}:null}function I(e,r){if(null==e.encoding||\"\"===e.encoding){for(var t=a.createGeometryIndexFromSchema(r,e),n=a.createTypedView(r,t.vertexAttributes.position),o=t.header.fields,l=[o.offsetX,o.offsetY,o.offsetZ],u=[o.scaleX,o.scaleY,o.scaleZ],f=n.length/3,s=new Float64Array(3*f),d=0;d<f;d++)s[3*d]=n[3*d]*u[0]+l[0],s[3*d+1]=n[3*d+1]*u[1]+l[1],s[3*d+2]=n[3*d+2]*u[2]+l[2];return s}if(\"lepcc-xyz\"===e.encoding)return i.decodeXYZ(r).result}Object.defineProperty(r,\"__esModule\",{value:!0}),r.getRendererInfo=u,r.getFilterInfo=f,r.evaluateRenderer=s,r.filterInPlace=d,r.getSplatSizeAlgorithm=v,r.getFixedSizeAlgorithm=g,r.rendererUsesFixedSizes=b,r.getAttributeInfo=m,r.elevationFromPositions=y,r.getAttributeValues=S,r.readGeometry=I});"],"sourceRoot":""}