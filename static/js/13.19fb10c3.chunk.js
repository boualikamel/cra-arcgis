(function(){(this||window).webpackJsonpareactgis.registerAbsMids({"esri/layers/graphics/OptimizedGeometry":70,"esri/layers/graphics/OptimizedFeature":107,"esri/layers/graphics/OptimizedFeatureSet":156,"esri/geometry/support/quantizationUtils":161,"esri/geometry/support/normalizeUtils":184,"esri/layers/graphics/data/projectionSupport":292,"esri/tasks/geometry/cut":329,"esri/tasks/geometry/simplify":330,"esri/geometry/projection":355,"esri/core/libs/rbush/rbush":366,"esri/geometry/pe":377,"esri/geometry/support/GeographicTransformation":378,"esri/geometry/support/GeographicTransformationStep":379,"esri/geometry/support/aaBoundingBox":381,"esri/core/libs/quickselect/quickselect":402,"esri/layers/graphics/data/QueryEngine":430,"esri/layers/graphics/data/FeatureStore":480,"esri/layers/graphics/data/executeTileQuery":543,"esri/layers/graphics/data/BoundsStore":570,"esri/layers/graphics/data/QueryEngineResult":572,"esri/layers/graphics/data/AttributesBuilder":573,"esri/layers/support/PromiseQueue":575,"esri/layers/graphics/sources/support/clientSideDefaults":730})})(),(this.webpackJsonpareactgis=this.webpackJsonpareactgis||[]).push([[13,112],{107:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(21)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r,n){void 0===e&&(e=null),void 0===t&&(t={}),this.localId=0,this.geohashIndexed=!1,this.geohashX=0,this.geohashY=0,this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=n&&(this.objectId=n)};t.default=n}.apply(null,n))||(e.exports=i)},156:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1};t.default=r}.apply(null,n))||(e.exports=i)},161:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(40)],void 0===(i=function(e,t,r){function n(e){return e&&"upperLeft"===e.originPosition}function i(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function o(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function s(e,t,r){for(var n,s,a,u,c=[],l=0;l<r.length;l++){var h=r[l];l>0?(a=i(e,h[0]),u=o(e,h[1]),a===n&&u===s||(c.push(t(h,a-n,u-s)),n=a,s=u)):(n=i(e,h[0]),s=o(e,h[1]),c.push(t(h,n,s)))}return c.length>0?c:null}function a(e,t,r,n){return s(e,r?n?T:S:n?S:M,t)}function u(e,t,r,n){for(var i=[],o=r?n?T:S:n?S:M,a=0;a<t.length;a++){var u=s(e,o,t[a]);u&&u.length>=3&&i.push(u)}return i.length?i:null}function c(e,t,r,n){for(var i=[],o=r?n?T:S:n?S:M,a=0;a<t.length;a++){var u=s(e,o,t[a]);u&&u.length>=2&&i.push(u)}return i.length?i:null}function l(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function h(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function f(e,t,r){var n=new Array(r.length);if(!r.length)return n;var i=e.scale,o=i[0],s=i[1],a=l(e,r[0][0]),u=h(e,r[0][1]);n[0]=t(r[0],a,u);for(var c=1;c<r.length;c++){var f=r[c];a+=f[0]*o,u-=f[1]*s,n[c]=t(f,a,u)}return n}function p(e,t,r){for(var n=new Array(r.length),i=0;i<r.length;i++)n[i]=f(e,t,r[i]);return n}function d(e,t,r,n){return f(e,r?n?T:S:n?S:M,t)}function _(e,t,r,n){return p(e,r?n?T:S:n?S:M,t)}function m(e,t,r,n){return p(e,r?n?T:S:n?S:M,t)}function y(e,t,r){for(var n=r[0],i=n[0],o=n[1],s=Math.min(i,t[0]),a=Math.min(o,t[1]),u=Math.max(i,t[2]),c=Math.max(o,t[3]),l=1;l<r.length;l++){var h=r[l],f=h[0],p=h[1];i+=f,o+=p,f<0&&(s=Math.min(s,i)),f>0&&(u=Math.max(u,i)),p<0?a=Math.min(a,o):p>0&&(c=Math.max(c,o))}return e[0]=s,e[1]=a,e[2]=u,e[3]=c,e}function g(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(var r=0;r<t.length;r++)y(e,e,t[r]);return e}function v(e,t,r,n,s){return t.xmin=i(e,r.xmin),t.ymin=o(e,r.ymin),t.xmax=i(e,r.xmax),t.ymax=o(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),s&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function P(e,t,r,n,i){return t.points=a(e,r.points,n,i),t}function x(e,t,r,n,s){return t.x=i(e,r.x),t.y=o(e,r.y),t!==r&&(n&&(t.z=r.z),s&&(t.m=r.m)),t}function E(e,t,r,n,i){var o=u(e,r.rings,n,i);return o?(t.rings=o,t):null}function I(e,t,r,n,i){var o=c(e,r.paths,n,i);return o?(t.paths=o,t):null}Object.defineProperty(t,"__esModule",{value:!0});var M=function(e,t,r){return[t,r]},S=function(e,t,r){return[t,r,e[2]]},T=function(e,t,r){return[t,r,e[2],e[3]]};t.toQuantizationTransform=function(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:[e.tolerance,e.tolerance],translate:[e.extent.xmin,e.extent.ymax]}:null},t.equals=function(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&(n(e)?(r=e.translate[0],i=e.translate[1],o=e.scale[0]):(r=e.extent.xmin,i=e.extent.ymax,o=e.tolerance),n(t)?(s=t.translate[0],a=t.translate[1],u=t.scale[0]):(s=t.extent.xmin,a=t.extent.ymax,u=t.tolerance),r===s&&i===a&&o===u);var r,i,o,s,a,u},t.quantizeX=i,t.quantizeY=o,t.quantizeBounds=function(e,t,r){return t[0]=i(e,r[0]),t[3]=o(e,r[1]),t[2]=i(e,r[2]),t[1]=o(e,r[3]),t},t.quantizePoints=a,t.quantizeRings=u,t.quantizePaths=c,t.hydrateX=l,t.hydrateY=h,t.hydrateCoordsArray=f,t.hydrateCoordsArrayArray=p,t.hydrateBounds=function(e,t,r){return r?(t[0]=l(e,r[0]),t[1]=h(e,r[3]),t[2]=l(e,r[2]),t[3]=h(e,r[1]),t):[l(e,t[0]),h(e,t[3]),l(e,t[2]),h(e,t[1])]},t.hydratePoints=d,t.hydratePaths=_,t.hydrateRings=m,t.getQuantizedBoundsCoordsArray=y,t.getQuantizedBoundsCoordsArrayArray=g,t.getQuantizedBoundsPoints=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return y(t,t,e)},t.getQuantizedBoundsPaths=function(e){return g([0,0,0,0],e)},t.getQuantizedBoundsRings=function(e){return g([0,0,0,0],e)},t.quantizeExtent=v,t.quantizeMultipoint=P,t.quantizePoint=x,t.quantizePolygon=E,t.quantizePolyline=I,t.quantizeGeometry=function(e,t){return e&&t?r.isPoint(t)?x(e,{},t,!1,!1):r.isPolyline(t)?I(e,{},t,!1,!1):r.isPolygon(t)?E(e,{},t,!1,!1):r.isMultipoint(t)?P(e,{},t,!1,!1):r.isExtent(t)?v(e,{},t,!1,!1):null:null},t.hydrateExtent=function(e,t,r,n,i){return t.xmin=l(e,r.xmin),t.ymin=h(e,r.ymin),t.xmax=l(e,r.xmax),t.ymax=h(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),i&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.hydrateMultipoint=function(e,t,r,n,i){return t.points=d(e,r.points,n,i),t},t.hydratePoint=function(e,t,r,n,i){return t.x=l(e,r.x),t.y=h(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m)),t},t.hydratePolygon=function(e,t,r,n,i){return t.rings=m(e,r.rings,n,i),t},t.hydratePolyline=function(e,t,r,n,i){return t.paths=_(e,r.paths,n,i),t}}.apply(null,n))||(e.exports=i)},184:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(31),r(32),r(6),r(27),r(24),r(33),r(28),r(288),r(305),r(59),r(81),r(164),r(329),r(330)],void 0===(i=function(e,t,r,n,i,o,s,a,u,c,l,h,f,p,d,_){function m(e){return"polygon"===e.type}function y(e){return"polygon"===e[0].type}function g(e){return"polyline"===e[0].type}function v(e){return m(e)?e.rings:e.paths}function P(e,t){return Math.ceil((e-t)/(2*t))}function x(e,t){for(var r=0,n=v(e);r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++){o[i][0]+=t}return e}function E(e){for(var t=[],r=0,n=0,i=0;i<e.length;i++){for(var o=e[i],s=null,a=0;a<o.length;a++)s=o[a],t.push(s),0===a?n=r=s[0]:(r=Math.min(r,s[0]),n=Math.max(n,s[0]));s&&t.push([(r+n)/2,0])}return t}function I(e,t){if(!(e instanceof l||e instanceof c)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw b.error(r),new o(r)}for(var n=[],i=0,s=v(e);i<s.length;i++){var a=s[i],u=[];n.push(u),u.push([a[0][0],a[0][1]]);for(var h=0;h<a.length-1;h++){var f=a[h][0],p=a[h][1],d=a[h+1][0],_=a[h+1][1],y=Math.sqrt((d-f)*(d-f)+(_-p)*(_-p)),g=(_-p)/y,P=(d-f)/y,x=y/t;if(x>1){for(var E=1;E<=x-1;E++){var I=E*t,M=P*I+f,S=g*I+p;u.push([M,S])}var T=(y+Math.floor(x-1)*t)/2,O=P*T+f,N=g*T+p;u.push([O,N])}u.push([d,_])}}return m(e)?new c({rings:n,spatialReference:e.spatialReference}):new l({paths:n,spatialReference:e.spatialReference})}function M(e,t,r){if(t){var n=I(e,1e6);e=p.webMercatorToGeographic(n,!0)}return r&&(e=x(e,r)),e}function S(e,t,r){var n;if(Array.isArray(e)){if((n=e[0])>t){var i=P(n,t);e[0]=n+i*(-2*t)}else if(n<r){i=P(n,r);e[0]=n+i*(-2*r)}}else if((n=e.x)>t){i=P(n,t);e=e.clone().offset(i*(-2*t),0)}else if(n<r){i=P(n,r);e=e.clone().offset(i*(-2*r),0)}return e}function T(e,t){for(var r=-1,n=0;n<t.cutIndexes.length;n++)!function(n){for(var i=t.cutIndexes[n],o=t.geometries[n],s=v(o),a=0;a<s.length;a++)!function(e){var t=s[e];t.some((function(r){if(r[0]<180)return!0;for(var n=0,i=0;i<t.length;i++){var s=t[i][0];n=s>n?s:n}for(var a=-360*P(n=Number(n.toFixed(9)),180),u=0;u<t.length;u++){var c=o.getPoint(e,u);o.setPoint(e,u,c.clone().offset(a,0))}return!0}))}(a);if(i===r){if(y(e))for(var u=0,c=v(o);u<c.length;u++){var l=c[u];e[i]=e[i].addRing(l)}else if(g(e))for(var h=0,f=v(o);h<f.length;h++){var p=f[h];e[i]=e[i].addPath(p)}}else r=i,e[i]=o}(n);return e}Object.defineProperty(t,"__esModule",{value:!0});var b=s.getLogger("esri.geometry.support.normalizeUtils"),O={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new l({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:h.WebMercator}),minus180Line:new l({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:h.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new l({paths:[[[180,-180],[180,180]]],spatialReference:h.WGS84}),minus180Line:new l({paths:[[[-180,-180],[-180,180]]],spatialReference:h.WGS84})}};t.straightLineDensify=I,t.normalizeCentralMeridian=function e(t,o,s){return n(this,void 0,void 0,(function(){var n,h,m,y,g,v,E,I,b,N,F,R,A,w,G,j,B,C,Y,D,z,Q,X,k,L,q,U,V,Z,W,J,H,K,$,ee,te,re;return r(this,(function(r){switch(r.label){case 0:if(!Array.isArray(t))return[2,e([t],o)];for(n=o?o.url:i.geometryServiceUrl,N=0,F=[],R=[],A=0,w=t;A<w.length;A++)G=w[A],a.isNone(G)?R.push(G):(h||(h=G.spatialReference,m=f.getInfo(h),y=h.isWebMercator,g=O[E=y?102100:4326].maxX,v=O[E].minX,I=O[E].plus180Line,b=O[E].minus180Line),m?"mesh"===G.type?R.push(G):"point"===G.type?R.push(S(G.clone(),g,v)):"multipoint"===G.type?((j=G.clone()).points=j.points.map((function(e){return S(e,g,v)})),R.push(j)):"extent"===G.type?(C=G.clone(),B=C._normalize(!1,!1,m),R.push(B.rings?new c(B):B)):G.extent?(C=G.extent,Y=P(C.xmin,v),z=0===(D=Y*(2*g))?G.clone():x(G.clone(),D),C.offset(D,0),C.intersects(I)&&C.xmax!==g?(N=C.xmax>N?C.xmax:N,z=M(z,y),F.push(z),R.push("cut")):C.intersects(b)&&C.xmin!==v?(N=C.xmax*(2*g)>N?C.xmax*(2*g):N,z=M(z,y,360),F.push(z),R.push("cut")):R.push(z)):R.push(G.clone()):R.push(G));for(Q=P(N,g),X=-90,k=Q,L=new l;Q>0;)q=360*Q-180,L.addPath([[q,X],[q,-1*X]]),X*=-1,Q--;return F.length>0&&k>0?[4,d.cut(n,F,L,s)]:[3,3];case 1:for(U=r.sent(),V=T(F,U),Z=[],W=[],ee=0;ee<R.length;ee++)"cut"!==(te=R[ee])?W.push(te):(re=V.shift(),J=t[ee],a.isSome(J)&&"polygon"===J.type&&J.rings&&J.rings.length>1&&re.rings.length>=J.rings.length?(Z.push(re),W.push("simplify")):W.push(y?p.geographicToWebMercator(re):re));return Z.length?[4,_.simplify(n,Z,s)]:[2,W];case 2:for(H=r.sent(),K=[],ee=0;ee<W.length;ee++)"simplify"!==(te=W[ee])?K.push(te):K.push(y?p.geographicToWebMercator(H.shift()):H.shift());return[2,K];case 3:for($=[],ee=0;ee<R.length;ee++)"cut"!==(te=R[ee])?$.push(te):(re=F.shift(),$.push(!0===y?p.geographicToWebMercator(re):re));return[2,u.resolve($)]}}))}))},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var n=e.spatialReference&&f.getInfo(e.spatialReference);if(!n)return r;var i,o=n.valid,s=o[0],a=o[1],u=2*a,c=r.width,l=r.xmin,h=r.xmax;if(l=(t=[h,l])[0],h=t[1],"extent"===e.type||0===c||c<=a||c>u||l<s||h>a)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;i=E(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;i=E(e.paths);break;case"multipoint":i=e.points}for(var p=r.clone(),d=0;d<i.length;d++){var _=i[d][0];_<0?(_+=a,h=Math.max(_,h)):(_-=a,l=Math.min(_,l))}return p.xmin=l,p.xmax=h,p.width<c?(p.xmin-=a,p.xmax-=a,p):r},t.normalizeMapX=function(e,t){var r=f.getInfo(t);if(r){var n=r.valid,i=n[0],o=n[1],s=o-i;if(e<i)for(;e<i;)e+=s;if(e>o)for(;e>o;)e-=s}return e}}.apply(null,n))||(e.exports=i)},292:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(31),r(32),r(27),r(28),r(355),r(81),r(164)],void 0===(i=function(e,t,r,n,i,o,s,a,u){function c(e,t){var r,n,i;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,d),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}if("xmin"in t){o={xmin:0,ymin:0,xmax:0,ymax:0};return n=e(t.xmin,t.ymin,d),o.xmin=n[0],o.ymin=n[1],i=e(t.xmax,t.ymax,d),o.xmax=i[0],o.ymax=i[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o}return"rings"in t?{rings:l(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:l(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:h(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function l(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(h(o,t))}return r}function h(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],s=t(o[0],o[1],[0,0]);r.push(s),o.length>2&&s.push(o[2]),o.length>3&&s.push(o[3])}return r}function f(e,t){return!(!a.isValid(e)||!a.isValid(t)||a.equals(e,t)||u.canProject(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var p="feature-store:unsupported-query",d=[0,0];t.doesBrowserSupportProjection=function(e,t){return!f(e,t)||s.isSupported()},t.checkProjectionSupport=function(e,t){return n(this,void 0,void 0,(function(){var n,o,a;return r(this,(function(r){if(!t)return[2];if(Array.isArray(e)){for(n=0,o=e;n<o.length;n++)if(f((a=o[n]).geometry&&a.geometry.spatialReference,t)){if(s.isSupported())return[2,s.load()];throw new i(p,"projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!f(e,t))return[2];if(s.isSupported())return[2,s.load()];throw new i(p,"projection not supported",{inSpatialReference:e,outSpatialReference:t})}))}))};var _=c.bind(null,u.lngLatToXY),m=c.bind(null,u.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),a.isValid(t)&&a.isValid(r)&&!a.equals(t,r)?u.canProject(t,r)?a.isWebMercator(r)?_(e):m(e):s.projectMany([e],t,r,null,!0)[0]:e):e};var y=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,i){return n(this,void 0,void 0,(function(){var n,s=this;return r(this,(function(r){return e&&e.length&&t&&i&&!a.equals(t,i)||o.resolve(e),n={geometries:e,inSpatialReference:t,outSpatialReference:i,resolve:null},this._jobs.push(n),[2,o.create((function(e){n.resolve=e,null===s._timer&&(s._timer=setTimeout(s._process,10))}),(function(){var e=s._jobs.indexOf(n);e>-1&&s._jobs.splice(e,1)}))]}))}))},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference;(0,e.resolve)(u.canProject(r,n)?a.isWebMercator(n)?t.map(_):t.map(m):s.projectMany(t,r,n,null,!0)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,i){return n(this,void 0,void 0,(function(){return r(this,(function(r){return[2,y.push(e,t,i)]}))}))}}.apply(null,n))||(e.exports=i)},329:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(26),r(32),r(31),r(48),r(51),r(50),r(40)],void 0===(i=function(e,t,r,n,i,o,s,a,u){Object.defineProperty(t,"__esModule",{value:!0}),t.cut=function(e,t,c,l){return n(this,void 0,void 0,(function(){var n,h,f,p,d,_,m;return i(this,(function(i){switch(i.label){case 0:return n="string"==typeof e?a.urlToObject(e):e,h=t[0].spatialReference,f=r({},l,{query:r({},n.query,{f:"json",sr:JSON.stringify(h),target:JSON.stringify({geometryType:u.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(c)})}),[4,s(n.path+"/cut",f)];case 1:return p=i.sent(),d=p.data,_=d.cutIndexes,m=d.geometries,[2,{cutIndexes:_,geometries:(void 0===m?[]:m).map((function(e){return o.fromJSON(e).set(h)}))}]}}))}))}}.apply(null,n))||(e.exports=i)},330:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(26),r(32),r(31),r(51),r(50),r(40)],void 0===(i=function(e,t,r,n,i,o,s,a){function u(e){return{geometryType:a.getJsonType(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function c(e,t,r){var n=a.getGeometryType(t);return e.map((function(e){var t=n.fromJSON(e);return t.spatialReference=r,t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=function(e,t,l){return n(this,void 0,void 0,(function(){var n,h,f,p;return i(this,(function(i){switch(i.label){case 0:return n="string"==typeof e?s.urlToObject(e):e,h=t[0].spatialReference,f=a.getJsonType(t[0]),p=r({},l,{query:r({},n.query,{f:"json",sr:h.wkid?h.wkid:JSON.stringify(h),geometries:JSON.stringify(u(t))})}),[4,o(n.path+"/simplify",p)];case 1:return[2,c(i.sent().data,f,h)]}}))}))}}.apply(null,n))||(e.exports=i)},355:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(377),r(59),r(378)],void 0===(i=function(e,t,n,i,o,s){function a(e,t,r,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),null===n){var a=s.cacheKey(t,r);void 0!==h[a]?n=h[a]:(null===(n=u(t,r,null))&&(n=new s),h[a]=n)}return c._project(e,t,r instanceof o||!1===i?r:new o(r),n,i)}function u(e,t,r){void 0===r&&(r=null);var n=c._getTransformation(e,t,r);return null!==n?s.fromGE(n):null}Object.defineProperty(t,"__esModule",{value:!0});var c=null;t.isLoaded=function(){return!!c&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var l=null;t.load=function(){return l||(l=n.create((function(e,t){var n=i.load();r.e(10).then((function(){var o=[r(397)];(function(r){c=r,n.then((function(){c._enableProjection(i),e()}),(function(e){t(e)}))}).apply(null,o)})).catch(r.oe)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:a(e,e[0].spatialReference,t,r):a([e],e.spatialReference,t,r)[0]};var h={};t.projectMany=a,t.getTransformation=u,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=c._getTransformationBySuitability(e,t,r);if(null!==n){for(var i=[],o=0,a=n;o<a.length;o++){var u=a[o];i.push(s.fromGE(u))}return i}return[]}}.apply(null,n))||(e.exports=i)},366:function(e,t,r){var n,i;n=[r(402)],void 0===(i=function(e){"use strict";function t(e,r){if(!(this instanceof t))return new t(e,r);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),r&&("function"==typeof r?this.toBBox=r:this._initFormat(r)),this.clear()}function r(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function n(e,t){i(e,0,e.children.length,t,e)}function i(e,t,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,a=t;a<r;a++)s=e.children[a],o(i,e.leaf?n(s):s);return i}function o(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function s(e,t){return e.minX-t.minX}function a(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function c(e){return e.maxX-e.minX+(e.maxY-e.minY)}function l(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function h(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}function f(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function d(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,r,n,i,o){for(var s,a=[r,n];a.length;)(n=a.pop())-(r=a.pop())<=i||(s=r+Math.ceil((n-r)/i/2)*i,e(t,s,r,n,o),a.push(r,s,s,n))}return t.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!p(e,t))return r;for(var i,o,s,a,u=[];t;){for(i=0,o=t.children.length;i<o;i++)s=t.children[i],p(e,a=t.leaf?n(s):s)&&(t.leaf?r.push(s):f(e,a)?this._all(s,r):u.push(s));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!p(e,t))return!1;for(var n,i,o,s,a=[];t;){for(n=0,i=t.children.length;n<i;n++)if(o=t.children[n],p(e,s=t.leaf?r(o):o)){if(t.leaf||f(e,s))return!0;a.push(o)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(e,t){if(!e)return this;for(var n,i,o,s,a=this.data,u=this.toBBox(e),c=[],l=[];a||c.length;){if(a||(a=c.pop(),i=c[c.length-1],n=l.pop(),s=!0),a.leaf&&-1!==(o=r(e,a.children,t)))return a.children.splice(o,1),c.push(a),this._condense(c),this;s||a.leaf||!f(a,u)?i?(n++,a=i.children[n],s=!1):a=null:(c.push(a),l.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:s,compareMinY:a,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var o,s=r-t+1,a=this._maxEntries;if(s<=a)return n(o=d(e.slice(t,r+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(o=d([])).leaf=!1,o.height=i;var u,c,l,h,f=Math.ceil(s/a),p=f*Math.ceil(Math.sqrt(a));for(_(e,t,r,p,this.compareMinX),u=t;u<=r;u+=p)for(_(e,u,l=Math.min(u+p-1,r),f,this.compareMinY),c=u;c<=l;c+=f)h=Math.min(c+f-1,l),o.children.push(this._build(e,c,h,i-1));return n(o,this.toBBox),o},_chooseSubtree:function(e,t,r,n){for(var i,o,s,a,c,h,f,p;n.push(t),!t.leaf&&n.length-1!==r;){for(f=p=1/0,i=0,o=t.children.length;i<o;i++)c=u(s=t.children[i]),(h=l(e,s)-c)<p?(p=h,f=c<f?c:f,a=s):h===p&&c<f&&(f=c,a=s);t=a||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),o(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,i);var s=this._chooseSplitIndex(r,o,i),a=d(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,n(r,this.toBBox),n(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(e,t){this.data=d([e,t]),this.data.height=e.height+1,this.data.leaf=!1,n(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,o,s,a,c,l,f,p;for(l=f=1/0,n=t;n<=r-t;n++)a=h(o=i(e,0,n,this.toBBox),s=i(e,n,r,this.toBBox)),c=u(o)+u(s),a<l?(l=a,p=n,f=c<f?c:f):a===l&&c<f&&(f=c,p=n);return p},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:s,i=e.leaf?this.compareMinY:a;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var s,a,u=this.toBBox,l=i(e,0,t,u),h=i(e,r-t,r,u),f=c(l)+c(h);for(s=t;s<r-t;s++)a=e.children[s],o(l,e.leaf?u(a):a),f+=c(l);for(s=r-t-1;s>=t;s--)a=e.children[s],o(h,e.leaf?u(a):a),f+=c(h);return f},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)o(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():n(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},t}.apply(null,n))||(e.exports=i)},377:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(21),r(36),r(28)],void 0===(i=function(e,t,n,i,o){function s(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,f.init(),p.init(),d.init(),_.init(),m.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++){r(o[i].prototype,"getName",(function(e){return function(){return e.call(this,new Array(f.PE_NAME_MAX))}}))}for(var s=0,a=[t._pe.PeGeogtran,t._pe.PeProjcs];s<a.length;s++){r(a[s].prototype,"getParameters",(function(e){return function(){for(var r=new Array(f.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}))}r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return l(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var s=t._pe.getPointer(i),a=1;a<o;a++)n.push(t._pe.wrapPointer(s+r*a,t._pe.PeGTlistExtendedGTs))}return n}}));var u=t._pe._pe_getPeHorizonSize(),c=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var s=t._pe.getPointer(i),a=1;a<o;a++)n.push(t._pe.wrapPointer(s+u*a,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",c),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",c),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=f.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(f.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function a(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function u(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function c(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function l(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var s=0===e.length;for(o=0;o<r;o++)s&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}var h,f,p,d,_,m;Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!i("esri-wasm")},t.load=function(){return h||(h=o.create((function(t,n){Promise.all([r.e(61),r.e(109)]).then((function(){var i=[r(454)];(function(r){r({locateFile:function(t){return e.toUrl("./support/"+t)},onAbort:function(e){n(new Error(e))}}).then((function(e){s(e),t()}))}).apply(null,i)})).catch(r.oe)})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=c(n),o=n===i,s=t._pe.ensureFloat64(i),a=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,s);return a&&l(n,r,s,o),a}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=c(n),s=n===o,a=t._pe.ensureFloat64(o),u=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,a,i);return u&&l(n,r,a,s),u}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case f.PE_TRANSFORM_P_TO_G:return n(e,t,i);case f.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(f=t.PeDefs||(t.PeDefs={})),function(e){function r(e,r){var o=null,s=i[e];if(s||(s={},i[e]=s),s.hasOwnProperty(String(r)))o=s[r];else{var a=t._pe.PeFactory.prototype.factoryByType(e,r);t._pe.compare(a,t._pe.NULL)||(o=a,s[r]=o)}return n(o)}function n(e){if(e){var r=e.getType();switch(r){case f.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case f.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case f.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&f.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}var i={},o={};e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return r(f.PE_TYPE_COORDSYS,e)},e.factoryByType=r,e.fromString=function(e,r){var i=null,s=o[e];if(s||(s={},o[e]=s),s.hasOwnProperty(r))i=s[r];else{var a=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(a,t._pe.NULL)||(i=a,s[r]=i)}return n(i)},e.geogcs=function(e){return r(f.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return r(f.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return r(f.PE_TYPE_PROJCS,e)},e.unit=function(e){return r(f.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,s,a){var u=null,c=new t._pe.PeInteger(a);try{var l=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,s,c);if((a=c.val)&&(u=[l],a>1))for(var h=t._pe.getPointer(l),f=1;f<a;f++)u.push(t._pe.wrapPointer(h+r*f,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(c)}return u}}(p=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];a(i),i.getEntries().forEach((function(e){a(e);var t=e.getGeogtran();a(t),t.getParameters().forEach(a),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){a(e);var t=e.getDatum();a(t),a(t.getSpheroid()),a(e.getPrimem()),a(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=c(n),a=n===s,u=t._pe.ensureFloat64(s),h=0;i&&(h=t._pe.ensureFloat64(i));var f=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,u,h,o);return f&&l(n,r,u,a),f}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,i,o,s){var a,l;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_geog_to_dd,l=f.PE_DD_MAX;break;case"ddm":a=t._pe._pe_geog_to_ddm,l=f.PE_DDM_MAX;break;case"dms":a=t._pe._pe_geog_to_dms,l=f.PE_DMS_MAX}var h=0;r&&(h=t._pe.getPointer(r));var p=c(i),d=t._pe.ensureFloat64(p),_=u(n,l),m=a(h,n,d,o,t._pe.ensureInt32(_));if(m)for(var y=0;y<n;y++)s[y]=t._pe.UTF8ToString(_[y]);return m}function n(e,r,n,i,o){var s;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_dd_to_geog;break;case"ddm":s=t._pe._pe_ddm_to_geog;break;case"dms":s=t._pe._pe_dms_to_geog}var a=0;r&&(a=t._pe.getPointer(r));var u=i.map((function(e){return t._pe.ensureString(e)})),c=t._pe.ensureInt32(u),h=t._pe.ensureFloat64(new Array(2*n)),f=s(a,n,c,h);return f&&l(o,n,h),f}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,s,a){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var h=c(n),p=t._pe.ensureFloat64(h),d=u(r,f.PE_MGRS_MAX),_=t._pe.ensureInt32(d),m=t._pe._pe_geog_to_mgrs_extended(l,r,p,i,o,s,_);if(m)for(var y=0;y<r;y++)a[y]=t._pe.UTF8ToString(d[y]);return m},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(a),c=t._pe.ensureFloat64(new Array(2*r)),h=t._pe._pe_mgrs_to_geog_extended(s,r,u,i,c);return h&&l(o,r,c),h}}(d=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,s,a){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var h=c(n),p=t._pe.ensureFloat64(h),d=u(r,f.PE_MGRS_MAX),_=t._pe.ensureInt32(d),m=t._pe._pe_geog_to_usng(l,r,p,i,o,s,_);if(m)for(var y=0;y<r;y++)a[y]=t._pe.UTF8ToString(d[y]);return m},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),a=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_usng_to_geog(o,r,a,u);return c&&l(i,r,u),c}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=c(n),l=t._pe.ensureFloat64(a),h=u(r,f.PE_UTM_MAX),p=t._pe.ensureInt32(h),d=t._pe._pe_geog_to_utm(s,r,l,i,p);if(d)for(var _=0;_<r;_++)o[_]=t._pe.UTF8ToString(h[_]);return d},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(a),c=t._pe.ensureFloat64(new Array(2*r)),h=t._pe._pe_utm_to_geog(s,r,u,i,c);return h&&l(o,r,c),h}}(_=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,s;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&((s=r.get(n))[i]&&(o=s[i])),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),s||(s=[],r.set(n,s)),s[i]=o),o}}(m=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=s}.apply(null,n))||(e.exports=i)},378:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(379)],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,s=t.steps;o<s.length;o++){var a=s[o],u=r.fromGE(a);n.steps.push(u),i+=u.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var s=this._cached_projection[e.cacheKey(t,r)];return void 0===s?null:s},e}()}.apply(null,n))||(e.exports=i)},379:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},381:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(86),r(75)],void 0===(i=function(e,t,r,n){function i(e){return void 0===e&&(e=t.ZERO),[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,r,n,o,s,a){return void 0===a&&(a=i()),a[0]=e,a[1]=t,a[2]=r,a[3]=n,a[4]=o,a[5]=s,a}function s(e){return e[0]>=e[3]?0:e[3]-e[0]}function a(e){return e[1]>=e[4]?0:e[4]-e[1]}function u(e){return e[2]>=e[5]?0:e[5]-e[2]}function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function l(e){return 6===e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.create=i,t.fromValues=o,t.fromExtent=function(e,t){return void 0===t&&(t=i()),t[0]=e.xmin,t[1]=e.ymin,t[2]=e.zmin,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.zmax,t},t.toExtent=function(e,t){var n=isFinite(e[2])||isFinite(e[5]);return new r(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})},t.fromMinMax=function(e,t,r){return void 0===r&&(r=i()),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r},t.expandPointInPlace=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[3]&&(e[3]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[4]&&(e[4]=t[1]),t[2]<e[2]&&(e[2]=t[2]),t[2]>e[5]&&(e[5]=t[2])},t.expand=function(e,t,r){return void 0===r&&(r=e),l(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.max(e[3],t[3]),r[4]=Math.max(e[4],t[4]),r[5]=Math.max(e[5],t[5])):n.is(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[3]=Math.max(e[3],t[2]),r[4]=Math.max(e[4],t[3])):2===t.length?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[3]=Math.max(e[3],t[0]),r[4]=Math.max(e[4],t[1])):3===t.length&&(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.max(e[3],t[0]),r[4]=Math.max(e[4],t[1]),r[5]=Math.max(e[5],t[2])),r},t.expandWithBuffer=function(e,t,r,n,i){void 0===i&&(i=e);for(var o=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=0;h<n;h++)o=Math.min(o,t[r+3*h]),s=Math.min(s,t[r+3*h+1]),a=Math.min(a,t[r+3*h+2]),u=Math.max(u,t[r+3*h]),c=Math.max(c,t[r+3*h+1]),l=Math.max(l,t[r+3*h+2]);return i[0]=o,i[1]=s,i[2]=a,i[3]=u,i[4]=c,i[5]=l,i},t.expandWithOffset=function(e,t,r,n,i){return void 0===i&&(i=e),i[0]=Math.min(e[0],e[0]+t),i[3]=Math.max(e[3],e[3]+t),i[1]=Math.min(e[1],e[1]+r),i[4]=Math.max(e[4],e[4]+r),i[2]=Math.min(e[2],e[2]+n),i[5]=Math.max(e[5],e[5]+n),i},t.expandWithNestedArray=function(e,t,r,n){void 0===n&&(n=e);var i=t.length,o=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5];if(r)for(var h=0;h<i;h++){var f=t[h];o=Math.min(o,f[0]),s=Math.min(s,f[1]),a=Math.min(a,f[2]),u=Math.max(u,f[0]),c=Math.max(c,f[1]),l=Math.max(l,f[2])}else for(h=0;h<i;h++){f=t[h];o=Math.min(o,f[0]),s=Math.min(s,f[1]),u=Math.max(u,f[0]),c=Math.max(c,f[1])}return n[0]=o,n[1]=s,n[2]=a,n[3]=u,n[4]=c,n[5]=l,n},t.allFinite=function(e){for(var t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},t.width=s,t.depth=a,t.height=u,t.diameter=function(e){var t=s(e),r=u(e),n=a(e);return Math.sqrt(t*t+r*r+n*n)},t.center=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=e[0]+s(e)/2,t[1]=e[1]+a(e)/2,t[2]=e[2]+u(e)/2,t},t.size=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=s(e),t[1]=a(e),t[2]=u(e),t},t.maximumDimension=function(e){return Math.max(s(e),u(e),a(e))},t.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},t.containsPointWithMargin=function(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[2]>=e[2]-r&&t[0]<=e[3]+r&&t[1]<=e[4]+r&&t[2]<=e[5]+r},t.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},t.intersects=function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])},t.offset=function(e,t,r,n,i){return void 0===i&&(i=e),i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+n,i[3]=e[3]+t,i[4]=e[4]+r,i[5]=e[5]+n,i},t.setMin=function(e,t,r){return void 0===r&&(r=e),r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r},t.setMax=function(e,t,r){return void 0===r&&(r=e),r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e},t.set=c,t.empty=function(e){return e?c(e,t.NEGATIVE_INFINITY):i(t.NEGATIVE_INFINITY)},t.toRect=function(e,t){return t||(t=n.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},t.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e},t.is=l,t.isPoint=function(e){return 0===s(e)&&0===a(e)&&0===u(e)},t.equals=function(e,t,r){if(null==e||null==t)return e===t;if(!l(e)||!l(t))return!1;if(r){for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.wrap=function(e,t,r,n,i,s){return o(e,t,r,n,i,s,h)},t.POSITIVE_INFINITY=[-1/0,-1/0,-1/0,1/0,1/0,1/0],t.NEGATIVE_INFINITY=[1/0,1/0,1/0,-1/0,-1/0,-1/0],t.ZERO=[0,0,0,0,0,0];var h=i()}.apply(null,n))||(e.exports=i)},402:function(e,t,r){var n;void 0===(n=function(){"use strict";function e(r,n,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=n-i+1,c=Math.log(a),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(a-l)/a)*(u-a/2<0?-1:1);e(r,n,Math.max(i,Math.floor(n-u*l/a+h)),Math.min(o,Math.floor(n+(a-u)*l/a+h)),s)}var f=r[n],p=i,d=o;for(t(r,i,n),s(r[o],f)>0&&t(r,i,o);p<d;){for(t(r,p,d),p++,d--;s(r[p],f)<0;)p++;for(;s(r[d],f)>0;)d--}0===s(r[i],f)?t(r,i,d):t(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}function t(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function r(e,t){return e<t?-1:e>t?1:0}return function(t,n,i,o,s){e(t,n,i||0,o||t.length-1,s||r)}}.apply(null,[]))||(e.exports=n)},430:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(26),r(31),r(32),r(27),r(78),r(39),r(24),r(410),r(28),r(87),r(381),r(75),r(408),r(40),r(81),r(411),r(292),r(491),r(572),r(482),r(481),r(391),r(194),r(575)],void 0===(i=function(e,t,r,n,i,o,s,a,u,c,l,h,f,p,d,_,m,y,g,v,P,x,E,I,M,S){Object.defineProperty(t,"__esModule",{value:!0});var T=u.getLogger("esri.layers.graphics.data.QueryEngine"),b=function(e,t,r,n,i){void 0===t&&(t=null),this.attributes=e,this.geometry=r,this.centroid=n,this.filterFlags=i,this.groupId=-1,this.localId=t};t.Feature=b;var O=new Set,N=new c.MemCacheStorage(2e6),F=0,R=function(){function e(e){var t=this;this.capabilities={query:v.queryCapabilities},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.cacheSpatialQueries=e.cacheSpatialQueries||!1,this.featureStore=e.featureStore,this._changeHandle=this.featureStore.events.on("changed",(function(){return t.clearCache()})),this.timeInfo=e.timeInfo,this.cacheSpatialQueries&&(this._geometryQueryCache=new c.MemCache(F+++"$$",N)),this.fieldsIndex=new M(e.fields),e.scheduler&&e.task&&(this._frameQueue=new S.PromiseQueue,this._frameTask=e.scheduler.registerTask(e.task,(function(e){return t._update(e)}),(function(){return t._frameQueue.length>0})))}return e.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null),this.fieldsIndex.destroy()},Object.defineProperty(e.prototype,"featureAdapter",{get:function(){return this.featureStore.featureAdapter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullExtent",{get:function(){var e=this.featureStore.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:I.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeExtent",{get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:(this._timeExtent=E.getTimeExtent(this.timeInfo,this.featureStore),this._timeExtent):null},enumerable:!0,configurable:!0}),e.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null},e.prototype.executeQuery=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i;return n(this,(function(n){switch(n.label){case 0:t=a.clone(e),n.label=1;case 1:return n.trys.push([1,14,,15]),[4,this._schedule()];case 2:return n.sent(),[4,I.normalizeQuery(t,this.definitionExpression,this.spatialReference)];case 3:return t=n.sent(),[4,this._reschedule()];case 4:return n.sent(),[4,this._checkQuerySupport(t)];case 5:return t=n.sent(),[4,this._reschedule()];case 6:return n.sent(),[4,this._executeGeometryQuery(t)];case 7:return r=n.sent(),[4,this._reschedule()];case 8:return n.sent(),[4,r.executeObjectIdsQuery(t)];case 9:return r=n.sent(),[4,this._reschedule()];case 10:return n.sent(),[4,r.executeTimeQuery(t)];case 11:return r=n.sent(),[4,this._reschedule()];case 12:return n.sent(),[4,r.executeAttributesQuery(t)];case 13:return r=n.sent(),[3,15];case 14:if((i=n.sent())!==I.QUERY_ENGINE_EMPTY_RESULT)throw i;return r=new P.default([],null,this),[3,15];case 15:return[2,r.createQueryResponse(t)]}}))}))},e.prototype.executeQueryForCount=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i;return n(this,(function(n){switch(n.label){case 0:(t=a.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,n.label=1;case 1:return n.trys.push([1,14,,15]),[4,this._schedule()];case 2:return n.sent(),[4,I.normalizeQuery(t,this.definitionExpression,this.spatialReference)];case 3:return t=n.sent(),[4,this._reschedule()];case 4:return n.sent(),[4,this._checkQuerySupport(t)];case 5:return t=n.sent(),[4,this._reschedule()];case 6:return n.sent(),[4,this._executeGeometryQuery(t)];case 7:return r=n.sent(),[4,this._reschedule()];case 8:return n.sent(),[4,r.executeObjectIdsQuery(t)];case 9:return r=n.sent(),[4,this._reschedule()];case 10:return n.sent(),[4,r.executeTimeQuery(t)];case 11:return r=n.sent(),[4,this._reschedule()];case 12:return n.sent(),[4,r.executeAttributesQuery(t)];case 13:return[2,(r=n.sent()).size];case 14:if((i=n.sent())!==I.QUERY_ENGINE_EMPTY_RESULT)throw i;return[2,0];case 15:return[2]}}))}))},e.prototype.executeQueryForExtent=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i,o,s,u,c,l;return n(this,(function(n){switch(n.label){case 0:t=a.clone(e),i=t.outSR,n.label=1;case 1:return n.trys.push([1,14,,15]),[4,this._schedule()];case 2:return n.sent(),[4,I.normalizeQuery(t,this.definitionExpression,this.spatialReference)];case 3:return t=n.sent(),[4,this._reschedule()];case 4:return n.sent(),[4,this._checkQuerySupport(t)];case 5:return(t=n.sent()).returnGeometry=!0,t.returnCentroid=!1,t.outSR=null,[4,this._reschedule()];case 6:return n.sent(),[4,this._executeGeometryQuery(t)];case 7:return r=n.sent(),[4,this._reschedule()];case 8:return n.sent(),[4,r.executeObjectIdsQuery(t)];case 9:return r=n.sent(),[4,this._reschedule()];case 10:return n.sent(),[4,r.executeTimeQuery(t)];case 11:return r=n.sent(),[4,this._reschedule()];case 12:return n.sent(),[4,r.executeAttributesQuery(t)];case 13:return r=n.sent(),(o=r.size)?(f.set(w,f.NEGATIVE_INFINITY),this.featureStore.forEachBounds(r.items,(function(e){return f.expand(w,e)}),A),s={xmin:w[0],ymin:w[1],xmax:w[3],ymax:w[4],spatialReference:I.cleanFromGeometryEngine(this.spatialReference)},this.hasZ&&isFinite(w[2])&&isFinite(w[5])&&(s.zmin=w[2],s.zmax=w[5]),(u=g.project(s,r.spatialReference,i)).spatialReference=I.cleanFromGeometryEngine(i||this.spatialReference),u.xmax-u.xmin==0&&(c=h.getMetersPerUnitForSR(u.spatialReference),u.xmin-=c,u.xmax+=c),u.ymax-u.ymin==0&&(c=h.getMetersPerUnitForSR(u.spatialReference),u.ymin-=c,u.ymax+=c),this.hasZ&&null!=u.zmin&&null!=u.zmax&&u.zmax-u.zmin==0&&(c=h.getMetersPerUnitForSR(u.spatialReference),u.zmin-=c,u.zmax+=c),[2,{count:o,extent:u}]):[2,{count:o,extent:null}];case 14:if((l=n.sent())===I.QUERY_ENGINE_EMPTY_RESULT)return[2,{count:0,extent:null}];throw l;case 15:return[2]}}))}))},e.prototype.executeQueryForIds=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){return n(this,(function(r){return[2,this.executeQueryForIdSet(e,t).then((function(e){return s.valuesOfSet(e)}))]}))}))},e.prototype.executeQueryForIdSet=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i,o,s,u,c,l;return n(this,(function(n){switch(n.label){case 0:(t=a.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,n.label=1;case 1:return n.trys.push([1,13,,14]),[4,this._schedule()];case 2:return n.sent(),[4,I.normalizeQuery(t,this.definitionExpression,this.spatialReference)];case 3:return t=n.sent(),[4,this._reschedule()];case 4:return n.sent(),[4,this._executeGeometryQuery(t)];case 5:return r=n.sent(),[4,this._reschedule()];case 6:return n.sent(),[4,r.executeObjectIdsQuery(t)];case 7:return r=n.sent(),[4,this._reschedule()];case 8:return n.sent(),[4,r.executeTimeQuery(t)];case 9:return r=n.sent(),[4,this._reschedule()];case 10:return n.sent(),[4,r.executeAttributesQuery(t)];case 11:return r=n.sent(),[4,this._reschedule()];case 12:for(n.sent(),i=r.items,o=new Set,s=0,u=i;s<u.length;s++)c=u[s],o.add(r.featureAdapter.getObjectId(c));return[2,o];case 13:if((l=n.sent())===I.QUERY_ENGINE_EMPTY_RESULT)return[2,new Set];throw l;case 14:return[2]}}))}))},e.prototype.executeQueryForLatestObservations=function(e,t){var r=this;return this.timeInfo?this.executeQuery(e,t).then((function(e){return r._filterLatest(e,r.timeInfo)})):void T.error(new o("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))},e.prototype._schedule=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){return this._frameQueue?[2,this._frameQueue.push(e).then((function(e){return e}))]:[2,e]}))}))},e.prototype._reschedule=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){return this._frameQueue?[2,this._frameQueue.unshift(e).then((function(e){return e}))]:[2,e]}))}))},e.prototype._update=function(e){for(this._budget=e;!e.done&&this._frameQueue&&this._frameQueue.process();)e.madeProgress();this._budget=null},e.prototype._filterLatest=function(e,t){for(var n=t.trackIdField,i=t.startTimeField,o=t.endTimeField||i,s=new Map,a=[],u=0,c=e.features;u<c.length;u++){var l=c[u],h=l.attributes[n],f=l.attributes[o];(!s.has(h)||s.get(h).attributes[o]<f)&&s.set(h,l)}return s.forEach((function(e){return a.push(e)})),r({},e,{features:a})},e.prototype._getAll=function(){if(!this._allItems){var e=[];this.featureStore.forEach((function(t){return e.push(t)})),this._allItems=new P.default(e,null,this)}return this._allItems},e.prototype._executeGeometryQuery=function(e){return i(this,void 0,void 0,(function(){var t,r,o,s,a,u,c,l,h,f,p,d,_,y,g,v,E,I,M,S,T,b,O,N=this;return n(this,(function(F){switch(F.label){case 0:if(t=e.geometry,r=e.outSR,o=e.spatialRel,s=m.isValid(r)&&!m.equals(this.spatialReference,r),(a=this.cacheSpatialQueries?s?JSON.stringify({geometry:t,spatialRelationship:o,outSpatialReference:r}):JSON.stringify({geometry:t,spatialRelationship:o}):null)&&void 0!==(u=this._geometryQueryCache.get(a)))return[2,u];if(c=function(t){return i(N,void 0,void 0,(function(){var i;return n(this,(function(n){switch(n.label){case 0:return s&&(e.returnGeometry||e.returnCentroid)?[4,t.project(r)]:[3,2];case 1:return i=n.sent(),a&&this._geometryQueryCache.put(a,i,i.size||1),[2,i];case 2:return a&&this._geometryQueryCache.put(a,t,t.size||1),[2,t]}}))}))},!t)return[2,c(this._getAll())];if(l=this.featureAdapter,"esriSpatialRelDisjoint"!==o)return[3,5];if(!(h=this._searchFeatures(this._getQueryBBoxes(t))).length)return[2,c(this._getAll())];for(d=new Set,_=0,y=h;_<y.length;_++)g=y[_],d.add(l.getObjectId(g));return[4,this._reschedule(d)];case 1:return d=F.sent(),v=0,f=new Array(d.size),this.featureStore.forEach((function(e){return f[v++]=e})),p=d,[4,this._reschedule()];case 2:return F.sent(),[4,x.getSpatialQueryOperator(o,t,this)];case 3:return E=F.sent(),I=function(e){return!p.has(l.getObjectId(e))||E(l.getGeometry(e))},M=P.default.bind,[4,this._runSpatialFilter(f,I)];case 4:return T=new(M.apply(P.default,[void 0,F.sent(),t,this])),[2,c(T)];case 5:return(S=this._searchFeatures(this._getQueryBBoxes(t))).length?this._canExecuteSoloPass(t,e)?[2,c(new P.default(S,t,this))]:[4,x.getSpatialQueryOperator(o,t,this)]:(T=new P.default([],t,this),a&&this._geometryQueryCache.put(a,T,T.size||1),[2,T]);case 6:return b=F.sent(),[4,this._runSpatialFilter(S,(function(e){return b(l.getGeometry(e))}))];case 7:return O=F.sent(),[2,c(new P.default(O,t,this))]}}))}))},e.prototype._runSpatialFilter=function(e,t){return i(this,void 0,void 0,(function(){var r,o,s,a=this;return n(this,(function(u){return t?this._budget?(r=0,o=new Array,s=function(){return i(a,void 0,void 0,(function(){var i;return n(this,(function(n){switch(n.label){case 0:return r<e.length?(i=e[r],t(i)&&o.push(i),this._budget.done?[4,this._reschedule()]:[3,2]):[3,3];case 1:return n.sent(),[2,s()];case 2:return++r,[3,0];case 3:return[2]}}))}))},[2,this._reschedule().then((function(){return s()})).then((function(){return o}))]):[2,e.filter((function(e){return t(e)}))]:[2,e]}))}))},e.prototype._canExecuteSoloPass=function(e,t){var r=this.geometryType,n=t.spatialRel;return x.canQueryWithRBush(e)&&("esriSpatialRelEnvelopeIntersects"===n||"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n||"esriSpatialRelWithin"===n))},e.prototype._getQueryBBoxes=function(e){if(x.canQueryWithRBush(e)){if(_.isExtent(e))return[p.fromValues(e.xmin,e.ymin,e.xmax,e.ymax)];if(_.isPolygon(e))return e.rings.map((function(e){return p.fromValues(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))}))}return[d.getBoundsXY(p.create(),e)]},e.prototype._searchFeatures=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.featureStore.forEachInBounds(n,(function(e){O.add(e)}))}var i=new Array(O.size),o=0;return O.forEach((function(e){return i[o++]=e})),O.clear(),i},e.prototype._checkQuerySupport=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new o("feature-store:unsupported-query","Unsupported query options",{query:e});return[2,l.all([this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),x.checkSpatialQuerySupport(e,this.geometryType,this.spatialReference),g.checkProjectionSupport(this.spatialReference,e.outSR)]).then((function(){return e}))]}))}))},e.prototype._checkAttributesQuerySupport=function(e){var t=e.outFields,r=e.orderByFields,n=e.returnDistinctValues;if(r&&r.length>0){var i=r.map((function(e){return e.indexOf(" ASC")>-1?e.split(" ASC")[0]:e.indexOf(" DESC")>-1?e.split(" DESC")[0]:e}));y.validateFields(this.fieldsIndex,i,"orderByFields contains missing fields")}if(t&&t.length>0)y.validateFields(this.fieldsIndex,t,"outFields contains missing fields");else if(n)throw new o("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:e});y.validateWhere(this.fieldsIndex,e.where)},e.prototype._checkStatisticsQuerySupport=function(e){return i(this,void 0,void 0,(function(){var t,r,i,s,a,u,c,l,h,f,p;return n(this,(function(n){if(t=e.outStatistics,r=e.groupByFieldsForStatistics,i=e.having,s=r&&r.length,a=t&&t.length,i){if(!s||!a)throw new o("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});y.validateHaving(this.fieldsIndex,i,t)}if(a){if(t.some((function(e){return"exceedslimit"===e.statisticType})))return[2];for(u=t.map((function(e){return e.onStatisticField})),y.validateFields(this.fieldsIndex,u,"onStatisticFields contains missing fields"),s&&y.validateFields(this.fieldsIndex,r,"groupByFieldsForStatistics contains missing fields"),c=0,l=t;c<l.length;c++)if(h=l[c],f=h.onStatisticField,p=h.statisticType,(!s||"count"!==p)&&f&&y.hasInvalidFieldType(f,this.fieldsIndex))throw new o("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:h,query:e})}return[2]}))}))},e}();t.default=R;var A=f.create(),w=f.create()}.apply(null,n))||(e.exports=i)},480:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(31),r(32),r(22),r(20),r(27),r(90),r(24),r(33),r(381),r(75),r(81),r(79),r(570),r(543),r(544)],void 0===(i=function(e,t,r,n,i,o,s,a,u,c,l,h,f,p,d,_,m){Object.defineProperty(t,"__esModule",{value:!0});var y=u.getLogger("esri.layers.graphics.data.FeatureStore"),g=function(){function e(e){this.geometryInfo=e,this._boundsStore=new d.BoundsStore,this._featuresById=new Map,this._markedIds=new Set,this.events=new a,this.featureAdapter=m.optimizedFeatureQueryEngineAdapter}return Object.defineProperty(e.prototype,"geometryType",{get:function(){return this.geometryInfo.geometryType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasM",{get:function(){return this.geometryInfo.hasM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasZ",{get:function(){return this.geometryInfo.hasZ},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullBounds",{get:function(){var e=this;if(!this.numFeatures)return null;var t=h.create(h.NEGATIVE_INFINITY);return this._featuresById.forEach((function(r){var n=e._boundsStore.get(r.objectId);n&&(t[0]=Math.min(n[0],t[0]),t[1]=Math.min(n[1],t[1]),t[2]=Math.max(n[2],t[2]),t[3]=Math.max(n[3],t[3]))})),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storeStatistics",{get:function(){var e=0;return this._featuresById.forEach((function(t){t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this._add(e),this._emitChanged()},e.prototype.addMany=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._add(n)}this._emitChanged()},e.prototype.clear=function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()},e.prototype.removeById=function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null},e.prototype.removeManyById=function(e){this._boundsStore.invalidateIndex();for(var t=0,r=e;t<r.length;t++){var n=r[t],i=this._featuresById.get(n);i&&this._remove(i)}this._emitChanged()},e.prototype.forEachBounds=function(e,t,r){for(var n=0,i=e;n<i.length;n++){var o=i[n],s=this._boundsStore.get(o.objectId);s&&t(l.fromRect(r,s))}},e.prototype.getFeature=function(e){return this._featuresById.get(e)},e.prototype.has=function(e){return this._featuresById.has(e)},e.prototype.forEach=function(e){this._featuresById.forEach((function(t){return e(t)}))},e.prototype.forEachInBounds=function(e,t){var r=this;this._boundsStore.forEachInBounds(e,(function(e){t(r._featuresById.get(e))}))},e.prototype.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()},e.prototype.sweep=function(){var e=this,t=!1;this._featuresById.forEach((function(r,n){e._markedIds.has(n)||(t=!0,e._remove(r))})),this._markedIds.clear(),t&&this._emitChanged()},e.prototype.executeTileQuery=function(e,t,i){return n(this,void 0,void 0,(function(){var n,o,s,a,u,c,l,p,d,m,y,g,v,P;return r(this,(function(r){return n=i.returnGeometry,o=i.returnCentroid,s=i.returnOutline,a=i.pixelBuffer,u=new Set,c=[],l=a*e.resolution,p=h.pad(e.bounds,l,h.create()),_.createTileFeatures(c,u,this.geometryInfo,this,p,n,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}),("esriGeometryPoint"===this.geometryType||o)&&(d=f.getInfo(t))&&(m=d.valid,y=m[0],g=m[1],p[0]<y&&(v=h.fromValues(g-l,p[1],g,p[3]),_.createTileFeatures(c,u,this.geometryInfo,this,v,n,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[g,e.bounds[3]]})),p[2]>g&&(P=h.fromValues(y,p[1],y+l,p[3]),_.createTileFeatures(c,u,this.geometryInfo,this,P,n,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[y-g+e.bounds[0],e.bounds[3]]}))),c.sort((function(e,t){return e.localId-t.localId})),[2,{features:c,objectIds:u}]}))}))},e.prototype._emitChanged=function(){this.events.emit("changed",void 0)},e.prototype._add=function(e){if(e){var t=e.objectId;if(null==t)return void y.error(new s("featurestore:invalid-feature","feature id is missing",{feature:e}));var r,n=this._featuresById.get(t);if(this._markedIds.add(t),n?(e.localId=n.localId,r=this._boundsStore.get(t),this._boundsStore.delete(t)):c.isSome(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=p.getBoundsOptimizedGeometry(r||h.create(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,r),this._featuresById.set(t,e)}},e.prototype._remove=function(e){return c.isSome(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e},e}();t.default=g}.apply(null,n))||(e.exports=i)},543:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(26),r(31),r(32),r(75),r(79),r(70),r(430),r(391)],void 0===(i=function(e,t,r,n,i,o,s,a,u,c){function l(e,t,r,n,i){if(!t.has(r.objectId)){var o=c.getCentroid(n,r,i),s=r.attributes;o&&(t.add(r.objectId),e.push(new u.Feature(s,r.localId,null,o)))}}function h(e,t,r,n,i,o,s,a){if(!t.has(r.objectId)){var c=r.attributes,l=n(p(d,r.geometry,i,o,a,s),!1,!1);l&&(t.add(r.objectId),e.push(new u.Feature(c,r.localId,l,null)))}}function f(e,t,r,n,i,o,s,a,l){if(!t.has(r.objectId)){var h=c.getCentroid(n,r,i),f=r.attributes,_=o(p(d,r.geometry,s,a,l,i),!1,!1);_&&h&&(t.add(r.objectId),e.push(new u.Feature(f,r.localId,_,h)))}}function p(e,t,r,n,i,o){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var a=t.coords,u=t.lengths;if(!u.length)return e.coords[0]=s.quantizeX(o,a[0]),e.coords[1]=s.quantizeY(o,a[1]),e.coords.length=r,e;for(var c,l,h,f,p=0,d=0,_=d,m=0,y=u;m<y.length;m++){var g=y[m];if(!(g<n)){d=_,h=c=s.quantizeX(o,a[p]),f=l=s.quantizeY(o,a[p+1]),e.coords[d]=h,e.coords[d+1]=f,p+=r;var v=(h=s.quantizeX(o,a[p]))-c,P=(f=s.quantizeY(o,a[p+1]))-l,x=P/v;d+=2,e.coords[d]=v,e.coords[d+1]=P,c=h,l=f,p+=r;for(var E=2;E<g;E++){if(h=s.quantizeX(o,a[p]),f=s.quantizeY(o,a[p+1]),h!==c||f!==l){var I=h-c,M=f-l,S=M/I;(x===S||!isFinite(x)&&!isFinite(S))&&(i||(P>=0&&M>=0||P<=0&&M<=0)&&(v>=0&&I>=0||v<=0&&I<=0))?(v+=I,P+=M):(v=I,P=M,d+=2),e.coords[d]=v,e.coords[d+1]=P,x=S,c=h,l=f}p+=r}var T=(d+2-_)/2;T>=n&&(e.lengths.push(T),_=d+2)}}return e.coords.length>_&&(e.coords.length=_),e.coords.length?e:null}Object.defineProperty(t,"__esModule",{value:!0});var d=new a.default,_={esriGeometryPoint:s.convertToPoint,esriGeometryPolyline:s.convertToPolyline,esriGeometryPolygon:s.convertToPolygon,esriGeometryMultipoint:s.convertToMultipoint};t.executeTileQueryForIds=function(e,t,r){var n=r.pixelBuffer*t.resolution,i=o.pad(t.bounds,n,o.create()),s=[];return e.featureStore.forEachInBounds(i,(function(t){return s.push(e.featureAdapter.getObjectId(t))})),s},t.createTileFeatures=function(e,t,r,n,i,o,s,a,u){var c=_[r.geometryType],p=m[r.geometryType],d="esriGeometryPolygon"===r.geometryType&&!a,y=r.hasZ?r.hasM?4:3:r.hasM?3:2;s&&!o?n.forEachInBounds(i,(function(n){return l(e,t,n,r,u)})):o&&!s?n.forEachInBounds(i,(function(r){return h(e,t,r,c,y,p,u,d)})):n.forEachInBounds(i,(function(n){return f(e,t,n,r,u,c,y,p,d)}))};var m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0};t.quantizeOptimizedGeometryForDisplay=p}.apply(null,n))||(e.exports=i)},570:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(36),r(366),r(285)],void 0===(i=function(e,t,r,n){function i(e,t){return o.minX=t[0],o.minY=t[1],o.maxX=t[2],o.maxY=t[3],e.search(o)}Object.defineProperty(t,"__esModule",{value:!0});var o={minX:0,minY:0,maxX:0,maxY:0},s=function(){function e(){var e=this;this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=n(9,r("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(e._indexInvalid){var t=new Array(e._idByBounds.size),r=0;e._idByBounds.forEach((function(e,n){t[r++]=n})),e._indexInvalid=!1,e._index.clear(),e._index.load(t)}else e._boundsToLoad.length&&(e._index.load(e._boundsToLoad.filter((function(t){return e._idByBounds.has(t)}))),e._boundsToLoad.length=0)}}return e.prototype.clear=function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()},e.prototype.delete=function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))},e.prototype.forEachInBounds=function(e,t){this._loadIndex();for(var r=0,n=i(this._index,e);r<n.length;r++){var o=n[r];t(this._idByBounds.get(o))}},e.prototype.get=function(e){return this._boundsById.get(e)},e.prototype.has=function(e){return this._boundsById.has(e)},e.prototype.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)},e.prototype.set=function(e,t){if(!this._indexInvalid){var r=this._boundsById.get(e);r&&(this._index.remove(r),this._idByBounds.delete(r))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||this._boundsToLoad.push(t))},e}();t.BoundsStore=s}.apply(null,n))||(e.exports=i)},572:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(26),r(31),r(32),r(78),r(33),r(28),r(161),r(81),r(79),r(573),r(411),r(292),r(481),r(391)],void 0===(i=function(e,t,r,n,i,o,s,a,u,c,l,h,f,p,d,_){Object.defineProperty(t,"__esModule",{value:!0});var m=function(){function e(e,t,r){this.items=e,this.queryGeometry=t,this.definitionExpression=r.definitionExpression,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.fieldsIndex=r.fieldsIndex,this.timeInfo=r.timeInfo,this.featureAdapter=r.featureAdapter}return Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.createQueryResponse=function(e){var t;return t=e.outStatistics?e.outStatistics.some((function(e){return"exceedslimit"===e.statisticType}))?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e),e.returnQueryGeometry&&(c.isValid(e.outSR)&&!c.equals(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=_.cleanFromGeometryEngine(r({spatialReference:e.outSR},p.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR))):t.queryGeometry=_.cleanFromGeometryEngine(r({spatialReference:e.outSR},this.queryGeometry))),t},e.prototype.executeAttributesQuery=function(t){var r=f.getWhereClause(t.where,this.fieldsIndex);if(!r)return a.resolve(this);if(r.isStandardized){for(var n=0,i=[],o=0,s=this.items;o<s.length;o++){var u=s[o];r.testFeature(u,this.featureAdapter)&&(i[n++]=u)}var c=new e(i,this.queryGeometry,this);return c.definitionExpression=t.where,a.resolve(c)}return a.reject(new TypeError("Where clause is not standardized"))},e.prototype.executeObjectIdsQuery=function(t){if(!t.objectIds||!t.objectIds.length)return a.resolve(this);var r=o.createSetFromValues(t.objectIds),n=this.featureAdapter.getObjectId;return a.resolve(new e(this.items.filter((function(e){return r.has(n(e))})),this.queryGeometry,this))},e.prototype.executeTimeQuery=function(t){var r=d.getTimeOperator(this.timeInfo,t.timeExtent,this.featureAdapter);if(!s.isSome(r))return a.resolve(this);var n=this.items.filter(r);return a.resolve(new e(n,this.queryGeometry,this))},e.prototype.project=function(t){return i(this,void 0,void 0,(function(){var r,i,o=this;return n(this,(function(n){switch(n.label){case 0:return!t||c.equals(this.spatialReference,t)?[2,this]:(r=this.featureAdapter,[4,p.projectMany(this.items.map((function(e){return _.getGeometry(o,r.getGeometry(e))})),this.spatialReference,t)]);case 1:return i=n.sent(),[2,new e(i.map((function(e,t){return r.cloneWithGeometry(o.items[t],l.convertFromGeometry(e,o.hasZ,o.hasM))})),this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:t,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})]}}))}))},e.prototype._createFeatureQueryResponse=function(e){var t=this,r=this.items,n=this,i=n.geometryType,o=n.hasM,s=n.hasZ,a=n.objectIdField,c=n.spatialReference,l=e.outFields,h=e.outSR,f=e.quantizationParameters,p=e.resultRecordCount,d=e.resultOffset,m=e.returnZ,y=e.returnM,g=!1;if(null!=p&&null!=d){var v=d+p;g=r.length>v,r=r.slice(d,Math.min(r.length,v))}return{exceededTransferLimit:g,features:this._createFeatures(e,r),fields:l&&l.map((function(e){return t.fieldsIndex.get(e)})),geometryType:i,hasM:o&&y,hasZ:s&&m,objectIdFieldName:a,spatialReference:_.cleanFromGeometryEngine(h||c),transform:f&&u.toQuantizationTransform(f)||null}},e.prototype._createFeatures=function(e,t){var r=new h.default(e,this.featureAdapter,this.fieldsIndex),n=this.hasM,i=this.hasZ,o=e.orderByFields,s=e.quantizationParameters,a=e.returnGeometry,c=e.returnCentroid,l=e.maxAllowableOffset,f=e.returnZ,p=void 0!==f&&f,d=e.returnM,m=i&&p,y=n&&(void 0!==d&&d),g=[],v=0;if(t.length&&o&&o.length){var P=o[0].split(" "),x=P[0],E=this.fieldsIndex.get(x),I="DESC"===P[1];t.sort((function(e,t){var n=r.getFieldValue(e,x,E),i=r.getFieldValue(t,x,E);if("number"==typeof n&&"number"==typeof i)return I?i-n:n-i;if("string"==typeof n&&"string"==typeof i){var o=n.toUpperCase(),s=i.toUpperCase();return(I?o>s:o<s)?-1:(I?o<s:o>s)?1:0}}))}if(a||c){var M=u.toQuantizationTransform(s);if(a&&!c)for(var S=0,T=t;S<T.length;S++){var b=T[S];g[v++]={attributes:r.getAttributes(b),geometry:_.getGeometry(this,this.featureAdapter.getGeometry(b),l,M,m,y)}}else if(!a&&c)for(var O=0,N=t;O<N.length;O++){b=N[O];g[v++]={attributes:r.getAttributes(b),centroid:_.transformCentroid(this,this.featureAdapter.getCentroid(b,this),M)}}else for(var F=0,R=t;F<R.length;F++){b=R[F];g[v++]={attributes:r.getAttributes(b),centroid:_.transformCentroid(this,this.featureAdapter.getCentroid(b,this),M),geometry:_.getGeometry(this,this.featureAdapter.getGeometry(b),l,M,m,y)}}}else for(var A=0,w=t;A<w.length;A++){b=w[A];var G=r.getAttributes(b);G&&(g[v++]={attributes:G})}return g},e.prototype._createExceedsLimitQueryResponse=function(e){for(var t=!1,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=0,s=e.outStatistics;o<s.length;o++){var a=s[o];if("exceedslimit"===a.statisticType){r=null!=a.maxPointCount?a.maxPointCount:Number.POSITIVE_INFINITY,n=null!=a.maxRecordCount?a.maxRecordCount:Number.POSITIVE_INFINITY,i=null!=a.maxVertexCount?a.maxVertexCount:Number.POSITIVE_INFINITY;break}}if("esriGeometryPoint"===this.geometryType)t=this.items.length>r;else if(this.items.length>n)t=!0;else{var u=this.hasZ?this.hasM?4:3:this.hasM?3:2,c=this.featureAdapter;t=this.items.reduce((function(e,t){var r=c.getGeometry(t);return e+(r&&r.coords.length||0)}),0)/u>i}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}},e.prototype._createStatisticsQueryResponse=function(e){for(var t=new h.default(e,this.featureAdapter,this.fieldsIndex),r=e.outStatistics,n=[],i=[],o=e.groupByFieldsForStatistics,s=e.having,a=o&&o.length,u=a&&o[0],c=this.fieldsIndex.get(u),l=!c,f={},p={},d={},_={attributes:{}},m=0,y=r;m<y.length;m++){var g=y[m],v=g.outStatisticFieldName,P=g.statisticType,x="exceedslimit"!==P?g.onStatisticField:void 0,E=this.fieldsIndex.get(x),I=a&&(x===u||l)&&"count"===P;if(a){f[x]||(f[x]=this._calculateUniqueValues(t,u,c));var M=f[x];for(var S in M){var T=M[S],b=T.count,O=T.data,N=T.items;if(!s||t.validateItems(N,s)){var F=p[O]||{attributes:{}},R=null;if(I)R=b;else R=(A=this._calculateStatistics(N,t,x,E))[w="var"===P?"variance":P];F.attributes[v]=R,F.attributes[l?"EXPR_1":u]=O,p[O]=F}}}else{d[x]||(d[x]=this._calculateStatistics(this.items,t,x,E));var A=d[x],w="var"===P?"variance":P;_.attributes[v]=A[w]}i.push({name:v,alias:v,type:"esriFieldTypeDouble"})}if(a)for(var G in p)n.push(p[G]);else n.push(_);return{fields:i,features:n}},e.prototype._calculateStatistics=function(e,t,r,n){for(var i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=null,a=null,u=null,c=null,l=[],h=0,f=0;f<e.length;f++){var p=e[f];"string"==typeof(y=t.getFieldValue(p,r,n))?h++:null==y||isNaN(y)||(s+=y,i=Math.min(i,y),o=Math.max(o,y),l.push(y),h++)}if(h){a=s/h;for(var d=0,_=0,m=l;_<m.length;_++){var y=m[_];d+=Math.pow(y-a,2)}c=h>1?d/(h-1):0,u=Math.sqrt(c)}else i=null,o=null;return{avg:a,count:h,max:o,min:i,stddev:u,sum:s,variance:c}},e.prototype._calculateUniqueValues=function(e,t,r){for(var n={},i=0,o=this.items;i<o.length;i++){var s=o[i],a=e.getFieldValue(s,t,r);(null==a||"string"==typeof a&&""===a.trim())&&(a=null),null==n[a]?n[a]={count:1,data:a,items:[s]}:(n[a].count++,n[a].items.push(s))}return n},e}();t.default=m}.apply(null,n))||(e.exports=i)},573:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(33),r(411)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=t;var i=e.outFields;if(i&&-1===i.indexOf("*")){this.outFields=i;for(var o=0,s=0,a=i;s<a.length;s++){var u=a[s],c=n.getExpressionFromFieldName(u),l=this.fieldsIndex.get(c),h=l?null:n.getWhereClause(c,r),f=l?l.name:n.getAliasFromFieldName(u)||"FIELD_EXP_"+o++;this._fieldDataCache.set(u,{alias:f,clause:h})}}}return e.prototype.getAttributes=function(e){var t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)},e.prototype.getFieldValue=function(e,t,r){var i=r?r.name:t,o=null;return this._fieldDataCache.has(i)?o=this._fieldDataCache.get(i).clause:r||(o=n.getWhereClause(t,this.fieldsIndex),this._fieldDataCache.set(i,{alias:i,clause:o})),r?this.featureAdapter.getAttribute(e,i):o.calculateValue(e,this.featureAdapter)},e.prototype.validateItem=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)},e.prototype.validateItems=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)},e.prototype._processAttributesForOutFields=function(e){var t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);for(var r={},n=0,i=t;n<i.length;n++){var o=i[n],s=this._fieldDataCache.get(o),a=s.alias,u=s.clause;r[a]=u?u.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,a)}return r},e.prototype._processAttributesForDistinctValues=function(e){if(r.isNone(e)||!this.returnDistinctValues)return e;var t=this.outFields,n=[];if(t)for(var i=0,o=t;i<o.length;i++){var s=o[i],a=this._fieldDataCache.get(s).alias;n.push(e[a])}else for(var a in e)n.push(e[a]);var u=(t||["*"]).join(",")+"="+n.join(","),c=this._returnDistinctMap.get(u)||0;return this._returnDistinctMap.set(u,++c),c>1?null:e},e}();t.default=i}.apply(null,n))||(e.exports=i)},575:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._deferreds=[],this._values=[]}return e.prototype.push=function(e){var t=this;return r.create((function(r,n){t._deferreds.push({resolve:r,reject:n}),t._values.push(e)}))},e.prototype.unshift=function(e){var t=this;return r.create((function(r,n){t._deferreds.unshift({resolve:r,reject:n}),t._values.unshift(e)}))},Object.defineProperty(e.prototype,"length",{get:function(){return this._deferreds.length},enumerable:!0,configurable:!0}),e.prototype.process=function(){return 0!==this.length&&(this._deferreds.shift().resolve(this._values.shift()),!0)},e.prototype.cancelAll=function(){for(var e=r.createAbortError(),t=0,n=this._deferreds;t<n.length;t++)n[t].reject(e);this._deferreds.length=0,this._values.length=0},e}();t.PromiseQueue=n}.apply(null,n))||(e.exports=i)},70:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t};t.default=r}.apply(null,n))||(e.exports=i)},730:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(26),r(36),r(39),r(110)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.defaultPointSymbolJSON:"esriGeometryPolyline"===e?o.defaultPolylineSymbolJSON:o.defaultPolygonSymbolJSON}}},t.createDefaultAttributesFunction=function(e,t){if(n("csp-restrictions"))return function(){var n;return r(((n={})[t]=null,n),e)};try{var i="this."+t+" = null;";for(var o in e)i+="this."+o+" = "+JSON.stringify(e[o])+";";var s=new Function(i);return function(){return new s}}catch(n){return function(){var n;return r(((n={})[t]=null,n),e)}}},t.createDefaultTemplate=function(e){return void 0===e&&(e={}),[{name:"New Feature",description:"",prototype:{attributes:i.clone(e)}}]}}.apply(null,n))||(e.exports=i)}}]);
//# sourceMappingURL=13.19fb10c3.chunk.js.map