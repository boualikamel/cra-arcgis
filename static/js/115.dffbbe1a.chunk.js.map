{"version":3,"sources":["../node_modules/arcgis-js-api/views/2d/layers/features/processors/HeatmapProcessor.js","../node_modules/arcgis-js-api/renderers/support/heatmapUtils.js","../node_modules/arcgis-js-api/views/2d/layers/features/processors/BaseProcessor.js"],"names":["define","e","t","r","o","n","i","a","p","s","Object","defineProperty","value","d","apply","this","arguments","type","updating","prototype","update","_set","onTileData","addOrUpdate","length","calculateHeatmapIntensityInfo","config","renderer","remoteClient","invoke","tileKey","key","id","intensityInfo","transferList","matrix","onTileError","error","property","subclass","declared","default","Uint32Array","u","Float64Array","f","buffer","Uint8Array","c","l","h","g","Math","floor","clamp","round","exp","pow","sqrt","PI","generateGradient","document","createElement","getContext","height","width","clearRect","createLinearGradient","colorStops","ratio","color","addColorStop","max","fillStyle","fillRect","getImageData","data","blurRadius","fieldOffset","field","m","Number","NEGATIVE_INFINITY","y","v","geometry","M","attributes","b","x","w","I","A","min","U","F","D","N","R","C","drawHeatmap","canvas","set","Uint8ClampedArray","putImageData","createHeatmapImageData","createKernel","createValueFunction","initialize","destroy","get","enumerable","configurable","toJSON","readOnly","constructOnly","dependsOn","HandleOwner"],"mappings":"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","file":"static/js/115.dffbbe1a.chunk.js","sourcesContent":["// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../../../../core/tsSupport/declareExtendsHelper\",\"../../../../../core/tsSupport/decorateHelper\",\"../../../../../core/tsSupport/generatorHelper\",\"../../../../../core/tsSupport/awaiterHelper\",\"../../../../../core/accessorSupport/decorators\",\"../../../../../renderers/support/heatmapUtils\",\"./BaseProcessor\"],function(e,t,r,o,n,i,a,p,s){Object.defineProperty(t,\"__esModule\",{value:!0});var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=\"heatmap\",t.updating=!1,t}return r(t,e),t.prototype.update=function(e){return i(this,void 0,void 0,function(){return n(this,function(t){return this._set(\"config\",e),[2]})})},t.prototype.onTileData=function(e,t,r){if(t&&t.addOrUpdate&&t.addOrUpdate.length>0){var o=p.calculateHeatmapIntensityInfo(t.addOrUpdate,this.config.renderer,512,512);return this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.key.id,intensityInfo:o},{transferList:[o.matrix]})}return this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.key.id,intensityInfo:null},r)},t.prototype.onTileError=function(e,t,r){return this.remoteClient.invoke(\"tileRenderer.onTileError\",{tileKey:e.id,error:t},r)},o([a.property()],t.prototype,\"config\",void 0),o([a.property()],t.prototype,\"updating\",void 0),t=o([a.subclass(\"esri.views.2d.layers.features.processors.HeatmapProcessor\")],t)}(a.declared(s.default));t.default=d});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../core/global\",\"../../core/mathUtils\"],function(t,e,r,a){function n(t,e,r,a){for(var n,i=e.blurRadius,o=e.fieldOffset,c=e.field,l=new Float64Array(r*a),h=u(i),g=Math.round(3*i),m=Number.NEGATIVE_INFINITY,d=f(c,o),y=0,v=t;y<v.length;y++)for(var p=v[y],s=p.geometry,M=p.attributes,b=s.x-g,w=s.y-g,I=Math.max(0,b),x=Math.max(0,w),A=Math.min(a,s.y+g),U=Math.min(r,s.x+g),F=+d(M),D=x;D<A;D++)for(var N=h[D-w],R=I;R<U;R++){var C=h[R-b],E=D*r+R;n=l[E]+=N*C*F,n>m&&(m=n)}return{matrix:l.buffer,max:m}}function i(t,e,r,a,n,i){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);var u=t.getImageData(0,0,e,e);r&&a&&u.data.set(new Uint8ClampedArray(o(e,r,a,n,i))),t.putImageData(u,0,0)}function o(t,e,r,n,i){for(var o=new Uint32Array(t*t),u=(\"buffer\"in e?e:new Float64Array(e)),f=(\"buffer\"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer)),c=f.length/(i-n),l=0;l<u.length;l++){var h=u[l],g=Math.floor((h-n)*c);o[l]=f[a.clamp(g,0,f.length-1)]}return o.buffer}function u(t){for(var e=Math.round(3*t),r=2*t*t,a=new Float64Array(2*e+1),n=0;n<=a.length;n++)a[n]=Math.exp(-Math.pow(n-e,2)/r)/Math.sqrt(2*Math.PI)*(t/2);return a}function f(t,e){return\"function\"==typeof t?t:t?\"string\"==typeof e?function(e){return-1*+e[t]}:function(r){return+r[t]+e}:function(){return 1}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.generateGradient=function(){if(!(\"document\"in r))return function(){return null};var t=document.createElement(\"canvas\"),e=t.getContext(\"2d\");return t.height=512,t.width=1,function(r){e.clearRect(0,0,1,t.height);for(var a=e.createLinearGradient(0,0,0,t.height),n=0,i=r.colorStops;n<i.length;n++){var o=i[n],u=o.ratio,f=o.color;a.addColorStop(Math.max(u,.001),\"rgba(\"+f[0]+\", \"+f[1]+\", \"+f[2]+\", \"+f[3]+\")\")}return e.fillStyle=a,e.fillRect(0,0,1,t.height),e.getImageData(0,0,1,t.height).data}}(),e.calculateHeatmapIntensityInfo=n,e.drawHeatmap=i,e.createHeatmapImageData=o,e.createKernel=u,e.createValueFunction=f});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../../../../core/tsSupport/declareExtendsHelper\",\"../../../../../core/tsSupport/decorateHelper\",\"../../../../../core/tsSupport/generatorHelper\",\"../../../../../core/tsSupport/awaiterHelper\",\"../../../../../core/HandleOwner\",\"../../../../../core/accessorSupport/decorators\"],function(e,t,r,o,p,n,l,s){Object.defineProperty(t,\"__esModule\",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initialize=function(){},t.prototype.destroy=function(){},Object.defineProperty(t.prototype,\"supportsTileUpdates\",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"spatialReference\",{get:function(){var e=this.get(\"tileStore.tileScheme.spatialReference\");return e&&e.toJSON()||null},enumerable:!0,configurable:!0}),o([s.property({readOnly:!0})],t.prototype,\"supportsTileUpdates\",null),o([s.property({constructOnly:!0})],t.prototype,\"remoteClient\",void 0),o([s.property({constructOnly:!0})],t.prototype,\"service\",void 0),o([s.property({dependsOn:[\"tileStore.tileScheme.spatialReference\"]})],t.prototype,\"spatialReference\",null),o([s.property({constructOnly:!0})],t.prototype,\"tileInfo\",void 0),o([s.property({constructOnly:!0})],t.prototype,\"tileStore\",void 0),t=o([s.subclass(\"esri.views.2d.layers.features.processors.BaseProcessor\")],t)}(s.declared(l.HandleOwner));t.default=c});"],"sourceRoot":""}