{"version":3,"sources":["../node_modules/arcgis-js-api/layers/MapImageLayer.js","../node_modules/arcgis-js-api/layers/support/TimeInfo.js","../node_modules/arcgis-js-api/layers/mixins/TemporalLayer.js","../node_modules/arcgis-js-api/layers/support/TimeReference.js","../node_modules/arcgis-js-api/layers/support/ExportImageParameters.js"],"names":["define","e","r","t","o","a","i","p","s","n","l","y","u","c","d","m","h","g","v","S","f","x","b","w","O","I","L","call","this","alwaysRefetch","dpi","gdbVersion","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","labelsVisible","isReference","operationalLayerType","sourceJSON","sublayers","type","url","prototype","normalizeCtorArgs","load","isSome","signal","addResolvingPromise","loadFromPortal","supportedTypes","then","_fetchService","when","readImageFormat","supportedImageFormatTypes","indexOf","createExportImageParameters","pixelRatio","version","clone","shiftCentralMeridian","ExportImageParameters","layer","scale","getScale","extent","width","toJSON","destroy","rotation","spatialReference","wkid","JSON","stringify","timeExtent","start","end","time","bbox","xmin","ymin","xmax","ymax","bboxSR","imageSR","size","fetchImage","responseType","timestamp","query","_ts","parsedUrl","path","Date","now","dynamicLayers","capabilities","exportMap","supportsDynamicLayers","data","catch","isAbortError","error","reject","label","read","origin","sent","ssl","replace","property","json","write","reader","origins","service","source","Boolean","enabled","overridePolicy","readOnly","value","subclass","declared","TemporalLayer","ScaleRangeLayer","RefreshableLayer","SublayersOwner","ArcGISMapService","ArcGISService","OperationalLayer","PortalLayer","MultiOriginJSONMixin","cumulative","endField","fullTimeExtent","hasLiveData","interval","startField","timeReference","trackIdField","useTime","readFullTimeExtent","Array","isArray","length","writeFullTimeExtent","getTime","readInterval","timeInterval","timeIntervalUnits","unit","timeUnitKebabDictionary","fromJSON","defaultTimeInterval","defaultTimeIntervalUnits","writeInterval","target","String","allowNull","writer","JSONSupport","Object","defineProperty","apply","arguments","timeOffset","useViewTime","readOffset","timeInfo","exportOptions","timeOffsetUnits","set","fixTimeInfoFields","fields","_set","enumerable","configurable","respectsDaylightSaving","timezone","readRespectsDaylightSaving","respectDaylightSaving","visible","definitionExpression","labelingInfo","opacity","minScale","maxScale","renderer","_scale","view","get","hasDynamicLayers","visibleSublayers","map","toExportImageJSON","isExportDynamic","serviceSublayers","_get","_layerHandles","forEach","remove","allSublayers","on","notifyChange","propertyName","id","join","filter","reduce","layers","layerDefs","unshift","some","format","transparent","dependsOn","Number","combinedViewLayerTimeExtentProperty"],"mappings":"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","file":"static/js/17.cb6ef743.chunk.js","sourcesContent":["// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\n/**\n * ## Overview\n *\n * MapImageLayer allows you to display and analyze data from\n * [sublayers](#sublayers) defined in a\n * [map service](http://server.arcgis.com/en/server/latest/publish-services/windows/what-is-a-map-service.htm), exporting images\n * instead of features. Map service images are\n * dynamically generated on the server based on a request, which includes an\n * LOD (level of detail), a bounding box, dpi, spatial reference and other\n * options. The exported image is of the entire map extent specified.\n *\n * ::: esri-md class=\"panel trailer-1\"\n * Unlike {@link module:esri/layers/FeatureLayer}, MapImageLayer processing\n * is handled by the server, not the client. Offloading the processing to the\n * server allows MapImageLayer to render more features with a higher level\n * of performance in some cases.\n * :::\n *\n * MapImageLayer does not display tiled images. To display\n * tiled map service layers, see {@link module:esri/layers/TileLayer}.\n *\n * ## Creating a MapImageLayer\n *\n * MapImageLayer may be created in one of two ways: from a [service URL](#url) or from an ArcGIS\n * Portal [item ID](#portalItem).\n *\n * ### Reference a service URL\n *\n * To create a MapImageLayer instance from a service, you must set the [url](#url) property\n * to the REST endpoint of a layer in a Map Service. The URL will typically look\n * like the following.\n *\n * ```js\n * https://<hostname>/arcgis/rest/services/<service-name>/MapServer\n * ```\n *\n * For a layer to be visible in a view, it must be added to the {@link module:esri/Map}\n * referenced by the view. See {@link module:esri/Map#add Map.add()} for information about adding layers to a map.\n *\n * ```js\n * require([\"esri/layers/MapImageLayer\"], function(MapImageLayer){\n *   // points to the states layer in a service storing U.S. census data\n *   var layer = new MapImageLayer({\n *     url: \"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer\"\n *   });\n *   map.add(layer);  // adds the layer to the map\n * });\n * ```\n *\n * If the map service is requested from a different domain, a [CORS enabled server](../guide/cors/index.html) or a [proxy](../guide/proxies/index.html) is\n * required.\n *\n * ### Reference an ArcGIS portal Item ID\n *\n * You can also create a MapImageLayer from its ID if it exists as an item in ArcGIS Online or ArcGIS Enterprise.\n * For example, the following snippet shows how to add a new MapImageLayer instance to a map using the\n * [portalItem](#portalItem) property.\n *\n * ```js\n * // references an ArcGIS Online item pointing to a Map Service Layer\n * var layer = new MapImageLayer({\n *   portalItem: {  // autocasts as esri/portal/PortalItem\n *     id: \"8444e275037549c1acab02d2626daaee\"\n *   }\n * });\n * map.add(layer);  // adds the layer to the map\n * ```\n *\n * ## Sublayers\n *\n * Map services contain one or more sublayers. Sublayers may even contain nested sublayers.\n * When the [sublayers](#sublayers) property of the MapImageLayer is not specified, then an image of all sublayers\n * in the service is exported to the client. If a subset of sublayers from the service are\n * specified, then only the subset of sublayers are rendered on the client.\n * Sublayers have default rendering, scale visibility, labels, and other properties saved to the server. However, these properties may be dynamically\n * changed so a new map image is exported to the view. Sublayers of a MapImageLayer can only be styled with 2D symbology even if they are rendered in\n * a {@link module:esri/WebScene}.\n * To learn more about working with sublayers, see the {@link module:esri/layers/support/Sublayer} API\n * documentation.\n *\n * [![mapimagelayer-renderer](../../assets/img/apiref/layers/mapimagelayer-renderer.png)](../sample-code/layers-mapimagelayer-renderers/index.html)\n *\n * <a name=\"dynamic-layers\"></a>\n * ## Dynamic layers\n *\n * Sublayers may be rendered on the fly as dynamic layers. There are two types of dynamic layers:\n * {@link module:esri/layers/support/Sublayer#source DynamicMapLayer} and\n * {@link module:esri/layers/support/Sublayer#source DynamicDataLayer}.\n *\n * {@link module:esri/layers/support/Sublayer#source Dynamic map layers} allow you\n * to override sublayers in the map service with new renderers,\n * definition expressions, opacity, scale visibility, etc. Multiple dynamic map layers may exist\n * for a single map service layer.\n *\n * {@link module:esri/layers/support/Sublayer#source Dynamic data layers} provide\n * the ability to create layers on the fly from data referenced in\n * registered workspaces.\n * The data may be tables with or without geometries, feature classes, and\n * rasters. These data sources are not directly visible to the services directory, but may be\n * published and configured with the ArcGIS Server Manager.\n * Data from tables may be joined to other tables or dynamic map layers.\n *\n * ::: esri-md class=\"panel trailer-1\"\n * Esri requires that when you use an ArcGIS Online basemap in your app, the map must include Esri attribution and you must be licensed to use the content.\n * For detailed guidelines on working with attribution, please visit the official [attribution in your app](https://developers.arcgis.com/terms/attribution/) documentation.\n * For information on terms of use, see the [Terms of Use FAQ](https://developers.arcgis.com/terms/faq/).\n * :::\n *\n * @module esri/layers/MapImageLayer\n * @since 4.0\n * @see module:esri/layers/support/Sublayer\n * @see module:esri/layers/TileLayer\n * @see [Sample - MapImageLayer](../sample-code/layers-mapimagelayer/index.html)\n * @see [Sample - MapImageLayer: toggle sublayer visibility](../sample-code/layers-mapimagelayer-sublayers/index.html)\n * @see [Sample - MapImageLayer: set definition expression](../sample-code/layers-mapimagelayer-definitionexpression/index.html)\n * @see [Sample - MapImageLayer: set renderers on sublayers](../sample-code/layers-mapimagelayer-renderers/index.html)\n * @see [Sample - MapImageLayer: label sublayer features](../sample-code/layers-mapimagelayer-dynamic-labels/index.html)\n * @see [Sample - MapImageLayer: create dynamic map layers](../sample-code/layers-dynamicmaplayer/index.html)\n * @see [Sample - MapImageLayer: dynamic data layer with table join](../sample-code/layers-dynamicdatalayer-table-join/index.html)\n * @see [Sample - MapImageLayer: dynamic data layer with query table](../sample-code/layers-dynamicdatalayer-query-table/index.html)\n * @see [Sample - MapImageLayer: dynamic data layer with raster](../sample-code/layers-dynamicdatalayer-raster/index.html)\n *\n * @example\n * var layer = new MapImageLayer({\n * url: \"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer\",\n *   sublayers: [\n *    {\n *      id: 3,\n *      visible: false\n *    }, {\n *      id: 2,\n *      visible: true\n *    }, {\n *      id: 1,\n *      visible: true\n *    }, {\n *      id: 0,\n *      visible: true,\n *      definitionExpression: \"pop2000 > 100000\"\n *    }\n *  ]\n * });\n */\n\ndefine([\"require\",\"exports\",\"../core/tsSupport/assignHelper\",\"../core/tsSupport/declareExtendsHelper\",\"../core/tsSupport/decorateHelper\",\"../core/tsSupport/paramHelper\",\"../core/tsSupport/generatorHelper\",\"../core/tsSupport/awaiterHelper\",\"../request\",\"../core/Error\",\"../core/maybe\",\"../core/MultiOriginJSONSupport\",\"../core/promiseUtils\",\"../core/accessorSupport/decorators\",\"../geometry/support/scaleUtils\",\"./Layer\",\"./mixins/ArcGISMapService\",\"./mixins/ArcGISService\",\"./mixins/OperationalLayer\",\"./mixins/PortalLayer\",\"./mixins/RefreshableLayer\",\"./mixins/ScaleRangeLayer\",\"./mixins/SublayersOwner\",\"./mixins/TemporalLayer\",\"./support/commonProperties\",\"./support/ExportImageParameters\"],function(e,r,t,o,a,i,p,s,n,l,y,u,c,d,m,h,g,v,S,f,x,b,w,O,I,L){return function(e){function r(r,t){var o=e.call(this,r)||this;return o.alwaysRefetch=!1,o.dpi=96,o.gdbVersion=null,o.imageFormat=\"png24\",o.imageMaxHeight=2048,o.imageMaxWidth=2048,o.imageTransparency=!0,o.labelsVisible=!1,o.isReference=null,o.operationalLayerType=\"ArcGISMapServiceLayer\",o.sourceJSON=null,o.sublayers=null,o.type=\"map-image\",o.url=null,o}return o(r,e),r.prototype.normalizeCtorArgs=function(e,r){return\"string\"==typeof e?t({url:e},r):e},r.prototype.load=function(e){var r=this,t=y.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).then(function(){return r._fetchService(t)})),this.when()},r.prototype.readImageFormat=function(e,r){var t=r.supportedImageFormatTypes;return t&&t.indexOf(\"PNG32\")>-1?\"png32\":\"png24\"},r.prototype.createExportImageParameters=function(e,r,o,a){var i=a&&a.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());var p=new L.ExportImageParameters({layer:this,scale:m.getScale({extent:e,width:r})*i}),s=p.toJSON();p.layer=null,p.destroy();var n=!a||!a.rotation||this.version<10.3?{}:{rotation:-a.rotation},l=e&&e.spatialReference,y=l.wkid||JSON.stringify(l.toJSON());s.dpi*=i;var u={};if(a&&a.timeExtent){var c=a.timeExtent.toJSON(),d=c.start,h=c.end;d&&h&&d===h?u.time=\"\"+d:null==d&&null==h||(u.time=(null==d?\"null\":d)+\",\"+(null==h?\"null\":h))}return t({bbox:e&&e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:y,imageSR:y,size:r+\",\"+o},s,n,u)},r.prototype.fetchImage=function(e,r,o,a){var i={responseType:\"image\"};a&&a.timestamp&&(i.query={_ts:a.timestamp}),a&&a.signal&&(i.signal=a.signal);var p=this.parsedUrl.path+\"/export\",s=t({},this.parsedUrl.query,this.createExportImageParameters(e,r,o,a),{f:\"image\",_ts:this.alwaysRefetch?Date.now():null});return null==s.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(i.query?i.query=t({},s,i.query):i.query=s,n(p,i).then(function(e){return e.data}).catch(function(e){if(c.isAbortError(e))throw e;throw new l(\"mapimagelayer:image-fetch-error\",\"Unable to load image: \"+p,{error:e})})):c.reject(new l(\"mapimagelayer:dynamiclayer-not-supported\",\"service \"+this.url+\" doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.\",{query:s}))},r.prototype._fetchService=function(e){return s(this,void 0,void 0,function(){var r,o,a;return p(this,function(i){switch(i.label){case 0:return this.sourceJSON?(this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl}),[2]):[4,n(this.parsedUrl.path,{query:t({f:\"json\"},this.parsedUrl.query),signal:e})];case 1:return r=i.sent(),o=r.data,a=r.ssl,a&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=o,this.read(o,{origin:\"service\",url:this.parsedUrl}),[2]}})})},a([d.property()],r.prototype,\"alwaysRefetch\",void 0),a([d.property()],r.prototype,\"dpi\",void 0),a([d.property()],r.prototype,\"gdbVersion\",void 0),a([d.property({json:{read:!1,write:!1}})],r.prototype,\"popupEnabled\",void 0),a([d.property()],r.prototype,\"imageFormat\",void 0),a([d.reader(\"imageFormat\",[\"supportedImageFormatTypes\"])],r.prototype,\"readImageFormat\",null),a([d.property({json:{origins:{service:{read:{source:\"maxImageHeight\"}}}}})],r.prototype,\"imageMaxHeight\",void 0),a([d.property({json:{origins:{service:{read:{source:\"maxImageWidth\"}}}}})],r.prototype,\"imageMaxWidth\",void 0),a([d.property()],r.prototype,\"imageTransparency\",void 0),a([d.property({json:{read:!1,write:!1}})],r.prototype,\"labelsVisible\",void 0),a([d.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],r.prototype,\"isReference\",void 0),a([d.property({type:[\"ArcGISMapServiceLayer\"]})],r.prototype,\"operationalLayerType\",void 0),a([d.property()],r.prototype,\"sourceJSON\",void 0),a([d.property()],r.prototype,\"sublayers\",void 0),a([d.property({type:[\"show\",\"hide\",\"hide-children\"]})],r.prototype,\"listMode\",void 0),a([d.property({json:{read:!1},readOnly:!0,value:\"map-image\"})],r.prototype,\"type\",void 0),a([d.property(I.url)],r.prototype,\"url\",void 0),r=a([d.subclass(\"esri.layers.MapImageLayer\")],r)}(d.declared(O.TemporalLayer(b.ScaleRangeLayer(x.RefreshableLayer(w.SublayersOwner(g.ArcGISMapService(v.ArcGISService(S.OperationalLayer(f.PortalLayer(u.MultiOriginJSONMixin(h)))))))))))});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../core/tsSupport/declareExtendsHelper\",\"../../core/tsSupport/decorateHelper\",\"../../TimeExtent\",\"../../TimeInterval\",\"../../core/JSONSupport\",\"../../core/lang\",\"../../core/accessorSupport/decorators\",\"./TimeReference\",\"./timeUtils\"],function(e,t,r,i,l,n,o,a,u,p,m){return function(e){function t(t){var r=e.call(this,t)||this;return r.cumulative=!1,r.endField=null,r.fullTimeExtent=null,r.hasLiveData=!1,r.interval=null,r.startField=null,r.timeReference=null,r.trackIdField=null,r.useTime=!0,r}r(t,e),o=t,t.prototype.readFullTimeExtent=function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=t.timeExtent[0],i=t.timeExtent[1];return new l({start:r,end:i})},t.prototype.writeFullTimeExtent=function(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null},t.prototype.readInterval=function(e,t){return t.timeInterval&&t.timeIntervalUnits?new n({value:t.timeInterval,unit:m.timeUnitKebabDictionary.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new n({value:t.defaultTimeInterval,unit:m.timeUnitKebabDictionary.fromJSON(t.defaultTimeIntervalUnits)}):null},t.prototype.writeInterval=function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null},t.prototype.clone=function(){var e=this,t=e.cumulative,r=e.endField,i=e.hasLiveData,l=e.interval,n=e.startField,u=e.timeReference,p=e.fullTimeExtent,m=e.trackIdField,d=e.useTime;return new o({cumulative:t,endField:r,hasLiveData:i,interval:l,startField:n,timeReference:a.clone(u),fullTimeExtent:a.clone(p),trackIdField:m,useTime:d})};var o;return i([u.property({type:Boolean,json:{read:{source:\"exportOptions.timeDataCumulative\"},write:{target:\"exportOptions.timeDataCumulative\"}}})],t.prototype,\"cumulative\",void 0),i([u.property({type:String,json:{read:{source:\"endTimeField\"},write:{target:\"endTimeField\",allowNull:!0}}})],t.prototype,\"endField\",void 0),i([u.property({type:l,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,\"fullTimeExtent\",void 0),i([u.reader(\"fullTimeExtent\",[\"timeExtent\"])],t.prototype,\"readFullTimeExtent\",null),i([u.writer(\"fullTimeExtent\")],t.prototype,\"writeFullTimeExtent\",null),i([u.property({type:Boolean,json:{write:!0}})],t.prototype,\"hasLiveData\",void 0),i([u.property({type:n,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,\"interval\",void 0),i([u.reader(\"interval\",[\"timeInterval\",\"timeIntervalUnits\",\"defaultTimeInterval\",\"defaultTimeIntervalUnits\"])],t.prototype,\"readInterval\",null),i([u.writer(\"interval\")],t.prototype,\"writeInterval\",null),i([u.property({type:String,json:{read:{source:\"startTimeField\"},write:{target:\"startTimeField\",allowNull:!0}}})],t.prototype,\"startField\",void 0),i([u.property({type:p,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,\"timeReference\",void 0),i([u.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,\"trackIdField\",void 0),i([u.property({type:Boolean,json:{read:{source:\"exportOptions.useTime\"},write:{target:\"exportOptions.useTime\"}}})],t.prototype,\"useTime\",void 0),t=o=i([u.subclass(\"esri.layers.support.TimeInfo\")],t)}(u.declared(o.JSONSupport))});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\n/**\n                 * TimeInfo provides information such as date fields that store\n                 * {@link module:esri/layers/support/TimeInfo#startField start}\n                 * and {@link module:esri/layers/support/TimeInfo#endField end} time\n                 * for each feature and the {@link module:esri/layers/support/TimeInfo#fullTimeExtent fullTimeExtent}\n                 * for the layer. The `timeInfo` property, along with its `startField` and `endField` properties, must be set at the\n                 * time of layer initialization if it is being set for a\n                 * {@link module:esri/layers/GeoJSONLayer}, {@link module:esri/layers/CSVLayer} or\n                 * {@link module:esri/layers/FeatureLayer} initialized from\n                 * [client-side features](esri-layers-FeatureLayer.html#creating-a-featurelayer).\n                 * The {@link module:esri/layers/support/TimeInfo#fullTimeExtent fullTimeExtent} for `timeInfo` is\n                 * automatically calculated based on its `startField` and `endField` properties.\n                 * The timeInfo parameters cannot be changed after the layer is {@link module:esri/layers/FeatureLayer#load loaded}.\n                 *\n                 * @name timeInfo\n                 * @type {module:esri/layers/support/TimeInfo}\n                 * @memberof module:esri/layers/mixins/TemporalLayer\n                 * @default null\n                 * @since 4.11\n                 * @autocast\n                 *\n                 * @example\n                 * // create geojson layer from usgs earthquakes geojson feed\n                 * const geojsonLayer = new GeoJSONLayer({\n                 *   url: \"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson\",\n                 *   copyright: \"USGS Earthquakes\",\n                 *   fields: [\n                 *     { \"name\": \"mag\", \"type\": \"double\" },\n                 *     { \"name\": \"place\", \"type\": \"string\" },\n                 *     { \"name\": \"time\", \"type\": \"date\" }, // date field\n                 *     { \"name\": \"depth\", \"type\": \"double\" }\n                 *   ],\n                 *   // timeInfo can be used to do temporal queries\n                 *   // set the startField and endField.\n                 *   // timeExtent is automatically calculated from the\n                 *   // the start and end date fields\n                 *   timeInfo: {\n                 *     startField: \"time\"\n                 *   }\n                 * });\n                 */\n\ndefine([\"require\",\"exports\",\"../../core/tsSupport/declareExtendsHelper\",\"../../core/tsSupport/decorateHelper\",\"../../TimeExtent\",\"../../TimeInterval\",\"../../core/accessorSupport/decorators\",\"../../layers/support/TimeInfo\",\"../support/fieldUtils\",\"../support/timeUtils\"],function(e,t,r,o,i,n,p,s,l,u){Object.defineProperty(t,\"__esModule\",{value:!0}),t.TemporalLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeExtent=null,t.timeOffset=null,t.useViewTime=!0,t}return r(t,e),t.prototype.readOffset=function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var o=r.timeOffset,i=u.timeUnitKebabDictionary.fromJSON(r.timeOffsetUnits);return o&&i?new n({value:o,unit:i}):null},Object.defineProperty(t.prototype,\"timeInfo\",{set:function(e){l.fixTimeInfoFields(e,this.fields),this._set(\"timeInfo\",e)},enumerable:!0,configurable:!0}),o([p.property({type:i,json:{write:!1}})],t.prototype,\"timeExtent\",void 0),o([p.property({type:n})],t.prototype,\"timeOffset\",void 0),o([p.reader(\"service\",\"timeOffset\",[\"timeInfo.exportOptions\"])],t.prototype,\"readOffset\",null),o([p.property({value:null,type:s,json:{write:!0,origins:{\"web-document\":{read:!1,write:!1}}}})],t.prototype,\"timeInfo\",null),o([p.property({type:Boolean,json:{write:!1}})],t.prototype,\"useViewTime\",void 0),t=o([p.subclass(\"esri.layers.mixins.TemporalLayer\")],t)}(p.declared(e))}});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../core/tsSupport/declareExtendsHelper\",\"../../core/tsSupport/decorateHelper\",\"../../core/JSONSupport\",\"../../core/accessorSupport/decorators\"],function(e,t,r,i,o,n){return function(e){function t(t){var r=e.call(this,t)||this;return r.respectsDaylightSaving=!1,r.timezone=null,r}r(t,e),o=t,t.prototype.readRespectsDaylightSaving=function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving},t.prototype.clone=function(){var e=this,t=e.respectsDaylightSaving,r=e.timezone;return new o({respectsDaylightSaving:t,timezone:r})};var o;return i([n.property({type:Boolean,json:{write:!0}})],t.prototype,\"respectsDaylightSaving\",void 0),i([n.reader(\"respectsDaylightSaving\",[\"respectsDaylightSaving\",\"respectDaylightSaving\"])],t.prototype,\"readRespectsDaylightSaving\",null),i([n.property({type:String,json:{read:{source:\"timeZone\"},write:{target:\"timeZone\"}}})],t.prototype,\"timezone\",void 0),t=o=i([n.subclass(\"esri.layers.support.TimeReference\")],t)}(n.declared(o.JSONSupport))});","// COPYRIGHT © 2019 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.14/esri/copyright.txt for details.\n\ndefine([\"require\",\"exports\",\"../../core/tsSupport/assignHelper\",\"../../core/tsSupport/declareExtendsHelper\",\"../../core/tsSupport/decorateHelper\",\"../../core/Accessor\",\"../../core/accessorSupport/decorators\",\"./sublayerUtils\",\"./timeUtils\",\"../../views/View\"],function(e,r,t,a,i,n,s,l,y,o){Object.defineProperty(r,\"__esModule\",{value:!0});var u={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"},p=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r._scale=null,r.view=null,r}return a(r,e),Object.defineProperty(r.prototype,\"dynamicLayers\",{get:function(){if(!this.hasDynamicLayers)return null;var e=this.visibleSublayers.map(function(e){return e.toExportImageJSON()});return e.length?JSON.stringify(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"hasDynamicLayers\",{get:function(){return this.layer&&l.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"layer\",{set:function(e){var r=this;this._get(\"layer\")!==e&&(this._set(\"layer\",e),this._layerHandles&&(this._layerHandles.forEach(function(e){return e.remove()}),this._layerHandles.length=0),e&&(this._layerHandles=[e.allSublayers.on(\"change\",function(){return r.notifyChange(\"visibleSublayers\")}),e.on(\"sublayer-update\",function(e){return r.notifyChange(u[e.propertyName])})]))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"layers\",{get:function(){var e=this.visibleSublayers;return e?e.length?\"show:\"+e.map(function(e){return e.id}).join(\",\"):\"show:-1\":null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"layerDefs\",{get:function(){var e=this.visibleSublayers.filter(function(e){return null!=e.definitionExpression});return e.length?JSON.stringify(e.reduce(function(e,r){return e[r.id]=r.definitionExpression,e},{})):null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"scale\",{get:function(){return null!=this._scale?this._scale:this.view&&this.view.scale||0},set:function(e){this.view||(this._scale=e,this.notifyChange(\"scale\"))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"version\",{get:function(){var e=this;e.layers,e.layerDefs,e.dynamicLayers,e.timeExtent;var r=e.layer;return r&&(r.dpi,r.imageFormat,r.imageTransparency,r.gdbVersion),(this._get(\"version\")||0)+1},set:function(e){this._set(\"version\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"visibleSublayers\",{get:function(){var e=this,r=[];if(!this.layer)return r;var t=this.layer.sublayers,a=function(t){var i=e.scale,n=0===i,s=0===t.minScale||i<=t.minScale,l=0===t.maxScale||i>=t.maxScale;t.visible&&(n||s&&l)&&(t.sublayers?t.sublayers.forEach(a):r.unshift(t))};t&&t.forEach(a);var i=this._get(\"visibleSublayers\");return!i||i.length!==r.length||i.some(function(e,t){return r[t]!==e})?r:i},enumerable:!0,configurable:!0}),r.prototype.toJSON=function(){var e=this.layer,r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r=t({},r,{layers:this.layers,layerDefs:this.layerDefs}),r},i([s.property({readOnly:!0,dependsOn:[\"hasDynamicLayers\",\"visibleSublayers\"]})],r.prototype,\"dynamicLayers\",null),i([s.property({readOnly:!0,dependsOn:[\"visibleSublayers\",\"layer.serviceSublayers\",\"layer.capabilities\"]})],r.prototype,\"hasDynamicLayers\",null),i([s.property()],r.prototype,\"layer\",null),i([s.property({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],r.prototype,\"layers\",null),i([s.property({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],r.prototype,\"layerDefs\",null),i([s.property({type:Number,dependsOn:[\"view.scale\"]})],r.prototype,\"scale\",null),i([s.property(y.combinedViewLayerTimeExtentProperty)],r.prototype,\"timeExtent\",void 0),i([s.property({dependsOn:[\"layers\",\"layerDefs\",\"dynamicLayers\",\"layer.dpi\",\"layer.imageFormat\",\"layer.imageTransparency\",\"layer.gdbVersion\",\"timeExtent\"]})],r.prototype,\"version\",null),i([s.property({type:o})],r.prototype,\"view\",void 0),i([s.property({readOnly:!0,dependsOn:[\"layer.sublayers\",\"scale\"]})],r.prototype,\"visibleSublayers\",null),r=i([s.subclass(\"esri.layers.mixins.ExportImageParameters\")],r)}(s.declared(n));r.ExportImageParameters=p});"],"sourceRoot":""}